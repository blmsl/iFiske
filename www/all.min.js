angular.module("ifiske",["ionic","ifiske.controllers","ifiske.directives","ifiske.api","ifiske.db","ifiske.utils","ifiske.update","ifiske.filters","ionic.ion.headerShrink","ngCordova","systemBrowser","ngCordovaSms","ngMessages","ImgCache","leaflet-directive"]).constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}).run(["$ionicPlatform","Update","ImgCache",function(e,t,n){e.ready(function(){window.ionic&&window.ionic.Keyboard&&window.ionic.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),n.$init(),t.update()})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","ImgCacheProvider",function(e,t,n,o){o.setOptions({debug:!0,usePersistentCache:!0}),o.manualInit=!0,n.views.forwardCache(!0),n.backButton.previousTitleText(!1).text(""),n.tabs.position("bottom");var i="/start/login";window.localStorage.getItem("session")&&(i="/menu/home"),t.otherwise(i),e.state("start",{url:"/start","abstract":!0,templateUrl:"components/start/start.html"}).state("start.login",{url:"/login",templateUrl:"components/login/login.html",controller:"LoginCtrl"}).state("start.register",{url:"/register",templateUrl:"components/register/register.html",controller:"RegisterCtrl"}).state("start.register.details",{url:"/details",templateUrl:"components/register/register_details.html"}).state("start.register.verify",{url:"/verify",templateUrl:"components/register/register_verify.html"}).state("menu",{url:"/menu","abstract":!0,templateUrl:"components/menu/menu.html",controller:"MenuCtrl"}).state("menu.home",{url:"/home",templateUrl:"components/home/home.html",controller:"HomeCtrl"}).state("menu.info",{url:"/info",templateUrl:"components/info/info.html"}).state("menu.bugs",{url:"/info",templateUrl:"components/menu/report.html"}).state("menu.contact",{url:"/contact",templateUrl:"components/contact/contact.html",controller:"ContactCtrl"}).state("menu.legal",{url:"/legal",templateUrl:"components/legal/legal.html",controller:"LegalCtrl"}).state("menu.about",{url:"/about",templateUrl:"components/about/about.html",controller:"AboutCtrl"}).state("menu.userinfo",{url:"/userinfo",controller:"UserCtrl",templateUrl:"components/user/user.html"}).state("menu.counties",{url:"/counties",templateUrl:"components/counties/counties.html",controller:"CountiesCtrl"}).state("menu.areas",{url:"/areas",params:{id:!1,county:!1,search:""},templateUrl:"components/area_list/area_list.html",controller:"AreasCtrl"}).state("menu.cards",{url:"/cards",templateUrl:"components/user_cards/user_cards.html",controller:"UserCardsCtrl"}).state("menu.favorites",{url:"/favorites",templateUrl:"components/favorites/favorites.html"}).state("menu.fishes",{url:"/fishes",templateUrl:"components/fishes/fishes.html",controller:"FishesCtrl"}).state("menu.fishdetail",{url:"/fishdetail/:id",params:{id:!1,fish:!1},templateUrl:"components/fish_detail/fish_detail.html",controller:"FishDetailCtrl"}).state("menu.map",{url:"/map",templateUrl:"components/map/map.html",controller:"MapCtrl"}).state("menu.techniques",{url:"/techniques",templateUrl:"components/techniques/techniques.html",controller:"TechniquesCtrl"}).state("menu.techniquedetail",{url:"/techniquedetail/:id",params:{id:!1,tech:!1},templateUrl:"components/technique_detail/technique_detail.html",controller:"TechniqueDetailCtrl"}).state("menu.report",{url:"/report",templateUrl:"components/report/report.html"}).state("area",{"abstract":!0,url:"/area/:id",templateUrl:"components/area/area.html",controller:"AreaCtrl"}).state("area.map",{url:"/map",views:{map:{templateUrl:"components/area/map.html"}}}).state("area.info",{url:"/info",views:{info:{templateUrl:"components/area/info.html"}}}).state("area.fishinfo",{url:"/fishinfo",views:{fishinfo:{templateUrl:"components/area/fish.html"}}}).state("area.cards",{url:"/cards",views:{cards:{templateUrl:"components/area/cards.html"}}})}]),angular.module("ifiske.controllers",[]),angular.module("ifiske.directives",[]),angular.module("ifiske.controllers").controller("AboutCtrl",["$scope","$cordovaAppVersion","$ionicPlatform","Update",function(e,t,n,o){e.version=e.dbDate="Okänt",e.update=o,n.ready(function(){window.cordova&&t.getAppVersion().then(function(t){console.log("iFiske version:",t),e.version=t})})}]),angular.module("ifiske.controllers").controller("AreaCtrl",["$scope","$ionicHistory","localStorage","$rootScope","$ionicViewSwitcher","$stateParams","DB","$ionicSlideBoxDelegate","$ionicModal","$state",function(e,t,n,o,i,r,s,l,u,a){e.map={center:{}},e.image_endpoint="http://www.ifiske.se",e.tabsBack=function(){t.viewHistory().currentView.index?o.$ionicGoBack():(i.nextDirection("back"),e.$emit("$ionicHistory.change",{historyId:n.get("homeHistoryId")}))},e.$on("$ionicView.beforeEnter",function(){r=a.$current.locals["@"].$stateParams;var t={};s.getArea(r.id).then(function(n){e.map.center={lat:n.lat,lng:n.lng,zoom:Number(n.zoom)?Number(n.zoom):9},e.images=n.images,l.update(),e.area=n,s.getOrganization(n.orgid).then(function(t){e.org=t}),s.getPoiTypes().then(function(o){for(var i=0;i<o.length;++i){var r=o[i];t[r.ID]={iconUrl:"http://www.ifiske.se/"+r.icon,iconAnchor:[16,37]}}s.getPois(n.orgid).then(function(n){e.map.markers=n.map(function(e){return{layer:"pois",lat:e.la,lng:e.lo,icon:t[e.type],message:e.t}})},function(e){console.error(e)}),s.getPolygons(n.orgid).then(function(t){e.map.paths=t.map(function(e){return{latlngs:JSON.parse("["+e.poly+"]"),color:e.c,weight:2,opacity:.5,fillColor:e.c,type:"polygon"}})},function(e){console.error(e)})})},function(e){console.log(e)}),s.getAreaFishes(r.id).then(function(t){e.fishes=t},function(e){console.log(e)}),s.getProductsByArea(r.id).then(function(t){e.products=t},function(e){console.log(e)})}),e.sortorder="-amount",e.smsterms=n.get("sms_terms"),e.predicate="so",u.fromTemplateUrl("components/area/sms_modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.sms_modal=t}),e.openModal=function(t){e.sms_modal.show(),e.product=t},e.closeModal=function(){e.sms_modal.hide()},e.showTerms=function(){e.showingterms=!e.showingterms},e.showingterms=!1,u.fromTemplateUrl("components/area/rules_modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.rules_modal=t}),e.openRulesModal=function(t){e.rules_modal.show(),e.product=t},e.closeRulesModal=function(){e.rules_modal.hide()},e.$on("$destroy",function(){e.sms_modal.remove(),e.rules_modal.remove()}),angular.extend(e.map,{layers:{baselayers:{mapbox:{name:"Mapbox",type:"xyz",url:"http://api.tiles.mapbox.com/v4/{maptype}/{z}/{x}/{y}@2x.png?access_token={apikey}",layerOptions:{maptype:"mapbox.outdoors",apikey:"pk.eyJ1IjoibWFpc3RobyIsImEiOiI3Ums5R0IwIn0.DOhU81clHLEhTj81DIOjdg"}}},overlays:{pois:{name:"Ställen",type:"markercluster",visible:!0,layerOptions:{disableClusteringAtZoom:9,chunkedLoading:!0,showCoverageOnHover:!1,removeOutsideVisibleBounds:!0}}}}})}]),angular.module("ifiske.controllers").controller("AreasCtrl",["$scope","$stateParams","$ionicScrollDelegate","DB",function(e,t,n,o){var i=t.search;e.search=i,e.county=t.county,o.search("",t.id).then(function(t){e.areas=t},function(e){console.log(e)}),e.clearSearch=function(){e.search=""},e.scrollTop=function(){n.scrollTop()}}]),angular.module("ifiske.controllers").controller("ContactCtrl",["$scope","$state","localStorage",function(e,t,n){e.contactInfo=n.get("contactInfo")}]),angular.module("ifiske.controllers").controller("CountiesCtrl",["$scope","DB",function(e,t){t.getCounties().then(function(t){e.counties=t},function(e){console.log(e)})}]),angular.module("ifiske.controllers").controller("FishDetailCtrl",["$scope","$stateParams","DB",function(e,t,n){e.fish=t.fish,e.image_endpoint="http://www.ifiske.se",e.fish||n.getFish(t.id).then(function(t){e.fish=t,console.log(e.fish)},function(e){console.log(e)}),console.log(e.fish)}]),angular.module("ifiske.controllers").controller("FishesCtrl",["$scope","DB",function(e,t){e.sortorder="so",e.image_endpoint="http://www.ifiske.se",t.getFishes().then(function(t){e.fishes=t,e.default_img=t[0].img},function(e){console.log(e)})}]),angular.module("ifiske.controllers").controller("HomeCtrl",["$scope","$state","$ionicHistory","localStorage","sessionData",function(e,t,n,o,i){e.loggedIn=i,o.set("homeHistoryId",n.currentHistoryId()),e.myFunc=function(e){13!=e.keyCode||e.shiftKey||t.go("menu.areas",{search:e.srcElement.value})}}]),angular.module("ifiske.controllers").controller("LegalCtrl",["$scope","$state","localStorage",function(e,t,n){e.tos=n.get("tos")}]),angular.module("ifiske.controllers").controller("LoginCtrl",["$scope","$state","Update","$ionicLoading",function(e,t,n,o){e.signIn=function(i){o.show(),n.user_login(i.username.$viewValue,i.password.$viewValue).then(function(){o.hide(),i.$setValidity("loginError",!0),t.go("menu.home")},function(t){o.hide(),i.$setValidity("loginError",!1),e.error=t.response})}}]),angular.module("ifiske.controllers").controller("MapCtrl",["$scope","leafletData","DB",function(e,t,n){e.test="hej",n.search("").then(function(t){e.markers=t.map(function(t){return{layer:"fishareas",lat:t.lat,lng:t.lng,getMessageScope:function(){var n=e.$new();return n.area=t,n},message:'<a ui-sref="area.info({id: area.ID })">{{area.t}}</a>'}})}),angular.extend(e,{center:{lat:62,lng:15,zoom:5},layers:{baselayers:{mapbox:{name:"Mapbox",type:"xyz",url:"http://api.tiles.mapbox.com/v4/{maptype}/{z}/{x}/{y}@2x.png?access_token={apikey}",layerOptions:{maptype:"mapbox.outdoors",apikey:"pk.eyJ1IjoibWFpc3RobyIsImEiOiI3Ums5R0IwIn0.DOhU81clHLEhTj81DIOjdg"}}},overlays:{fishareas:{name:"Fiskeområden",type:"markercluster",visible:!0,layerOptions:{disableClusteringAtZoom:9,chunkedLoading:!0,showCoverageOnHover:!1,removeOutsideVisibleBounds:!0}}}}})}]),angular.module("ifiske.controllers").controller("MenuCtrl",["$scope","$state","$ionicPopover","sessionData","Update",function(e,t,n,o,i){e.sessionData=o,n.fromTemplateUrl("components/menu/popover.html",{scope:e}).then(function(t){e.popover=t}),e.userinfo=function(){e.popover.hide(),t.go("menu.userinfo")},e.logout=function(){e.popover.hide(),i.user_logout(),t.go("start.login")},e.login=function(){e.popover.hide(),t.go("start.login")},e.register=function(){e.popover.hide(),t.go("start.register.details")},e.update=function(){i.forcedUpdate()}}]),angular.module("ifiske.controllers").controller("RegisterCtrl",["$scope","$state","$ionicLoading","$ionicModal","$ionicScrollDelegate","API","localStorage",function(e,t,n,o,i,r,s){var l;e.checkUsername=function(e){r.user_exists(e.$viewValue).then(function(t){e.$setValidity("nameTaken",!t)})},e.checkEmail=function(e){r.user_exists(null,e.$viewValue).then(function(t){e.$setValidity("emailTaken",!t)})},e.formErrors={},e.register=function(o){n.show(),e.phone=o.phone.$viewValue,l=o.username.$viewValue;var s=o.password.$viewValue,u=o.fullname.$viewValue,a=o.email.$viewValue;r.user_register(l,u,s,a,e.phone).then(function(){n.hide(),t.go("^.verify")},function(t){e.formErrors.registrationError=!0,i.scrollTop(!0),8==t.error_code&&o.email.$setValidity("invalidEmail",!1),9==t.error_code&&(e.checkUsername(o.username),e.checkEmail(o.email)),10==t.error_code&&o.phone.$setValidity("invalidPhone",!1),n.hide()})},e.verify=function(e){n.show();var o=e.vercode;r.user_confirm(l,o.$viewValue).then(function(){t.go("start.login"),o.$setValidity("verified",!0),n.hide()},function(){o.$setValidity("verified",!1),n.hide()})},e.tos=s.get("tos"),o.fromTemplateUrl("components/register/eula.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.eula=t}),e.showEula=function(){e.eula.show()},e.closeEula=function(){e.eula.hide()},e.$on("$destroy",function(){e.eula.remove()})}]),angular.module("ifiske.controllers").controller("TechniqueDetailCtrl",["$scope","$stateParams","DB","$ionicSlideBoxDelegate",function(e,t,n,o){if(e.image_endpoint="http://www.ifiske.se",e.tech=t.tech,e.images=[],e.tech){var i=e.tech;e.images=[i.img1,i.img2,i.img3].filter(function(e){return!/\/$/.test(e)}),o.update()}else n.getTechnique(t.id).then(function(t){e.images=[t.img1,t.img2,t.img3].filter(function(e){return!/\/$/.test(e)}),o.update(),e.tech=t})}]),angular.module("ifiske.controllers").controller("TechniquesCtrl",["$scope","DB",function(e,t){t.getTechniques().then(function(t){console.log(t),e.techniques=t}),e.image_endpoint="http://www.ifiske.se",e.sortorder="so"}]),angular.module("ifiske.controllers").controller("UserCtrl",["$scope","DB",function(e,t){t.getUserInfo().then(function(t){e.user=t}),t.getUserNumbers().then(function(t){e.numbers=t})}]),angular.module("ifiske.controllers").controller("UserCardsCtrl",["$scope","$stateParams","DB","$ionicModal",function(e,t,n,o){e.pred="-to",e.endpoint="https://www.ifiske.se",e.now=Date.now(),n.getUserProducts().then(function(t){e.products=t},function(e){console.log(e)}),o.fromTemplateUrl("components/area_cards/rules_modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.rules_modal=t}),e.openRulesModal=function(t){e.rules_modal.show(),console.log(t),e.product=t},e.closeRulesModal=function(){e.rules_modal.hide()},e.$on("$destroy",function(){e.rules_modal.remove()})}]),function(e){"use strict";e.module("ifiske.api",["ifiske.utils"]).provider("API",function(){this.base_url="https://www.ifiske.se/api/v2/api.php",this.$get=["$http","sessionData","localStorage","$q",function(t,n,o,i){var r=this.base_url,s=function(n){return i(function(o,i){t({method:"get",url:r,params:e.extend(n,{key:"0123456789abcdef"}),timeout:5e3,cache:!0}).success(function(e){"error"===e.status?i(e.message):e.data?o(e.data.response):i(e)}).error(function(e,t){i(0===t?new Error("Request timeout"):e)})})},l=function(t){var o=n.token;return s(e.extend(t,{s:o}))};return{get_municipalities:function(){return s({m:"get_municipalities"})},get_counties:function(){return s({m:"get_counties"})},user_exists:function(e,t){var n={m:"user_exists"};return"string"==typeof e&&(n.username=e),"string"==typeof t&&(n.email=t),s(n)},user_register:function(e,t,n,o,i){return s({m:"user_register",username:e,fullname:t,password:n,email:o,phone:i})},user_confirm:function(e,t){return s({m:"user_confirm",username:e,pin:t})},user_info:function(){return l({m:"user_info"})},user_login:function(e,t){return s({m:"user_login",username:e,password:t}).then(function(e){return n.setToken(e.data.response),e.data.response})},user_logout:function(){l({m:"user_logout"}).then(function(){n.deleteToken()})},user_products:function(){return l({m:"user_products"})},get_fishes:function(){return s({m:"get_fishes"})},get_techniques:function(){return s({m:"get_techniques"})},get_baits:function(){return s({m:"get_baits"})},get_organizations:function(e){return s({m:"get_organizations",orgid:e})},get_org_modified:function(e){return s({m:"get_org_modified",orgid:e})},get_areas:function(e){return s({m:"get_areas",areaid:e})},get_areas_modified:function(e){return s({m:"get_areas_modified",areaid:e})},get_products:function(e){return s({m:"get_products",areaid:e})},get_rules:function(e){return s({m:"get_rules",ruleid:e})},get_photos:function(e,t){return s({m:"get_photos",orgid:e,areaid:t})},get_map_pois:function(e){return s({m:"get_map_pois",orgid:e})},get_map_poi_types:function(){return s({m:"get_map_poi_types"})},get_map_polygons:function(e){return s({m:"get_map_polygons",orgid:e})},user_get_favorites:function(){return l({m:"user_get_favorites"})},get_terms_of_service:function(){return s({m:"get_terms_of_service"})},get_contact_info:function(){return s({m:"get_contact_info"})},get_engine_policies:function(){return s({m:"get_engine_policies"})},get_sms_terms:function(){return s({m:"get_sms_terms"})}}}]})}(window.angular),function(e,t){"use strict";e.module("ifiske.db",[]).provider("DB",function(){this.$get=["$cordovaSQLite","API","$q",function(e,n,o){var i;if(window.sqlitePlugin)i=e.openDB("fiskebasen.db");else{if(!window.openDatabase)return console.log("Not supported on this device, sorry"),t;i=window.openDatabase("fiskebasen.db","1.0","fiskebasen",10485760)}var r={Area:[["ID","int"],["orgid","int"],["t","text"],["kw","text"],["note","text"],["c1","int"],["c2","int"],["c3","int"],["m1","int"],["m2","int"],["m3","int"],["lat","real"],["lng","real"],["zoom","text"],["pnt","int"],["car","int"],["eng","int"],["hcp","int"],["map","text"],["wsc","int"],["mod","int"],["d","text"]],Area_Fish:[["ID","text"],["aid","int"],["fid","int"],["amount","int"],["comment","text"]],Product:[["ID","int"],["t","text"],["t2","text"],["no","text"],["im","text"],["pf","text"],["ai","int"],["ri","int"],["ch","int"],["price","int"],["mod","int"],["so","int"],["hl","text"]],County:[["ID","int"],["s","text"],["t","text"],["d","text"]],Municipality:[["ID","int"],["cID","int"],["name","text"]],Fish:[["ID","int"],["t","text"],["d","text"],["mod","int"],["so","int"],["max","int"],["icon","text"],["img","text"],["in","text"],["geo","text"],["size","text"],["lat","text"],["rec","text"]],Rule:[["ID","int"],["ver","int"],["d","text"],["t","text"]],User_Product:[["ID","int"],["at","int"],["code","int"],["fr","int"],["fullname","text"],["ot","text"],["ref1","int"],["ref2","int"],["t","text"],["to","int"],["pid","int"],["pdf","text"]],User_Info:[["ID","int"],["username","text"],["loggedin","text"],["IP1","text"],["IP2","text"],["name","text"],["email","text"],["created","text"]],User_Number:[["number","text"]],Technique:[["ID","int"],["t","text"],["d","text"],["so","int"],["de","text"],["da","text"],["icon","text"],["img1","text"],["img2","text"],["img3","text"],["youtube","text"]],Organization:[["ID","int"],["t","text"],["d","text"],["cp","text"],["url","text"],["co","int"],["mod","int"],["vat","int"],["dp","int"],["fva","int"],["org","int"],["ml","int"]],Poi:[["ID","int"],["orgid","int"],["type","int"],["price","int"],["t","text"],["d","text"],["la","real"],["lo","real"]],Poi_Type:[["ID","int"],["t","text"],["icon","text"]],Polygon:[["ID","int"],["orgid","int"],["t","text"],["c","text"],["ver","int"],["mod","int"],["poly","text"]]},s=function(e){for(var t=[],n=0;n<e.rows.length;++n)t.push(e.rows.item(n));return t};return{populateTable:function(e,t){return o(function(n,o){i.transaction(function(n){n.executeSql("DELETE FROM "+e+";");for(var o in t){for(var i=t[o],s=[],l=0;l<r[e].length;++l)s.push(i[r[e][l][0]]);var u=["INSERT INTO",e,"VALUES(?",",?".repeat(s.length-1),")"].join(" ");n.executeSql(u,s)}},o,n)})},cleanTable:function(e){return o(function(t,n){i.transaction(function(t){t.executeSql("DELETE FROM "+e+";")},n,t)})},clean:function(){return o(function(e,t){i.transaction(function(e){for(var t in r)e.executeSql("DROP TABLE IF EXISTS "+t+";")},t,e)}).then(function(){console.log("Removed all tables")})},init:function(){return o(function(e,t){i.transaction(function(e){for(var t in r){var n=["CREATE TABLE IF NOT EXISTS",t,"(",'"'+r[t].join('___"').split(",").join('" ').split("___").join(", "),", PRIMARY KEY(",'"'+r[t][0][0]+'"',"));"].join(" ");e.executeSql(n)}},t,e)})},getArea:function(t){return o(function(o){e.execute(i,["SELECT *","FROM Area","WHERE id = ?"].join(" "),[t]).then(function(e){var t=s(e)[0];n.get_photos(t.orgid).then(function(e){t.images=e,o(t)},function(){o(t)})})})},getAreaFishes:function(t){return o(function(n,o){e.execute(i,["SELECT *","FROM Area_Fish","JOIN Fish ON Area_Fish.fid = Fish.ID","WHERE Area_Fish.aid = ?"].join(" "),[t]).then(function(e){n(s(e))},o)})},search:function(t,n){return o(function(o,r){e.execute(i,["SELECT *","FROM Area","WHERE t LIKE ?",n?"AND c1 = ?":"","ORDER BY t"].join(" "),n?["%"+t+"%",n]:["%"+t+"%"]).then(function(e){o(s(e))},r)})},getProduct:function(t){return o(function(n,o){e.execute(i,["SELECT DISTINCT Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM Product","JOIN Rule ON Rule.ID = Product.ri","WHERE ID = ?","ORDER BY so"].join(" "),[t]).then(function(e){n(s(e))},o)})},getProductsByArea:function(t){return o(function(n,o){e.execute(i,["SELECT DISTINCT Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM Product","JOIN Rule ON Rule.ID = Product.ri","WHERE ai = ?","ORDER BY so"].join(" "),[t]).then(function(e){n(s(e))},o)})},getCounties:function(){return o(function(t,n){e.execute(i,["SELECT DISTINCT County.*","FROM County","JOIN Area ON Area.c1 = County.ID","ORDER BY County.t"].join(" ")).then(function(e){t(s(e))},n)})},getUserProducts:function(){return o(function(t,n){e.execute(i,["SELECT User_Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM User_Product","LEFT JOIN Product ON Product.ID = User_Product.pid","LEFT JOIN Rule ON Rule.ID = Product.ri"].join(" ")).then(function(e){t(s(e))},n)})},getFishes:function(){return o(function(t,n){e.execute(i,["SELECT * FROM Fish"].join(" ")).then(function(e){t(s(e))},n)})},getFish:function(t){return o(function(n,o){e.execute(i,["SELECT * FROM Fish","WHERE id = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getTechniques:function(){return o(function(t,n){e.execute(i,["SELECT * FROM Technique"].join(" ")).then(function(e){t(s(e))},n)})},getTechnique:function(t){return o(function(n,o){e.execute(i,["SELECT * FROM Technique","WHERE ID = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getOrganization:function(t){return o(function(n,o){e.execute(i,["SELECT * FROM Organization","WHERE ID = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getUserInfo:function(){return o(function(t,n){e.execute(i,["SELECT *","FROM User_Info"].join(" ")).then(function(e){t(s(e)[0])},n)})},getUserNumbers:function(){return o(function(t,n){e.execute(i,["SELECT *","FROM User_Number"].join(" ")).then(function(e){t(s(e))},n)})},getPois:function(t){return o(function(n,o){e.execute(i,["SELECT *","FROM Poi","WHERE orgid = ?"].join(" "),[t]).then(function(e){n(s(e))},o)})},getPoiTypes:function(){return o(function(t,n){e.execute(i,["SELECT *","FROM Poi_Type"].join(" ")).then(function(e){t(s(e))},n)})},getPolygons:function(t){return o(function(n,o){e.execute(i,["SELECT *","FROM Polygon","WHERE orgid = ?"].join(" "),[t]).then(function(e){n(s(e))},o)})}}}]})}(window.angular),angular.module("ifiske.filters",[]).filter("nobrs",function(){return function(e){return e.replace(/(<br>\s*)+/g,"<br>")}}),function(e){"use strict";e.module("ifiske.update",["ifiske.api","ifiske.db","ifiske.utils"]).provider("Update",function(){this.$get=["API","DB","localStorage","$q","$ionicLoading","sessionData",function(e,t,n,o,i,r){var s="last_update",l=function(){return o.all([e.get_areas().then(function(e){var n=[];for(var i in e){var r=e[i].fish;for(var s in r)n.push({ID:i+"_"+s,fid:s,aid:i,amount:r[s][0],comment:r[s][1]})}return o.all([t.populateTable("Area",e),t.populateTable("Area_Fish",n)]).then(function(){console.log("Populated Area")},function(e){return console.log(e),o.reject(e)})}),e.get_products().then(function(e){return t.populateTable("Product",e).then(function(){console.log("Populated Product")},function(e){return console.log(e),o.reject(e)})}),e.get_counties().then(function(e){return t.populateTable("County",e).then(function(){console.log("Populated County")},function(e){return console.log(e),o.reject(e)})}),e.get_municipalities().then(function(e){return t.populateTable("Municipality",e).then(function(){console.log("Populated Municipality")},function(e){return console.log(e),o.reject(e)})}),e.get_fishes().then(function(e){return t.populateTable("Fish",e).then(function(){console.log("Populated Fish")},function(e){return console.log(e),o.reject(e)})}),e.get_rules().then(function(e){return t.populateTable("Rule",e).then(function(){console.log("Populated Rule")},function(e){return console.log(e),o.reject(e)})}),e.get_techniques().then(function(e){return t.populateTable("Technique",e).then(function(){console.log("Populated Technique")},function(e){return console.log(e),o.reject(e)})}),e.get_organizations().then(function(e){return t.populateTable("Organization",e).then(function(){console.log("Populated Organization")},function(e){return console.log(e),o.reject(e)})}),e.get_map_pois().then(function(e){return t.populateTable("Poi",e).then(function(){console.log("Populated Poi")},function(e){return console.log(e),o.reject(e)})}),e.get_map_poi_types().then(function(e){return t.populateTable("Poi_Type",e).then(function(){console.log("Populated Poi_Type")},function(e){return console.log(e),o.reject(e)})}),e.get_map_polygons().then(function(e){return t.populateTable("Polygon",e).then(function(){console.log("Populated Polygon")},function(e){return console.log(e),o.reject(e)})})])},u=function(){return o.all([e.user_products().then(function(e){return console.log(e),t.populateTable("User_Product",e).then(function(){console.log("Populated User_Product")},function(e){return console.log(e),o.reject(e)})}),e.user_info().then(function(e){for(var n=e.numbers,i=[],r=0;r<n.length;++r)i.push({number:n[r]});return o.all([t.populateTable("User_Info",[e]).then(function(){console.log("Populated User_Info")},function(t){return console.log(e),console.log(t),o.reject(t)}),t.populateTable("User_Number",i).then(function(){console.log("Populated User_Numbers")},function(e){return console.log(e),o.reject(e)})])})])},a=function(){return o.all([t.cleanTable("User_Product"),t.cleanTable("User_Number"),t.cleanTable("User_Info")]).then(function(){console.log("Removed user info from database")},function(e){console.log("Could not remove user data from database!",e)})},c=function(c){i.show();var f=Date.now(),m=0;c||(m=n.get(s));var p=6048e5;f-m>p?(t.init().then(function(){return console.log("Initialized DB system"),r.token?o.all([u(),l()]):l()}).then(function(){console.log("Populated all the things"),n.set(s,f),i.hide()},function(o){return 7!==o.error_code?(console.warn("Got an error, will try to recreate all tables: ",o),t.clean().then(function(){return t.init()}).then(function(){return l()}).then(function(){console.log("Populated all the things"),n.set(s,f),i.hide()},function(e){console.log("Still error, handle it!",e),i.hide()})):(a(),e.user_logout(),i.hide(),void 0)}),e.get_terms_of_service().then(function(e){n.set("tos",e)}),e.get_sms_terms().then(function(e){n.set("sms_terms",e)}),e.get_contact_info().then(function(e){n.set("contactInfo",e)})):r.token?t.init().then(function(){console.log("Initialized DB system"),r.token&&u().then(function(){i.hide()},function(){i.hide()}),i.hide()}):(console.log("no_update"),i.hide())};return{update:function(){c()},forcedUpdate:function(){c(!0)},user_logout:function(){a(),e.user_logout()},user_login:function(t,n){return e.user_login(t,n).then(function(){c()})},last_update:function(){return n.get(s)}}}]})}(window.angular),angular.module("ifiske.utils",[]).factory("localStorage",["$window",function(e){return{set:function(t,n){e.localStorage.setItem(t,n)},get:function(t){return e.localStorage.getItem(t)},remove:function(t){e.localStorage.removeItem(t)}}}]).service("sessionData",["localStorage",function(e){this.token=e.get("session"),this.setToken=function(t){e.set("session",t),this.token=t,console.log("token set")},this.deleteToken=function(){e.remove("session"),this.token=null,console.log("token unset")}}]),angular.module("ngCordovaSms",[]).directive("ngCordovaSms",["$cordovaSms","$ionicPopup",function(e,t){"use strict";return{restrict:"A",link:function(n,o,i){o.on("click",function(n){n.preventDefault(),t.prompt({title:"Skriv in ditt namn",inputType:"text"}).then(function(t){var n="FISKA "+i.ngCordovaSms+" "+t;e.send("72456",n,"INTENT",function(){console.log("succuess")},function(e){console.log(e)})})})}}}]),angular.module("ifiske.directives").directive("ifiskeInput",function(){return{restrict:"E",transclude:!0,scope:{name:"@",id:"@",label:"@",placeholder:"@",type:"@",ngPattern:"@",ngModel:"=?"},templateUrl:"directives/input_field/ifiske_input.html",controller:function(e){e.id=e.id||e.name,e.type=e.type||"text"}}}),angular.module("systemBrowser",[]).directive("systemBrowser",["$cordovaInAppBrowser",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("click",function(t){e.open(n[0].href,"_system"),t.preventDefault()})}}}]).directive("globalSystemBrowser",["$cordovaInAppBrowser",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("click",function(t){t.target.href&&t.target.host!==window.location.host&&(e.open(t.target.href,"_system"),t.preventDefault())})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0L2Fib3V0X2NvbnRyb2xsZXIuanMiLCJhcmVhL2FyZWFfY29udHJvbGxlci5qcyIsImFyZWFfbGlzdC9hcmVhX2xpc3RfY29udHJvbGxlci5qcyIsImNvbnRhY3QvY29udGFjdF9jb250cm9sbGVyLmpzIiwiY291bnRpZXMvY291bnRpZXNfY29udHJvbGxlci5qcyIsImZpc2hfZGV0YWlsL2Zpc2hfZGV0YWlsX2NvbnRyb2xsZXIuanMiLCJmaXNoZXMvZmlzaGVzX2NvbnRyb2xsZXIuanMiLCJob21lL2hvbWVfY29udHJvbGxlci5qcyIsImxlZ2FsL2xlZ2FsX2NvbnRyb2xsZXIuanMiLCJsb2dpbi9sb2dpbl9jb250cm9sbGVyLmpzIiwibWFwL21hcF9jb250cm9sbGVyLmpzIiwibWVudS9tZW51X2NvbnRyb2xsZXIuanMiLCJyZWdpc3Rlci9yZWdpc3Rlcl9jb250cm9sbGVyLmpzIiwidGVjaG5pcXVlX2RldGFpbC90ZWNobmlxdWVfZGV0YWlsX2NvbnRyb2xsZXIuanMiLCJ0ZWNobmlxdWVzL3RlY2huaXF1ZXNfY29udHJvbGxlci5qcyIsInVzZXIvdXNlcl9jb250cm9sbGVyLmpzIiwidXNlcl9jYXJkcy91c2VyX2NhcmRzX2NvbnRyb2xsZXIuanMiLCJhcGkuanMiLCJkYi5qcyIsImZpbHRlci5qcyIsInVwZGF0ZS5qcyIsInV0aWxzLmpzIiwiaWZpc2tlX3Ntcy9pZmlza2Vfc21zLmpzIiwiaW5wdXRfZmllbGQvaWZpc2tlX2lucHV0LmpzIiwic3lzdGVtX2Jyb3dzZXIvc3lzdGVtX2Jyb3dzZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidGVtcGxhdGUiLCJydW4iLCIkaW9uaWNQbGF0Zm9ybSIsIlVwZGF0ZSIsIkltZ0NhY2hlIiwicmVhZHkiLCJ3aW5kb3ciLCJpb25pYyIsIktleWJvYXJkIiwiaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyIiwiU3RhdHVzQmFyIiwic3R5bGVEZWZhdWx0IiwiJGluaXQiLCJ1cGRhdGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRpb25pY0NvbmZpZ1Byb3ZpZGVyIiwiSW1nQ2FjaGVQcm92aWRlciIsInNldE9wdGlvbnMiLCJkZWJ1ZyIsInVzZVBlcnNpc3RlbnRDYWNoZSIsIm1hbnVhbEluaXQiLCJ2aWV3cyIsImZvcndhcmRDYWNoZSIsImJhY2tCdXR0b24iLCJwcmV2aW91c1RpdGxlVGV4dCIsInRleHQiLCJ0YWJzIiwicG9zaXRpb24iLCJkZWZhdWx0VXJsIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwiYWJzdHJhY3QiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJwYXJhbXMiLCJpZCIsImNvdW50eSIsInNlYXJjaCIsImZpc2giLCJ0ZWNoIiwibWFwIiwiaW5mbyIsImZpc2hpbmZvIiwiY2FyZHMiLCIkc2NvcGUiLCIkY29yZG92YUFwcFZlcnNpb24iLCJ2ZXJzaW9uIiwiZGJEYXRlIiwiY29yZG92YSIsImdldEFwcFZlcnNpb24iLCJ0aGVuIiwiY29uc29sZSIsImxvZyIsIiRpb25pY0hpc3RvcnkiLCIkcm9vdFNjb3BlIiwiJGlvbmljVmlld1N3aXRjaGVyIiwiJHN0YXRlUGFyYW1zIiwiREIiLCIkaW9uaWNTbGlkZUJveERlbGVnYXRlIiwiJGlvbmljTW9kYWwiLCIkc3RhdGUiLCJjZW50ZXIiLCJpbWFnZV9lbmRwb2ludCIsInRhYnNCYWNrIiwidmlld0hpc3RvcnkiLCJjdXJyZW50VmlldyIsImluZGV4IiwiJGlvbmljR29CYWNrIiwibmV4dERpcmVjdGlvbiIsIiRlbWl0IiwiaGlzdG9yeUlkIiwiZ2V0IiwiJG9uIiwiJGN1cnJlbnQiLCJsb2NhbHMiLCJpY29ucyIsImdldEFyZWEiLCJhcmVhIiwibGF0IiwibG5nIiwiem9vbSIsIk51bWJlciIsImltYWdlcyIsImdldE9yZ2FuaXphdGlvbiIsIm9yZ2lkIiwib3JnIiwiZ2V0UG9pVHlwZXMiLCJwb2lfdHlwZXMiLCJpIiwibGVuZ3RoIiwidHlwZSIsIklEIiwiaWNvblVybCIsImljb24iLCJpY29uQW5jaG9yIiwiZ2V0UG9pcyIsInBvaXMiLCJtYXJrZXJzIiwicG9pIiwibGF5ZXIiLCJsYSIsImxvIiwibWVzc2FnZSIsInQiLCJlcnIiLCJlcnJvciIsImdldFBvbHlnb25zIiwicG9seWdvbnMiLCJwYXRocyIsInBvbHkiLCJsYXRsbmdzIiwiSlNPTiIsInBhcnNlIiwiY29sb3IiLCJjIiwid2VpZ2h0Iiwib3BhY2l0eSIsImZpbGxDb2xvciIsImdldEFyZWFGaXNoZXMiLCJmaXNoZXMiLCJnZXRQcm9kdWN0c0J5QXJlYSIsInByb2R1Y3RzIiwic29ydG9yZGVyIiwic21zdGVybXMiLCJwcmVkaWNhdGUiLCJmcm9tVGVtcGxhdGVVcmwiLCJzY29wZSIsImFuaW1hdGlvbiIsIm1vZGFsIiwic21zX21vZGFsIiwib3Blbk1vZGFsIiwicHJvZHVjdCIsInNob3ciLCJjbG9zZU1vZGFsIiwiaGlkZSIsInNob3dUZXJtcyIsInNob3dpbmd0ZXJtcyIsInJ1bGVzX21vZGFsIiwib3BlblJ1bGVzTW9kYWwiLCJjbG9zZVJ1bGVzTW9kYWwiLCJyZW1vdmUiLCJleHRlbmQiLCJsYXllcnMiLCJiYXNlbGF5ZXJzIiwibWFwYm94IiwibmFtZSIsImxheWVyT3B0aW9ucyIsIm1hcHR5cGUiLCJhcGlrZXkiLCJvdmVybGF5cyIsInZpc2libGUiLCJkaXNhYmxlQ2x1c3RlcmluZ0F0Wm9vbSIsImNodW5rZWRMb2FkaW5nIiwic2hvd0NvdmVyYWdlT25Ib3ZlciIsInJlbW92ZU91dHNpZGVWaXNpYmxlQm91bmRzIiwiJGlvbmljU2Nyb2xsRGVsZWdhdGUiLCJjb3B5IiwiZGF0YSIsImFyZWFzIiwiY2xlYXJTZWFyY2giLCJzY3JvbGxUb3AiLCJjb250YWN0SW5mbyIsImdldENvdW50aWVzIiwiY291bnRpZXMiLCJnZXRGaXNoIiwiZ2V0RmlzaGVzIiwiZGVmYXVsdF9pbWciLCJpbWciLCJzZXNzaW9uRGF0YSIsImxvZ2dlZEluIiwic2V0IiwiY3VycmVudEhpc3RvcnlJZCIsIm15RnVuYyIsIiRldmVudCIsImtleUNvZGUiLCJzaGlmdEtleSIsImdvIiwic3JjRWxlbWVudCIsInZhbHVlIiwidG9zIiwiJGlvbmljTG9hZGluZyIsInNpZ25JbiIsImxvZ2luRm9ybSIsInVzZXJfbG9naW4iLCJ1c2VybmFtZSIsIiR2aWV3VmFsdWUiLCJwYXNzd29yZCIsIiRzZXRWYWxpZGl0eSIsInJlc3BvbnNlIiwibGVhZmxldERhdGEiLCJ0ZXN0IiwiYSIsImdldE1lc3NhZ2VTY29wZSIsIm5ld19zY29wZSIsIiRuZXciLCJmaXNoYXJlYXMiLCIkaW9uaWNQb3BvdmVyIiwicG9wb3ZlciIsInVzZXJpbmZvIiwibG9nb3V0IiwidXNlcl9sb2dvdXQiLCJsb2dpbiIsInJlZ2lzdGVyIiwiZm9yY2VkVXBkYXRlIiwiQVBJIiwiY2hlY2tVc2VybmFtZSIsImlucHV0IiwidXNlcl9leGlzdHMiLCJjaGVja0VtYWlsIiwiZm9ybUVycm9ycyIsImZvcm0iLCJwaG9uZSIsImZ1bGxuYW1lIiwiZW1haWwiLCJ1c2VyX3JlZ2lzdGVyIiwicmVnaXN0cmF0aW9uRXJyb3IiLCJlcnJvcl9jb2RlIiwidmVyaWZ5IiwidmVyY29kZSIsInVzZXJfY29uZmlybSIsImV1bGEiLCJzaG93RXVsYSIsImNsb3NlRXVsYSIsImltZzEiLCJpbWcyIiwiaW1nMyIsImZpbHRlciIsImVsIiwiZ2V0VGVjaG5pcXVlIiwiZ2V0VGVjaG5pcXVlcyIsInRlY2huaXF1ZXMiLCJnZXRVc2VySW5mbyIsInVzZXIiLCJnZXRVc2VyTnVtYmVycyIsIm51bWJlcnMiLCJwcmVkIiwiZW5kcG9pbnQiLCJub3ciLCJEYXRlIiwiZ2V0VXNlclByb2R1Y3RzIiwicHJvdmlkZXIiLCJ0aGlzIiwiYmFzZV91cmwiLCIkZ2V0IiwiJGh0dHAiLCIkcSIsImFwaV9jYWxsIiwiZnVsZmlsbCIsInJlamVjdCIsIm1ldGhvZCIsImtleSIsInRpbWVvdXQiLCJjYWNoZSIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJFcnJvciIsInNlc3Npb25fYXBpX2NhbGwiLCJzZXNzaW9uIiwidG9rZW4iLCJzIiwiZ2V0X211bmljaXBhbGl0aWVzIiwibSIsImdldF9jb3VudGllcyIsImFyZ3MiLCJwaW4iLCJ1c2VyX2luZm8iLCJzZXRUb2tlbiIsImRlbGV0ZVRva2VuIiwidXNlcl9wcm9kdWN0cyIsImdldF9maXNoZXMiLCJnZXRfdGVjaG5pcXVlcyIsImdldF9iYWl0cyIsImdldF9vcmdhbml6YXRpb25zIiwiZ2V0X29yZ19tb2RpZmllZCIsImdldF9hcmVhcyIsImFyZWFpZCIsImdldF9hcmVhc19tb2RpZmllZCIsImdldF9wcm9kdWN0cyIsImdldF9ydWxlcyIsInJ1bGVpZCIsImdldF9waG90b3MiLCJnZXRfbWFwX3BvaXMiLCJnZXRfbWFwX3BvaV90eXBlcyIsImdldF9tYXBfcG9seWdvbnMiLCJ1c2VyX2dldF9mYXZvcml0ZXMiLCJnZXRfdGVybXNfb2Zfc2VydmljZSIsImdldF9jb250YWN0X2luZm8iLCJnZXRfZW5naW5lX3BvbGljaWVzIiwiZ2V0X3Ntc190ZXJtcyIsInVuZGVmaW5lZCIsIiRjb3Jkb3ZhU1FMaXRlIiwiZGIiLCJzcWxpdGVQbHVnaW4iLCJvcGVuREIiLCJvcGVuRGF0YWJhc2UiLCJ0YWJsZURlZiIsIkFyZWEiLCJBcmVhX0Zpc2giLCJQcm9kdWN0IiwiQ291bnR5IiwiTXVuaWNpcGFsaXR5IiwiRmlzaCIsIlJ1bGUiLCJVc2VyX1Byb2R1Y3QiLCJVc2VyX0luZm8iLCJVc2VyX051bWJlciIsIlRlY2huaXF1ZSIsIk9yZ2FuaXphdGlvbiIsIlBvaSIsIlBvaV9UeXBlIiwiUG9seWdvbiIsImNyZWF0ZU9iamVjdCIsInJldHZhbCIsInJvd3MiLCJwdXNoIiwiaXRlbSIsInBvcHVsYXRlVGFibGUiLCJ0YWJsZSIsInRyYW5zYWN0aW9uIiwidHgiLCJleGVjdXRlU3FsIiwic2luZ2xlRGF0YSIsImluc2VydERhdGEiLCJxdWVyeSIsInJlcGVhdCIsImpvaW4iLCJjbGVhblRhYmxlIiwiY2xlYW4iLCJpbml0Iiwic3BsaXQiLCJleGVjdXRlIiwib2JqZWN0IiwiYWlkIiwic2VhcmNoc3RyaW5nIiwiY291bnR5X2lkIiwiZ2V0UHJvZHVjdCIsInByb2R1Y3RfaWQiLCJhcmVhX2lkIiwicmVwbGFjZSIsIkxBU1RfVVBEQVRFIiwicG9wdWxhdGUiLCJhbGwiLCJmaXNoQXJyIiwiZmlzaEtleSIsImZpZCIsImFtb3VudCIsImNvbW1lbnQiLCJwb3B1bGF0ZVVzZXIiLCJudW1BcnIiLCJudW1iZXIiLCJjbGVhblVzZXIiLCJ1cGRhdGVGdW5jIiwiZm9yY2VkIiwiY3VycmVudFRpbWUiLCJsYXN0VXBkYXRlIiwiYVdlZWsiLCJ3YXJuIiwidGVybXMiLCJsYXN0X3VwZGF0ZSIsImZhY3RvcnkiLCIkd2luZG93Iiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJzZXJ2aWNlIiwiZGlyZWN0aXZlIiwiJGNvcmRvdmFTbXMiLCIkaW9uaWNQb3B1cCIsInJlc3RyaWN0IiwibGluayIsImF0dHJzIiwib24iLCJlIiwicHJldmVudERlZmF1bHQiLCJwcm9tcHQiLCJ0aXRsZSIsImlucHV0VHlwZSIsIm5nQ29yZG92YVNtcyIsInNlbmQiLCJ0cmFuc2NsdWRlIiwibGFiZWwiLCJwbGFjZWhvbGRlciIsIm5nUGF0dGVybiIsIm5nTW9kZWwiLCIkY29yZG92YUluQXBwQnJvd3NlciIsIm9wZW4iLCJocmVmIiwidGFyZ2V0IiwiaG9zdCIsImxvY2F0aW9uIl0sIm1hcHBpbmdzIjoiQUFLQUEsUUFBQUMsT0FBQSxVQUNBLFFBQ0EscUJBQ0Esb0JBQ0EsYUFDQSxZQUNBLGVBQ0EsZ0JBQ0EsaUJBQ0EseUJBQ0EsWUFDQSxnQkFDQSxlQUNBLGFBQ0EsV0FDQSxzQkFFQUMsU0FBQSx1QkFDQUMsU0FBQSxnQ0FHQUMsS0FBQSxpQkFBQSxTQUFBLFdBQUEsU0FBQUMsRUFBQUMsRUFBQUMsR0FDQUYsRUFBQUcsTUFBQSxXQUdBQyxPQUFBQyxPQUFBRCxPQUFBQyxNQUFBQyxVQUNBRixPQUFBQyxNQUFBQyxT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U0FDQSxLQUFBLFNBQ0EsTUFBQSxTQUNBLE9BQUEsU0FDQSxNQUFBLFNBQ0EsTUFBQSxTQUVBQyxPQUNBLEtBQUEsUUFDQSxNQUFBLFFBQ0EsSUFBQSxTQUNBLElBQUEsU0FFQUMsZUFDQSxLQUFBLFFBQ0EsS0FBQSxRQUNBLE9BQUEsUUFDQSxLQUFBLFFBQ0EsV0FBQSxTQUNBLEtBQUEsU0FDQSxPQUFBLFFBQ0EsT0FBQSxRQUNBLElBQUEsU0FDQSxLQUFBLFFBQ0EsTUFBQSxRQUNBLE1BQUEsU0FFQUMsWUFDQSxLQUFBLFFBQ0EsV0FBQSxTQUNBLFdBQUEsU0FDQSxNQUFBLFNBQ0EsTUFBQSxTQUNBLE9BQUEsU0FDQSxRQUFBLFNBQ0EsVUFBQSxTQUVBQyxjQUNBLFNBQUEsU0FFQUMsWUFDQSxLQUFBLFFBQ0EsSUFBQSxTQUNBLElBQUEsU0FDQSxLQUFBLFFBQ0EsS0FBQSxTQUNBLEtBQUEsU0FDQSxPQUFBLFNBQ0EsT0FBQSxTQUNBLE9BQUEsU0FDQSxPQUFBLFNBQ0EsVUFBQSxTQUVBQyxlQUNBLEtBQUEsUUFDQSxJQUFBLFNBQ0EsSUFBQSxTQUNBLEtBQUEsU0FDQSxNQUFBLFNBQ0EsS0FBQSxRQUNBLE1BQUEsUUFDQSxNQUFBLFFBQ0EsS0FBQSxRQUNBLE1BQUEsUUFDQSxNQUFBLFFBQ0EsS0FBQSxRQUVBQyxNQUNBLEtBQUEsUUFDQSxRQUFBLFFBQ0EsT0FBQSxRQUNBLFFBQUEsUUFDQSxJQUFBLFNBQ0EsSUFBQSxTQUNBLEtBQUEsU0FDQSxLQUFBLFNBRUFDLFdBQ0EsS0FBQSxRQUNBLElBQUEsU0FDQSxPQUFBLFNBRUFDLFVBQ0EsS0FBQSxRQUNBLFFBQUEsUUFDQSxJQUFBLFNBQ0EsSUFBQSxTQUNBLE1BQUEsUUFDQSxNQUFBLFFBQ0EsT0FBQSxVQUtBQyxFQUFBLFNBQUExSixHQUVBLElBQUEsR0FEQTJKLE1BQ0FoTyxFQUFBLEVBQUFBLEVBQUFxRSxFQUFBNEosS0FBQWhPLFNBQUFELEVBQ0FnTyxFQUFBRSxLQUFBN0osRUFBQTRKLEtBQUFFLEtBQUFuTyxHQUVBLE9BQUFnTyxHQUtB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LFlBQ0EsUUFDQWhCLFNBQUEsSUFDQUMsS0FBQSxTQUFBbFAsRUFBQXFHLEdBQ0FBLEVBQUErSSxHQUFBLFFBQUEsU0FBQUMsR0FDQUEsRUFBQWUsT0FBQUQsTUFBQWQsRUFBQWUsT0FBQUMsT0FBQWxZLE9BQUFtWSxTQUFBRCxPQUNBSixFQUFBQyxLQUFBYixFQUFBZSxPQUFBRCxLQUFBLFdBQ0FkLEVBQUFDIiwiZmlsZSI6ImFsbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBhbmd1bGFyLm1vZHVsZSBpcyBhIGdsb2JhbCBwbGFjZSBmb3IgY3JlYXRpbmcsIHJlZ2lzdGVyaW5nIGFuZCByZXRyaWV2aW5nIEFuZ3VsYXIgbW9kdWxlc1xuLy8gJ2lmaXNrZScgaXMgdGhlIG5hbWUgb2YgdGhpcyBhbmd1bGFyIG1vZHVsZSBleGFtcGxlIChhbHNvIHNldCBpbiBhIDxib2R5PiBhdHRyaWJ1dGUgaW4gaW5kZXguaHRtbClcbi8vIHRoZSAybmQgcGFyYW1ldGVyIGlzIGFuIGFycmF5IG9mICdyZXF1aXJlcydcbi8vICdpZmlza2UuY29udHJvbGxlcnMnIGlzIGZvdW5kIGluIGNvbnRyb2xsZXJzLmpzXG5cbmFuZ3VsYXIubW9kdWxlKCdpZmlza2UnLCBbXG4gICAgJ2lvbmljJyxcbiAgICAnaWZpc2tlLmNvbnRyb2xsZXJzJyxcbiAgICAnaWZpc2tlLmRpcmVjdGl2ZXMnLFxuICAgICdpZmlza2UuYXBpJyxcbiAgICAnaWZpc2tlLmRiJyxcbiAgICAnaWZpc2tlLnV0aWxzJyxcbiAgICAnaWZpc2tlLnVwZGF0ZScsXG4gICAgJ2lmaXNrZS5maWx0ZXJzJyxcbiAgICAnaW9uaWMuaW9uLmhlYWRlclNocmluaycsXG4gICAgJ25nQ29yZG92YScsXG4gICAgJ3N5c3RlbUJyb3dzZXInLFxuICAgICduZ0NvcmRvdmFTbXMnLFxuICAgICduZ01lc3NhZ2VzJyxcbiAgICAnSW1nQ2FjaGUnLFxuICAgICdsZWFmbGV0LWRpcmVjdGl2ZSdcbl0pXG4uY29uc3RhbnQoJyRpb25pY0xvYWRpbmdDb25maWcnLCB7XG4gICAgdGVtcGxhdGU6ICc8aW9uLXNwaW5uZXI+PC9pb24tc3Bpbm5lcj4nXG4gICAgLy8gaGlkZU9uU3RhdGVDaGFuZ2U6IHRydWVcbn0pXG4ucnVuKFsnJGlvbmljUGxhdGZvcm0nLCAnVXBkYXRlJywgJ0ltZ0NhY2hlJywgZnVuY3Rpb24oJGlvbmljUGxhdGZvcm0sIFVwZGF0ZSwgSW1nQ2FjaGUpIHtcbiAgICAkaW9uaWNQbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gSGlkZSB0aGUgYWNjZXNzb3J5IGJhciBieSBkZWZhdWx0IChyZW1vdmUgdGhpcyB0byBzaG93IHRoZSBhY2Nlc3NvcnkgYmFyIGFib3ZlIHRoZSBrZXlib2FyZFxuICAgICAgICAvLyBmb3IgZm9ybSBpbnB1dHMpXG4gICAgICAgIGlmKHdpbmRvdy5pb25pYyAmJiB3aW5kb3cuaW9uaWMuS2V5Ym9hcmQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5pb25pYy5LZXlib2FyZC5oaWRlS2V5Ym9hcmRBY2Nlc3NvcnlCYXIodHJ1ZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYod2luZG93LlN0YXR1c0Jhcikge1xuICAgICAgICAgICAgLy8gb3JnLmFwYWNoZS5jb3Jkb3ZhLnN0YXR1c2JhciByZXF1aXJlZFxuICAgICAgICAgICAgU3RhdHVzQmFyLnN0eWxlRGVmYXVsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgSW1nQ2FjaGUuJGluaXQoKTtcbiAgICAgICAgVXBkYXRlLnVwZGF0ZSgpO1xuICAgIH0pO1xufV0pXG5cbi5jb25maWcoWyckc3RhdGVQcm92aWRlcicsICckdXJsUm91dGVyUHJvdmlkZXInLCAnJGlvbmljQ29uZmlnUHJvdmlkZXInLCAnSW1nQ2FjaGVQcm92aWRlcicsIGZ1bmN0aW9uKCRzdGF0ZVByb3ZpZGVyLCAkdXJsUm91dGVyUHJvdmlkZXIsICRpb25pY0NvbmZpZ1Byb3ZpZGVyLCBJbWdDYWNoZVByb3ZpZGVyKSB7XG5cbiAgICBJbWdDYWNoZVByb3ZpZGVyLnNldE9wdGlvbnMoe1xuICAgICAgICBkZWJ1ZzogdHJ1ZSxcbiAgICAgICAgdXNlUGVyc2lzdGVudENhY2hlOiB0cnVlXG4gICAgfSk7XG4gICAgSW1nQ2FjaGVQcm92aWRlci5tYW51YWxJbml0ID0gdHJ1ZTtcblxuXG5cbiAgICAvLyBDYWNoZSB2aWV3cyBpbiB0aGUgZm9yd2FyZCBzdGFja1xuICAgICRpb25pY0NvbmZpZ1Byb3ZpZGVyLnZpZXdzLmZvcndhcmRDYWNoZSh0cnVlKTtcblxuICAgIC8vIENsZWFyIGJhY2sgYnV0dG9uIGRlZmF1bHQgdGV4dFxuICAgICRpb25pY0NvbmZpZ1Byb3ZpZGVyLmJhY2tCdXR0b24ucHJldmlvdXNUaXRsZVRleHQoZmFsc2UpLnRleHQoJycpO1xuXG4gICAgLy8gVGFicyBwb3NpdGlvblxuICAgICRpb25pY0NvbmZpZ1Byb3ZpZGVyLnRhYnMucG9zaXRpb24oJ2JvdHRvbScpO1xuXG4gICAgLyoqXG4gICAgICogSW9uaWMgdXNlcyBBbmd1bGFyVUkgUm91dGVyLiBMZWFybiBtb3JlIGhlcmU6XG4gICAgICogaHR0cHM6Ly9naXRodWIuY29tL2FuZ3VsYXItdWkvdWktcm91dGVyXG4gICAgICovXG5cbiAgICB2YXIgZGVmYXVsdFVybCA9ICcvc3RhcnQvbG9naW4nO1xuICAgIGlmICh3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oJ3Nlc3Npb24nKSkge1xuICAgICAgICBkZWZhdWx0VXJsID0gJy9tZW51L2hvbWUnO1xuICAgIH1cbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKGRlZmF1bHRVcmwpO1xuXG5cblxuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgLy8gQWJzdHJhY3QgcHJlLW1lbnUgc3RhdGUuIE5lZWRlZCBmb3IgbmF2aWdhdGlvbiBiZXR3ZWVuIGxvZ2luIGFuZCByZWdpc3RlciB2aWV3cy5cbiAgICAuc3RhdGUoJ3N0YXJ0Jywge1xuICAgICAgICB1cmw6ICcvc3RhcnQnLFxuICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL3N0YXJ0L3N0YXJ0Lmh0bWwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ3N0YXJ0LmxvZ2luJywge1xuICAgICAgICB1cmw6ICcvbG9naW4nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvbG9naW4vbG9naW4uaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ3N0YXJ0LnJlZ2lzdGVyJywge1xuICAgICAgICB1cmw6ICcvcmVnaXN0ZXInLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvcmVnaXN0ZXIvcmVnaXN0ZXIuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdSZWdpc3RlckN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ3N0YXJ0LnJlZ2lzdGVyLmRldGFpbHMnLCB7XG4gICAgICAgIHVybDogJy9kZXRhaWxzJyxcblx0dGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL3JlZ2lzdGVyL3JlZ2lzdGVyX2RldGFpbHMuaHRtbCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnc3RhcnQucmVnaXN0ZXIudmVyaWZ5Jywge1xuICAgICAgICB1cmw6ICcvdmVyaWZ5JyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL3JlZ2lzdGVyL3JlZ2lzdGVyX3ZlcmlmeS5odG1sJ1xuICAgIH0pXG5cbiAgICAvLyBBYnN0cmFjdCBtZW51IHN0YXRlLiBcIlJvb3RcIiBzdGF0ZSBvbmNlIHdlJ3JlIHBhc3QgdGhlIGxvZ2luIHN0YXRlLlxuICAgIC5zdGF0ZSgnbWVudScsIHtcbiAgICAgICAgdXJsOiAnL21lbnUnLFxuICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL21lbnUvbWVudS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ01lbnVDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmhvbWUnLCB7XG4gICAgICAgIHVybDogJy9ob21lJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2hvbWUvaG9tZS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0hvbWVDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmluZm8nLCB7XG4gICAgICAgIHVybDogJy9pbmZvJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2luZm8vaW5mby5odG1sJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmJ1Z3MnLCB7XG4gICAgICAgIHVybDogJy9pbmZvJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL21lbnUvcmVwb3J0Lmh0bWwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuY29udGFjdCcsIHtcbiAgICAgICAgdXJsOiAnL2NvbnRhY3QnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvY29udGFjdC9jb250YWN0Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnQ29udGFjdEN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUubGVnYWwnLCB7XG4gICAgICAgIHVybDogJy9sZWdhbCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9sZWdhbC9sZWdhbC5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xlZ2FsQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5hYm91dCcsIHtcbiAgICAgICAgdXJsOiAnL2Fib3V0JyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2Fib3V0L2Fib3V0Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnQWJvdXRDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LnVzZXJpbmZvJywge1xuICAgICAgICB1cmw6ICcvdXNlcmluZm8nLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckN0cmwnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvdXNlci91c2VyLmh0bWwnLFxuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmNvdW50aWVzJywge1xuICAgICAgICB1cmw6ICcvY291bnRpZXMnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvY291bnRpZXMvY291bnRpZXMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb3VudGllc0N0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuYXJlYXMnLCB7XG4gICAgICAgIHVybDogJy9hcmVhcycsXG4gICAgICAgIHBhcmFtczogeydpZCc6IGZhbHNlLCAnY291bnR5JzogZmFsc2UsICdzZWFyY2gnOiAnJ30sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9hcmVhX2xpc3QvYXJlYV9saXN0Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnQXJlYXNDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmNhcmRzJywge1xuICAgICAgICB1cmw6ICcvY2FyZHMnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvdXNlcl9jYXJkcy91c2VyX2NhcmRzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnVXNlckNhcmRzQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5mYXZvcml0ZXMnLCB7XG4gICAgICAgIHVybDogJy9mYXZvcml0ZXMnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvZmF2b3JpdGVzL2Zhdm9yaXRlcy5odG1sJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmZpc2hlcycsIHtcbiAgICAgICAgdXJsOiAnL2Zpc2hlcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9maXNoZXMvZmlzaGVzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnRmlzaGVzQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5maXNoZGV0YWlsJywge1xuICAgICAgICB1cmw6ICcvZmlzaGRldGFpbC86aWQnLFxuICAgICAgICBwYXJhbXM6IHsnaWQnOiBmYWxzZSwgJ2Zpc2gnOiBmYWxzZX0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9maXNoX2RldGFpbC9maXNoX2RldGFpbC5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0Zpc2hEZXRhaWxDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51Lm1hcCcsIHtcbiAgICAgICAgdXJsOiAnL21hcCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9tYXAvbWFwLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTWFwQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS50ZWNobmlxdWVzJywge1xuICAgICAgICB1cmw6ICcvdGVjaG5pcXVlcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy90ZWNobmlxdWVzL3RlY2huaXF1ZXMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdUZWNobmlxdWVzQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS50ZWNobmlxdWVkZXRhaWwnLCB7XG4gICAgICAgIHVybDogJy90ZWNobmlxdWVkZXRhaWwvOmlkJyxcbiAgICAgICAgcGFyYW1zOiB7J2lkJzogZmFsc2UsICd0ZWNoJzogZmFsc2V9LFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvdGVjaG5pcXVlX2RldGFpbC90ZWNobmlxdWVfZGV0YWlsLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnVGVjaG5pcXVlRGV0YWlsQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5yZXBvcnQnLCB7XG4gICAgICAgIHVybDogJy9yZXBvcnQnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvcmVwb3J0L3JlcG9ydC5odG1sJ1xuICAgIH0pXG5cbiAgICAuc3RhdGUoJ2FyZWEnLCB7XG4gICAgICAgIGFic3RyYWN0OnRydWUsXG4gICAgICAgIHVybDogJy9hcmVhLzppZCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9hcmVhL2FyZWEuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcmVhQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnYXJlYS5tYXAnLCB7XG4gICAgICAgIHVybDogJy9tYXAnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ21hcCc6IHtcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvYXJlYS9tYXAuaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdhcmVhLmluZm8nLCB7XG4gICAgICAgIHVybDogJy9pbmZvJyxcbiAgICAgICAgdmlld3M6IHtcbiAgICAgICAgICAgICdpbmZvJzoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9hcmVhL2luZm8uaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdhcmVhLmZpc2hpbmZvJywge1xuICAgICAgICB1cmw6ICcvZmlzaGluZm8nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ2Zpc2hpbmZvJzoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9hcmVhL2Zpc2guaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pXG4gICAgLnN0YXRlKCdhcmVhLmNhcmRzJywge1xuICAgICAgICB1cmw6ICcvY2FyZHMnLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ2NhcmRzJzoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9hcmVhL2NhcmRzLmh0bWwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbn1dKTtcblxuYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycsIFtdKTtcbmFuZ3VsYXIubW9kdWxlKCdpZmlza2UuZGlyZWN0aXZlcycsIFtdKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuICAgIC5jb250cm9sbGVyKCdBYm91dEN0cmwnLCBbJyRzY29wZScsJyRjb3Jkb3ZhQXBwVmVyc2lvbicsICckaW9uaWNQbGF0Zm9ybScsICdVcGRhdGUnLCBmdW5jdGlvbigkc2NvcGUsICRjb3Jkb3ZhQXBwVmVyc2lvbiwgJGlvbmljUGxhdGZvcm0sIFVwZGF0ZSkge1xuXHQkc2NvcGUudmVyc2lvbiA9ICRzY29wZS5kYkRhdGUgPSAnT2vDpG50JztcbiAgICAkc2NvcGUudXBkYXRlID0gVXBkYXRlO1xuXG5cdCRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHQgICAgaWYgKHdpbmRvdy5jb3Jkb3ZhKSB7XG5cdFx0JGNvcmRvdmFBcHBWZXJzaW9uLmdldEFwcFZlcnNpb24oKS50aGVuKGZ1bmN0aW9uKHZlcnNpb24pIHtcblx0XHQgICAgY29uc29sZS5sb2coJ2lGaXNrZSB2ZXJzaW9uOicsIHZlcnNpb24pO1xuXHRcdCAgICAkc2NvcGUudmVyc2lvbiA9IHZlcnNpb247XG5cdFx0fSk7XG5cdCAgICB9XG5cdH0pO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignQXJlYUN0cmwnLCBbXG4gICAgJyRzY29wZScsXG4gICAgJyRpb25pY0hpc3RvcnknLFxuICAgICdsb2NhbFN0b3JhZ2UnLFxuICAgICckcm9vdFNjb3BlJyxcbiAgICAnJGlvbmljVmlld1N3aXRjaGVyJyxcbiAgICAnJHN0YXRlUGFyYW1zJyxcbiAgICAnREInLFxuICAgICckaW9uaWNTbGlkZUJveERlbGVnYXRlJyxcbiAgICAnJGlvbmljTW9kYWwnLFxuXG4gICAgJyRzdGF0ZScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaW9uaWNIaXN0b3J5LCBsb2NhbFN0b3JhZ2UsICRyb290U2NvcGUsICRpb25pY1ZpZXdTd2l0Y2hlciwgJHN0YXRlUGFyYW1zLCBEQiwgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSwgJGlvbmljTW9kYWwsICRzdGF0ZSkge1xuXG4gICAgICAgICRzY29wZS5tYXAgPSB7XG4gICAgICAgICAgICBjZW50ZXI6IHt9XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5pbWFnZV9lbmRwb2ludCA9ICdodHRwOi8vd3d3LmlmaXNrZS5zZSc7XG4gICAgICAgICRzY29wZS50YWJzQmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgdmlldyBpcyBhdCB0aGUgdG9wIG9mIGl0cyBoaXN0b3J5IHN0YWNrXG4gICAgICAgICAgICBpZighJGlvbmljSGlzdG9yeS52aWV3SGlzdG9yeSgpLmN1cnJlbnRWaWV3LmluZGV4KSB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU3dpdGNoIHRvIHRoZSBob21lIGhpc3Rvcnkgc3RhY2tcbiAgICAgICAgICAgICAgICAgKiBTZWUgJGlvbmljSGlzdG9yeSBzb3VyY2UgZm9yIHRoZSBldmVuIGhhbmRsZXIgdXNlZFxuICAgICAgICAgICAgICAgICAqIFNlZSBob21lX2NvbnRyb2xsZXIuanMgZm9yIHRoZSBoaXN0b3J5SWQgdXNlZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRpb25pY1ZpZXdTd2l0Y2hlci5uZXh0RGlyZWN0aW9uKCdiYWNrJyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCckaW9uaWNIaXN0b3J5LmNoYW5nZScsIHtcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeUlkOiBsb2NhbFN0b3JhZ2UuZ2V0KCdob21lSGlzdG9yeUlkJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBiYWNrIGFjdGlvblxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGlvbmljR29CYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbignJGlvbmljVmlldy5iZWZvcmVFbnRlcicsIGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgLy9XZSBuZWVkIHRvIGZldGNoIHN0YXRlcGFyYW1zIGZyb20gdGhlICRzdGF0ZSBzaW5jZSBpdCBkb2Vzbid0IHVwZGF0ZSBmb3Igc29tZSByZWFzb24uLi5cbiAgICAgICAgICAgICRzdGF0ZVBhcmFtcyA9ICRzdGF0ZS4kY3VycmVudC5sb2NhbHNbXCJAXCJdLiRzdGF0ZVBhcmFtcztcblxuICAgICAgICAgICAgdmFyIGljb25zID0ge307XG4gICAgICAgICAgICAvLyBBcmVhaW5mb1xuICAgICAgICAgICAgREIuZ2V0QXJlYSgkc3RhdGVQYXJhbXMuaWQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihhcmVhKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5jZW50ZXIgPSB7XG4gICAgICAgICAgICAgICAgICAgIGxhdDogYXJlYS5sYXQsXG4gICAgICAgICAgICAgICAgICAgIGxuZzogYXJlYS5sbmcsXG4gICAgICAgICAgICAgICAgICAgIHpvb206IE51bWJlcihhcmVhLnpvb20pID8gTnVtYmVyKGFyZWEuem9vbSkgOiA5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuaW1hZ2VzID0gYXJlYS5pbWFnZXM7XG5cbiAgICAgICAgICAgICAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgICAgICRzY29wZS5hcmVhID0gYXJlYTtcblxuICAgICAgICAgICAgICAgIERCLmdldE9yZ2FuaXphdGlvbihhcmVhLm9yZ2lkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKG9yZykge1xuICAgICAgICAgICAgICAgICAgICAkc2NvcGUub3JnID0gb3JnO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIERCLmdldFBvaVR5cGVzKClcbiAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihwb2lfdHlwZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IHBvaV90eXBlcy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBwb2lfdHlwZXNbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uc1t0eXBlLklEXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uVXJsOiAnaHR0cDovL3d3dy5pZmlza2Uuc2UvJyt0eXBlLmljb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbkFuY2hvcjogICBbMTYsIDM3XSAvLyBwb2ludCBvZiB0aGUgaWNvbiB3aGljaCB3aWxsIGNvcnJlc3BvbmQgdG8gbWFya2VyJ3MgbG9jYXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgREIuZ2V0UG9pcyhhcmVhLm9yZ2lkKVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihwb2lzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubWFwLm1hcmtlcnMgPSBwb2lzLm1hcChmdW5jdGlvbihwb2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXllcjogJ3BvaXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXQ6IHBvaS5sYSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG5nOiBwb2kubG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246IGljb25zW3BvaS50eXBlXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcG9pLnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgREIuZ2V0UG9seWdvbnMoYXJlYS5vcmdpZClcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocG9seWdvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5tYXAucGF0aHMgPSBwb2x5Z29ucy5tYXAoZnVuY3Rpb24ocG9seSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGxuZ3M6IEpTT04ucGFyc2UoJ1snICsgcG9seS5wb2x5ICsgJ10nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHBvbHkuYyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogcG9seS5jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAncG9seWdvbidcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBEQi5nZXRBcmVhRmlzaGVzKCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGZpc2hlcykge1xuICAgICAgICAgICAgICAgICRzY29wZS5maXNoZXMgPSBmaXNoZXM7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIERCLmdldFByb2R1Y3RzQnlBcmVhKCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHByb2R1Y3RzKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3RzID0gcHJvZHVjdHM7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgfSk7XG4gICAgICAgIC8vIEFyZWEgZmlzaGVzXG4gICAgICAgICRzY29wZS5zb3J0b3JkZXIgPSAnLWFtb3VudCc7XG5cbiAgICAgICAgLy9BcmVhX0NhcmRzXG4gICAgICAgICRzY29wZS5zbXN0ZXJtcyA9IGxvY2FsU3RvcmFnZS5nZXQoJ3Ntc190ZXJtcycpO1xuICAgICAgICAkc2NvcGUucHJlZGljYXRlID0gXCJzb1wiO1xuXG5cbiAgICAgICAgLy9TTVMtbW9kYWxcbiAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCdjb21wb25lbnRzL2FyZWEvc21zX21vZGFsLmh0bWwnLCB7XG4gICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICRzY29wZS5zbXNfbW9kYWwgPSBtb2RhbDtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5vcGVuTW9kYWwgPSBmdW5jdGlvbihwcm9kdWN0KSB7XG4gICAgICAgICAgICAkc2NvcGUuc21zX21vZGFsLnNob3coKTtcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0ID0gcHJvZHVjdDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNsb3NlTW9kYWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zbXNfbW9kYWwuaGlkZSgpO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuc2hvd1Rlcm1zID0gZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICAkc2NvcGUuc2hvd2luZ3Rlcm1zID0gISRzY29wZS5zaG93aW5ndGVybXM7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5zaG93aW5ndGVybXMgPSBmYWxzZTtcblxuICAgICAgICAvL1J1bGVzIG1vZGFsXG4gICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgnY29tcG9uZW50cy9hcmVhL3J1bGVzX21vZGFsLmh0bWwnLCB7XG4gICAgICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnXG4gICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obW9kYWwpIHtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc19tb2RhbCA9IG1vZGFsO1xuICAgICAgICB9KTtcbiAgICAgICAgJHNjb3BlLm9wZW5SdWxlc01vZGFsID0gZnVuY3Rpb24ocHJvZHVjdCkge1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsLnNob3coKTtcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0ID0gcHJvZHVjdDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNsb3NlUnVsZXNNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnNtc19tb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc19tb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy9NYXBcbiAgICAgICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLm1hcCwge1xuICAgICAgICAgICAgbGF5ZXJzOiB7XG4gICAgICAgICAgICAgICAgYmFzZWxheWVyczoge1xuICAgICAgICAgICAgICAgICAgICBtYXBib3g6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdNYXBib3gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3h5eicsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwOi8vYXBpLnRpbGVzLm1hcGJveC5jb20vdjQve21hcHR5cGV9L3t6fS97eH0ve3l9QDJ4LnBuZz9hY2Nlc3NfdG9rZW49e2FwaWtleX0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFwdHlwZTogJ21hcGJveC5vdXRkb29ycycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXBpa2V5OiAncGsuZXlKMUlqb2liV0ZwYzNSb2J5SXNJbUVpT2lJM1VtczVSMEl3SW4wLkRPaFU4MWNsSExFaFRqODFESU9qZGcnXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG92ZXJsYXlzOiB7XG4gICAgICAgICAgICAgICAgICAgIHBvaXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdTdMOkbGxlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWFya2VyY2x1c3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUNsdXN0ZXJpbmdBdFpvb206IDksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtlZExvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvdmVyYWdlT25Ib3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlT3V0c2lkZVZpc2libGVCb3VuZHM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdBcmVhc0N0cmwnLCBbJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnJGlvbmljU2Nyb2xsRGVsZWdhdGUnICwnREInLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgJGlvbmljU2Nyb2xsRGVsZWdhdGUgLERCKSB7XG5cbiAgICB2YXIgY29weSA9ICRzdGF0ZVBhcmFtcy5zZWFyY2g7XG4gICAgJHNjb3BlLnNlYXJjaCA9IGNvcHk7XG4gICAgJHNjb3BlLmNvdW50eSA9ICRzdGF0ZVBhcmFtcy5jb3VudHk7XG4gICAgREIuc2VhcmNoKCcnLCAkc3RhdGVQYXJhbXMuaWQpXG4gICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmFyZWFzID0gZGF0YTtcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgICAkc2NvcGUuY2xlYXJTZWFyY2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLnNlYXJjaCA9ICcnO1xuICAgIH07XG4gICAgJHNjb3BlLnNjcm9sbFRvcCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkaW9uaWNTY3JvbGxEZWxlZ2F0ZS5zY3JvbGxUb3AoKTtcbiAgICB9O1xuXG59XSk7XG5cbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ0NvbnRhY3RDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJ2xvY2FsU3RvcmFnZScsIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCBsb2NhbFN0b3JhZ2UpIHtcbiAgICAgICAgJHNjb3BlLmNvbnRhY3RJbmZvID0gbG9jYWxTdG9yYWdlLmdldCgnY29udGFjdEluZm8nKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ0NvdW50aWVzQ3RybCcsIFsnJHNjb3BlJywgJ0RCJywgZnVuY3Rpb24oJHNjb3BlLCBEQikge1xuICAgIERCLmdldENvdW50aWVzKClcbiAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICRzY29wZS5jb3VudGllcyA9IGRhdGE7XG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdGaXNoRGV0YWlsQ3RybCcsIFsnJHNjb3BlJywgJyRzdGF0ZVBhcmFtcycsICdEQicsIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlUGFyYW1zLCBEQikge1xuICAgICRzY29wZS5maXNoID0gJHN0YXRlUGFyYW1zLmZpc2g7XG4gICAgJHNjb3BlLmltYWdlX2VuZHBvaW50ID0gJ2h0dHA6Ly93d3cuaWZpc2tlLnNlJztcbiAgICBpZighJHNjb3BlLmZpc2gpIHtcbiAgICAgICAgREIuZ2V0RmlzaCgkc3RhdGVQYXJhbXMuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5maXNoID0gZGF0YTtcbiAgICBjb25zb2xlLmxvZygkc2NvcGUuZmlzaCk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCRzY29wZS5maXNoKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ0Zpc2hlc0N0cmwnLCBbJyRzY29wZScsICdEQicsIGZ1bmN0aW9uKCRzY29wZSwgREIpIHtcbiAgICAkc2NvcGUuc29ydG9yZGVyID0gJ3NvJztcbiAgICAkc2NvcGUuaW1hZ2VfZW5kcG9pbnQgPSAnaHR0cDovL3d3dy5pZmlza2Uuc2UnO1xuICAgIERCLmdldEZpc2hlcygpXG4gICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkc2NvcGUuZmlzaGVzID0gZGF0YTtcbiAgICAgICAgJHNjb3BlLmRlZmF1bHRfaW1nID0gZGF0YVswXS5pbWc7XG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdIb21lQ3RybCcsIFtcbiAgICAnJHNjb3BlJyxcbiAgICAnJHN0YXRlJyxcbiAgICAnJGlvbmljSGlzdG9yeScsXG4gICAgJ2xvY2FsU3RvcmFnZScsXG4gICAgJ3Nlc3Npb25EYXRhJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGlvbmljSGlzdG9yeSwgbG9jYWxTdG9yYWdlLCBzZXNzaW9uRGF0YSkge1xuXG4gICAgICAgICRzY29wZS5sb2dnZWRJbiA9IHNlc3Npb25EYXRhO1xuXG4gICAgICAgIC8vIEN1cnJlbnQgaGlzdG9yeSBzdGFjayBJZC4gU2VlIGFyZWFfY29udHJvbGxlciBmb3IgdXNhZ2UuXG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXQoJ2hvbWVIaXN0b3J5SWQnLCAkaW9uaWNIaXN0b3J5LmN1cnJlbnRIaXN0b3J5SWQoKSk7XG5cbiAgICAgICAgJHNjb3BlLm15RnVuYyA9IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgaWYoJGV2ZW50LmtleUNvZGUgPT0gMTMgJiYgISRldmVudC5zaGlmdEtleSkgeyAvL2lmIGVudGVyLWtleVxuICAgICAgICAgICAgICAgICRzdGF0ZS5nbygnbWVudS5hcmVhcycsIHtzZWFyY2g6ICRldmVudC5zcmNFbGVtZW50LnZhbHVlfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfTtcbiAgICB9XG5dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ0xlZ2FsQ3RybCcsIFsnJHNjb3BlJywgJyRzdGF0ZScsICdsb2NhbFN0b3JhZ2UnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgbG9jYWxTdG9yYWdlKSB7XG4gICAgJHNjb3BlLnRvcyA9IGxvY2FsU3RvcmFnZS5nZXQoJ3RvcycpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignTG9naW5DdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJ1VwZGF0ZScsICckaW9uaWNMb2FkaW5nJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsIFVwZGF0ZSwgJGlvbmljTG9hZGluZykge1xuICAgIC8vJHNjb3BlLnVzZXIgPSB7fTtcbiAgICAkc2NvcGUuc2lnbkluID0gZnVuY3Rpb24obG9naW5Gb3JtKSB7XG4gICAgICAgICRpb25pY0xvYWRpbmcuc2hvdygpO1xuXG4gICAgICAgIFVwZGF0ZS51c2VyX2xvZ2luKGxvZ2luRm9ybS51c2VybmFtZS4kdmlld1ZhbHVlLCBsb2dpbkZvcm0ucGFzc3dvcmQuJHZpZXdWYWx1ZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICBsb2dpbkZvcm0uJHNldFZhbGlkaXR5KFwibG9naW5FcnJvclwiLCB0cnVlKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnbWVudS5ob21lJyk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycm9yKSB7XG4gICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgIGxvZ2luRm9ybS4kc2V0VmFsaWRpdHkoXCJsb2dpbkVycm9yXCIsIGZhbHNlKTtcbiAgICAgICAgICAgICRzY29wZS5lcnJvciA9IGVycm9yLnJlc3BvbnNlO1xuICAgICAgICB9KTtcbiAgICB9O1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignTWFwQ3RybCcsIFtcbiAgICAnJHNjb3BlJyxcbiAgICAnbGVhZmxldERhdGEnLFxuICAgICdEQicsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCBsZWFmbGV0RGF0YSwgREIpIHtcbiAgICAgICAgJHNjb3BlLnRlc3Q9ICdoZWonO1xuICAgICAgICBEQi5zZWFyY2goJycpLnRoZW4oZnVuY3Rpb24oYXJlYXMpe1xuICAgICAgICAgICAgJHNjb3BlLm1hcmtlcnMgPSBhcmVhcy5tYXAoZnVuY3Rpb24oYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyOiAnZmlzaGFyZWFzJyxcbiAgICAgICAgICAgICAgICAgICAgbGF0OiBhLmxhdCxcbiAgICAgICAgICAgICAgICAgICAgbG5nOiBhLmxuZyxcbiAgICAgICAgICAgICAgICAgICAgZ2V0TWVzc2FnZVNjb3BlOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld19zY29wZSA9ICRzY29wZS4kbmV3KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdfc2NvcGUuYXJlYSA9IGE7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3X3Njb3BlO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnPGEgdWktc3JlZj1cImFyZWEuaW5mbyh7aWQ6IGFyZWEuSUQgfSlcIj57e2FyZWEudH19PC9hPidcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICBhbmd1bGFyLmV4dGVuZCgkc2NvcGUsIHtcbiAgICAgICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgICAgIGxhdDogNjIuMCxcbiAgICAgICAgICAgICAgICBsbmc6IDE1LjAsXG4gICAgICAgICAgICAgICAgem9vbTogNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxheWVyczoge1xuICAgICAgICAgICAgICAgIGJhc2VsYXllcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbWFwYm94OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTWFwYm94JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd4eXonLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3ttYXB0eXBlfS97en0ve3h9L3t5fUAyeC5wbmc/YWNjZXNzX3Rva2VuPXthcGlrZXl9JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHR5cGU6ICdtYXBib3gub3V0ZG9vcnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaWtleTogJ3BrLmV5SjFJam9pYldGcGMzUm9ieUlzSW1FaU9pSTNVbXM1UjBJd0luMC5ET2hVODFjbEhMRWhUajgxRElPamRnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvdmVybGF5czoge1xuICAgICAgICAgICAgICAgICAgICBmaXNoYXJlYXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdGaXNrZW9tcsOlZGVuJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdtYXJrZXJjbHVzdGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2libGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNhYmxlQ2x1c3RlcmluZ0F0Wm9vbTogOSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjaHVua2VkTG9hZGluZzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG93Q292ZXJhZ2VPbkhvdmVyOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVPdXRzaWRlVmlzaWJsZUJvdW5kczogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ01lbnVDdHJsJywgW1xuICAgICckc2NvcGUnLFxuICAgICckc3RhdGUnLFxuICAgICckaW9uaWNQb3BvdmVyJyxcbiAgICAnc2Vzc2lvbkRhdGEnLFxuICAgICdVcGRhdGUnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCAkaW9uaWNQb3BvdmVyLCBzZXNzaW9uRGF0YSwgVXBkYXRlKSB7XG5cbiAgICAkc2NvcGUuc2Vzc2lvbkRhdGEgPSBzZXNzaW9uRGF0YTtcblxuICAgICRpb25pY1BvcG92ZXIuZnJvbVRlbXBsYXRlVXJsKCdjb21wb25lbnRzL21lbnUvcG9wb3Zlci5odG1sJywge1xuICAgICAgICBzY29wZTogJHNjb3BlXG4gICAgfSkudGhlbihmdW5jdGlvbihwb3BvdmVyKSB7XG4gICAgICAgICRzY29wZS5wb3BvdmVyID0gcG9wb3ZlcjtcbiAgICB9KTtcblxuICAgICRzY29wZS51c2VyaW5mbyA9IGZ1bmN0aW9uKCkge1xuXHQkc2NvcGUucG9wb3Zlci5oaWRlKCk7XG5cdCRzdGF0ZS5nbygnbWVudS51c2VyaW5mbycpO1xuICAgIH07XG4gICAgJHNjb3BlLmxvZ291dCA9IGZ1bmN0aW9uKCkge1xuXHQkc2NvcGUucG9wb3Zlci5oaWRlKCk7XG5cdFVwZGF0ZS51c2VyX2xvZ291dCgpO1xuXG5cdCRzdGF0ZS5nbygnc3RhcnQubG9naW4nKTtcbiAgICB9O1xuICAgICRzY29wZS5sb2dpbiA9IGZ1bmN0aW9uKCkge1xuXHQkc2NvcGUucG9wb3Zlci5oaWRlKCk7XG5cdCRzdGF0ZS5nbygnc3RhcnQubG9naW4nKTtcbiAgICB9O1xuICAgICRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uKCkge1xuXHQkc2NvcGUucG9wb3Zlci5oaWRlKCk7XG5cdCRzdGF0ZS5nbygnc3RhcnQucmVnaXN0ZXIuZGV0YWlscycpO1xuICAgIH07XG5cbiAgICAkc2NvcGUudXBkYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIFVwZGF0ZS5mb3JjZWRVcGRhdGUoKTtcbiAgICB9O1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdSZWdpc3RlckN0cmwnLCBbXG4gICAgJyRzY29wZScsXG4gICAgJyRzdGF0ZScsXG4gICAgJyRpb25pY0xvYWRpbmcnLFxuICAgICckaW9uaWNNb2RhbCcsXG4gICAgJyRpb25pY1Njcm9sbERlbGVnYXRlJyxcbiAgICAnQVBJJyxcbiAgICAnbG9jYWxTdG9yYWdlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGlvbmljTG9hZGluZywgJGlvbmljTW9kYWwsICRpb25pY1Njcm9sbERlbGVnYXRlLCBBUEksIGxvY2FsU3RvcmFnZSkge1xuXG4gICAgdmFyIHVzZXJuYW1lO1xuXG4gICAgLy8gTGl2ZSBjaGVjayBmb3IgdXNlcm5hbWUgYXZhaWxhYmlsaXR5XG4gICAgJHNjb3BlLmNoZWNrVXNlcm5hbWUgPSBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICBBUEkudXNlcl9leGlzdHMoaW5wdXQuJHZpZXdWYWx1ZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaW5wdXQuJHNldFZhbGlkaXR5KCduYW1lVGFrZW4nLCAhZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBMaXZlIGNoZWNrIGZvciBlbWFpbCBhdmFpbGFiaWxpdHlcbiAgICAkc2NvcGUuY2hlY2tFbWFpbCA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIEFQSS51c2VyX2V4aXN0cyhudWxsLCBpbnB1dC4kdmlld1ZhbHVlKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpbnB1dC4kc2V0VmFsaWRpdHkoJ2VtYWlsVGFrZW4nLCAhZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8vIFZhbGlkYXRpb24gZXJyb3JzIG5vdCB0aWVkIHRvIGlucHV0IGZpZWxkXG4gICAgJHNjb3BlLmZvcm1FcnJvcnMgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIHJlZ2lzdGVyXG4gICAgICogU3VibWl0IGhhbmRsZXIgZm9yIHRoZSByZWdpc3RyYXRpb24gZm9ybVxuICAgICAqL1xuICAgICRzY29wZS5yZWdpc3RlciA9IGZ1bmN0aW9uKGZvcm0pIHtcbiAgICAgICAgJGlvbmljTG9hZGluZy5zaG93KCk7XG5cbiAgICAgICAgLy8gU2F2ZSBwaG9uZSBudW1iZXIgZm9yIG5leHQgdmlld1xuICAgICAgICAkc2NvcGUucGhvbmUgPSBmb3JtLnBob25lLiR2aWV3VmFsdWU7XG5cbiAgICAgICAgLy8gU2F2ZSB1c2VybmFtZSBmb3IgdmVyaWZ5IHN1Ym1pdCBoYW5kbGVyXG4gICAgICAgIHVzZXJuYW1lID0gZm9ybS51c2VybmFtZS4kdmlld1ZhbHVlO1xuXG4gICAgICAgIHZhciBwYXNzd29yZCA9IGZvcm0ucGFzc3dvcmQuJHZpZXdWYWx1ZTtcbiAgICAgICAgdmFyIGZ1bGxuYW1lID0gZm9ybS5mdWxsbmFtZS4kdmlld1ZhbHVlO1xuICAgICAgICB2YXIgZW1haWwgPSBmb3JtLmVtYWlsLiR2aWV3VmFsdWU7XG5cbiAgICAgICAgQVBJLnVzZXJfcmVnaXN0ZXIodXNlcm5hbWUsIGZ1bGxuYW1lLCBwYXNzd29yZCwgZW1haWwsICRzY29wZS5waG9uZSlcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgLy8gU3VjY2VzczogR28gdG8gdmVyaWZ5IGFjY291bnQgdmlld1xuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ14udmVyaWZ5Jyk7XG5cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogRXJyb3I6IEluZm9ybSB0aGUgdXNlciBhYm91dCBmYWlsZWQgcmVnaXN0cmF0aW9uXG4gICAgICAgICAgICAgKiBTZWUgQVBJIGRvY3VtZW50YXRpb24gZm9yIGVycm9yIGNvZGVzXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICRzY29wZS5mb3JtRXJyb3JzLnJlZ2lzdHJhdGlvbkVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICRpb25pY1Njcm9sbERlbGVnYXRlLnNjcm9sbFRvcCh0cnVlKTtcblxuICAgICAgICAgICAgLy8gSW52YWxpZCBFbWFpbFxuICAgICAgICAgICAgaWYgKGVycm9yLmVycm9yX2NvZGUgPT0gOCkge1xuICAgICAgICAgICAgICAgIGZvcm0uZW1haWwuJHNldFZhbGlkaXR5KCdpbnZhbGlkRW1haWwnLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBVc2VybmFtZSBvciBFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgICAgIGlmIChlcnJvci5lcnJvcl9jb2RlID09IDkpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tVc2VybmFtZShmb3JtLnVzZXJuYW1lKTtcbiAgICAgICAgICAgICAgICAkc2NvcGUuY2hlY2tFbWFpbChmb3JtLmVtYWlsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIEludmFsaWQgcGhvbmUgbnVtYmVyXG4gICAgICAgICAgICBpZiAoZXJyb3IuZXJyb3JfY29kZSA9PSAxMCkge1xuICAgICAgICAgICAgICAgIGZvcm0ucGhvbmUuJHNldFZhbGlkaXR5KCdpbnZhbGlkUGhvbmUnLCBmYWxzZSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG5cbiAgICAvKipcbiAgICAgKiB2ZXJpZnlcbiAgICAgKiBTdWJtaXQgaGFuZGxlciBmb3IgdGhlIHZlcmlmaWNhdGlvbiBmb3JtXG4gICAgICovXG4gICAgJHNjb3BlLnZlcmlmeSA9IGZ1bmN0aW9uKGZvcm0pIHtcbiAgICAgICAgJGlvbmljTG9hZGluZy5zaG93KCk7XG5cbiAgICAgICAgdmFyIHZlcmNvZGUgPSBmb3JtLnZlcmNvZGU7XG5cbiAgICAgICAgQVBJLnVzZXJfY29uZmlybSh1c2VybmFtZSwgdmVyY29kZS4kdmlld1ZhbHVlKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ3N0YXJ0LmxvZ2luJyk7XG4gICAgICAgICAgICB2ZXJjb2RlLiRzZXRWYWxpZGl0eShcInZlcmlmaWVkXCIsIHRydWUpO1xuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG5cbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgIHZlcmNvZGUuJHNldFZhbGlkaXR5KFwidmVyaWZpZWRcIiwgZmFsc2UpO1xuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAkc2NvcGUudG9zID0gbG9jYWxTdG9yYWdlLmdldCgndG9zJyk7XG4gICAgLy9Nb2RhbCB3aXRoIHRoZSBFVUxBXG4gICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCdjb21wb25lbnRzL3JlZ2lzdGVyL2V1bGEuaHRtbCcsIHtcbiAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgYW5pbWF0aW9uOiAnc2xpZGUtaW4tdXAnXG4gICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAkc2NvcGUuZXVsYSA9IG1vZGFsO1xuICAgIH0pO1xuICAgICRzY29wZS5zaG93RXVsYSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkc2NvcGUuZXVsYS5zaG93KCk7XG4gICAgfTtcbiAgICAkc2NvcGUuY2xvc2VFdWxhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5ldWxhLmhpZGUoKTtcbiAgICB9O1xuICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5ldWxhLnJlbW92ZSgpO1xuICAgIH0pO1xuXG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdUZWNobmlxdWVEZXRhaWxDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ0RCJywgJyRpb25pY1NsaWRlQm94RGVsZWdhdGUnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgREIsICRpb25pY1NsaWRlQm94RGVsZWdhdGUpIHtcbiAgICAkc2NvcGUuaW1hZ2VfZW5kcG9pbnQgPSAnaHR0cDovL3d3dy5pZmlza2Uuc2UnO1xuICAgICRzY29wZS50ZWNoID0gJHN0YXRlUGFyYW1zLnRlY2g7XG4gICAgJHNjb3BlLmltYWdlcyA9IFtdO1xuXG4gICAgaWYoISRzY29wZS50ZWNoKSB7XG4gICAgICAgIERCLmdldFRlY2huaXF1ZSgkc3RhdGVQYXJhbXMuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5pbWFnZXMgPSBbZGF0YS5pbWcxLCBkYXRhLmltZzIsIGRhdGEuaW1nM10uZmlsdGVyKGZ1bmN0aW9uKGVsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICEvXFwvJC8udGVzdChlbCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZS51cGRhdGUoKTtcbiAgICAgICAgICAgICRzY29wZS50ZWNoID0gZGF0YTtcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgdmFyIGRhdGEgPSAkc2NvcGUudGVjaDtcbiAgICAgICAgJHNjb3BlLmltYWdlcyA9IFtkYXRhLmltZzEsIGRhdGEuaW1nMiwgZGF0YS5pbWczXS5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgIHJldHVybiAhL1xcLyQvLnRlc3QoZWwpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnVwZGF0ZSgpO1xuICAgIH1cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ1RlY2huaXF1ZXNDdHJsJywgWyckc2NvcGUnLCAnREInLCBmdW5jdGlvbigkc2NvcGUsIERCKSB7XG4gICAgREIuZ2V0VGVjaG5pcXVlcygpXG4gICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgJHNjb3BlLnRlY2huaXF1ZXMgPSBkYXRhO1xuICAgIH0pO1xuICAgICRzY29wZS5pbWFnZV9lbmRwb2ludCA9ICdodHRwOi8vd3d3LmlmaXNrZS5zZSc7XG4gICAgJHNjb3BlLnNvcnRvcmRlciA9ICdzbyc7XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ1VzZXJDdHJsJywgWyckc2NvcGUnLCAnREInLCBmdW5jdGlvbigkc2NvcGUsIERCKSB7XG4gICAgREIuZ2V0VXNlckluZm8oKVxuICAgIC50aGVuKGZ1bmN0aW9uKHVzZXIpIHtcbiAgICAgICAgJHNjb3BlLnVzZXIgPSB1c2VyO1xuICAgIH0pO1xuICAgIERCLmdldFVzZXJOdW1iZXJzKClcbiAgICAudGhlbihmdW5jdGlvbihudW1iZXJzKSB7XG4gICAgICAgICRzY29wZS5udW1iZXJzID0gbnVtYmVycztcbiAgICB9KTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ1VzZXJDYXJkc0N0cmwnLCBbXG4gICAgJyRzY29wZScsXG4gICAgJyRzdGF0ZVBhcmFtcycsXG4gICAgJ0RCJyxcbiAgICAnJGlvbmljTW9kYWwnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlUGFyYW1zLCBEQiwgJGlvbmljTW9kYWwpIHtcbiAgICAgICAgJHNjb3BlLnByZWQgPSAnLXRvJztcbiAgICAgICAgJHNjb3BlLmVuZHBvaW50ID0gJ2h0dHBzOi8vd3d3LmlmaXNrZS5zZSc7XG4gICAgICAgICRzY29wZS5ub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBEQi5nZXRVc2VyUHJvZHVjdHMoKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdHMgPSBkYXRhO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vdXNlIHRoZSBzYW1lIG1vZGFsIGFzIGluIGFyZWFfY2FyZHNcbiAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCdjb21wb25lbnRzL2FyZWFfY2FyZHMvcnVsZXNfbW9kYWwuaHRtbCcsIHtcbiAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCdcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsID0gbW9kYWw7XG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUub3BlblJ1bGVzTW9kYWwgPSBmdW5jdGlvbihwcm9kdWN0KSB7XG4gICAgICAgICAgICAkc2NvcGUucnVsZXNfbW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHJvZHVjdCk7XG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdCA9IHByb2R1Y3Q7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5jbG9zZVJ1bGVzTW9kYWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc19tb2RhbC5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc19tb2RhbC5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXSk7XG4iLCIoZnVuY3Rpb24oYW5ndWxhciwgdW5kZWZpbmVkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5hcGknLCBbJ2lmaXNrZS51dGlscyddKVxuICAgIC5wcm92aWRlcignQVBJJywgZnVuY3Rpb24gQVBJUHJvdmlkZXIoKSB7XG5cbiAgICAgICAgdGhpcy5iYXNlX3VybCA9ICdodHRwczovL3d3dy5pZmlza2Uuc2UvYXBpL3YyL2FwaS5waHAnO1xuXG4gICAgICAgIHRoaXMuJGdldCA9IFsnJGh0dHAnLCAnc2Vzc2lvbkRhdGEnLCAnbG9jYWxTdG9yYWdlJywgJyRxJywgZnVuY3Rpb24oJGh0dHAsIHNlc3Npb25EYXRhLCBsb2NhbFN0b3JhZ2UsICRxKSB7XG4gICAgICAgICAgICB2YXIgYmFzZV91cmwgPSB0aGlzLmJhc2VfdXJsO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqICMgYXBpX2NhbGwgI1xuICAgICAgICAgICAgICogaGFuZGxlcyBodHRwIHJlcXVlc3RzXG4gICAgICAgICAgICAgKiByZXR1cm5zIGEgJGh0dHAgb2JqZWN0IGZvciB0aGUgcmVxdWVzdGVkIGFwaSBjYWxsXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBhcGlfY2FsbCA9IGZ1bmN0aW9uKHBhcmFtcykge1xuICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgJGh0dHAoXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOidnZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogYmFzZV91cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiBhbmd1bGFyLmV4dGVuZChwYXJhbXMsIHsna2V5JzogJzAxMjM0NTY3ODlhYmNkZWYnfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZW91dDogNTAwMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYWNoZTogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIC8vIFRvRG86IFByb3BlciBsb2dnaW5nXG4gICAgICAgICAgICAgICAgICAgIC5zdWNjZXNzKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuc3RhdHVzID09PSAnZXJyb3InKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGRhdGEubWVzc2FnZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGRhdGEuZGF0YS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVxdWVzdCB0aW1lb3V0JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiAjIHNlc3Npb25fYXBpX2NhbGwgI1xuICAgICAgICAgICAgICogd3JhcHBlciBmb3IgYXBpX2NhbGwgLSBpbnNlcnRzIHRoZSBzZXNzaW9uIHRva2VuIGludG8gcGFyYW1zXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBzZXNzaW9uX2FwaV9jYWxsID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBzZXNzaW9uRGF0YS50b2tlbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoYW5ndWxhci5leHRlbmQocGFyYW1zLCB7czogc2Vzc2lvbn0pKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2V0X211bmljaXBhbGl0aWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X211bmljaXBhbGl0aWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2NvdW50aWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X2NvdW50aWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9leGlzdHM6IGZ1bmN0aW9uKHVzZXJuYW1lLCBlbWFpbCkge1xuXHRcdCAgICB2YXIgYXJncyA9IHttOiAndXNlcl9leGlzdHMnfTtcblxuXHRcdCAgICBpZiAodHlwZW9mIHVzZXJuYW1lID09PSAnc3RyaW5nJykge1xuXHRcdFx0YXJncy51c2VybmFtZSA9IHVzZXJuYW1lO1xuXHRcdCAgICB9XG5cdFx0ICAgIGlmICh0eXBlb2YgZW1haWwgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRhcmdzLmVtYWlsID0gZW1haWw7XG5cdFx0ICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoYXJncyk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1c2VyX3JlZ2lzdGVyOiBmdW5jdGlvbih1c2VybmFtZSwgZnVsbG5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgcGhvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAndXNlcl9yZWdpc3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGxuYW1lOiBmdWxsbmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZW1haWw6IGVtYWlsLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBob25lOiBwaG9uZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1c2VyX2NvbmZpcm06IGZ1bmN0aW9uKHVzZXJuYW1lLCBwaW4pIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAndXNlcl9jb25maXJtJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGluOiBwaW5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9pbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25fYXBpX2NhbGwoe206ICd1c2VyX2luZm8nfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1c2VyX2xvZ2luOiBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAndXNlcl9sb2dpbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiBwYXNzd29yZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXNzaW9uRGF0YS5zZXRUb2tlbihkYXRhLmRhdGEucmVzcG9uc2UpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9uZWVkZWQgZm9yIGNoYWluaW5nIG9mIHByb21pc2VzLCBzaG91bGQgYmUgZG9uZSBzb21lIG90aGVyIHdheSBwZXJoYXBzP1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGEucmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVzZXJfbG9nb3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbl9hcGlfY2FsbCh7bTogJ3VzZXJfbG9nb3V0J30pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25EYXRhLmRlbGV0ZVRva2VuKCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9wcm9kdWN0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uX2FwaV9jYWxsKHttOiAndXNlcl9wcm9kdWN0cyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9maXNoZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoe206ICdnZXRfZmlzaGVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X3RlY2huaXF1ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoe206ICdnZXRfdGVjaG5pcXVlcyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9iYWl0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF9iYWl0cyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9vcmdhbml6YXRpb25zOiBmdW5jdGlvbihvcmdpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfb3JnYW5pemF0aW9ucycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnaWQ6IG9yZ2lkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9vcmdfbW9kaWZpZWQ6IGZ1bmN0aW9uKG9yZ2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9vcmdfbW9kaWZpZWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2lkOiBvcmdpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfYXJlYXM6IGZ1bmN0aW9uKGFyZWFpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfYXJlYXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFpZDogYXJlYWlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9hcmVhc19tb2RpZmllZDogZnVuY3Rpb24oYXJlYWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9hcmVhc19tb2RpZmllZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlYWlkOiBhcmVhaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X3Byb2R1Y3RzOiBmdW5jdGlvbihhcmVhaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAnZ2V0X3Byb2R1Y3RzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmVhaWQ6IGFyZWFpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfcnVsZXM6IGZ1bmN0aW9uKHJ1bGVpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfcnVsZXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJ1bGVpZDogcnVsZWlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9waG90b3M6IGZ1bmN0aW9uKG9yZ2lkLCBhcmVhaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAnZ2V0X3Bob3RvcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnaWQ6IG9yZ2lkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFpZDogYXJlYWlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9tYXBfcG9pczogZnVuY3Rpb24ob3JnaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAnZ2V0X21hcF9wb2lzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdpZDogb3JnaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X21hcF9wb2lfdHlwZXMgOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X21hcF9wb2lfdHlwZXMnfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfbWFwX3BvbHlnb25zOiBmdW5jdGlvbihvcmdpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfbWFwX3BvbHlnb25zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdpZDogb3JnaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9nZXRfZmF2b3JpdGVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25fYXBpX2NhbGwoe206ICd1c2VyX2dldF9mYXZvcml0ZXMnfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfdGVybXNfb2Zfc2VydmljZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF90ZXJtc19vZl9zZXJ2aWNlJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2NvbnRhY3RfaW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF9jb250YWN0X2luZm8nfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfZW5naW5lX3BvbGljaWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X2VuZ2luZV9wb2xpY2llcyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9zbXNfdGVybXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoe206ICdnZXRfc21zX3Rlcm1zJ30pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1dO1xuICAgIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIsIHVuZGVmaW5lZCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdpZmlza2UuZGInLCBbXSlcbiAgICAucHJvdmlkZXIoJ0RCJywgZnVuY3Rpb24gREJQcm92aWRlcigpIHtcblxuICAgICAgICB0aGlzLiRnZXQgPSBbICckY29yZG92YVNRTGl0ZScsICdBUEknLCAnJHEnLCBmdW5jdGlvbigkY29yZG92YVNRTGl0ZSwgQVBJLCAkcSkge1xuXG5cbiAgICAgICAgICAgIHZhciBkYjtcbiAgICAgICAgICAgIGlmICh3aW5kb3cuc3FsaXRlUGx1Z2luKSB7XG4gICAgICAgICAgICAgICAgZGIgPSAkY29yZG92YVNRTGl0ZS5vcGVuREIoJ2Zpc2tlYmFzZW4uZGInKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAod2luZG93Lm9wZW5EYXRhYmFzZSkge1xuICAgICAgICAgICAgICAgIGRiID0gd2luZG93Lm9wZW5EYXRhYmFzZSgnZmlza2ViYXNlbi5kYicsICcxLjAnLCAnZmlza2ViYXNlbicsIDEwKjEwMjQqMTAyNCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdOb3Qgc3VwcG9ydGVkIG9uIHRoaXMgZGV2aWNlLCBzb3JyeScpO1xuICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgdmFyIHRhYmxlRGVmID0ge1xuICAgICAgICAgICAgICAgICdBcmVhJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ29yZ2lkJywgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QnLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydrdycsICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbm90ZScsICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2MxJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2MyJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2MzJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ20xJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ20yJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ20zJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2xhdCcsICAgJ3JlYWwnXSxcbiAgICAgICAgICAgICAgICAgICAgWydsbmcnLCAgICdyZWFsJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnem9vbScsICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BudCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NhcicsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2VuZycsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2hjcCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21hcCcsICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd3c2MnLCAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydtb2QnLCAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkJywgICAgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdBcmVhX0Zpc2gnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2FpZCcsICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydmaWQnLCAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYW1vdW50JywgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NvbW1lbnQnLCAndGV4dCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnUHJvZHVjdCc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0MicsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ25vJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaW0nLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwZicsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2FpJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydyaScsICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2gnLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3ByaWNlJywgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydtb2QnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnc28nLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2hsJywgICAgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdDb3VudHknOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3MnLCAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkJywgICAndGV4dCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnTXVuaWNpcGFsaXR5JzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NJRCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ25hbWUnLCAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ0Zpc2gnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydtb2QnLCAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzbycsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydtYXgnLCAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpY29uJywgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaW1nJywgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2luJywgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydnZW8nLCAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnc2l6ZScsICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2xhdCcsICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZWMnLCAgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdSdWxlJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndmVyJywgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkJywgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1VzZXJfUHJvZHVjdCc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYXQnLCAgICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NvZGUnLCAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydmcicsICAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZnVsbG5hbWUnLCAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvdCcsICAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlZjEnLCAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydyZWYyJywgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0bycsICAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGlkJywgICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BkZicsICAgICAgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdVc2VyX0luZm8nOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VzZXJuYW1lJywgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbG9nZ2VkaW4nLCAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydJUDEnLCAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ0lQMicsICAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbmFtZScsICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydlbWFpbCcsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NyZWF0ZWQnLCAgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdVc2VyX051bWJlcic6IFtcbiAgICAgICAgICAgICAgICAgICAgWydudW1iZXInLCAndGV4dCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnVGVjaG5pcXVlJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QnLCAgICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkJywgICAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnc28nLCAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGUnLCAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2RhJywgICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpY29uJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaW1nMScsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ltZzInLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbWczJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsneW91dHViZScsICAndGV4dCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnT3JnYW5pemF0aW9uJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3AnLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd1cmwnLCAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2NvJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydtb2QnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndmF0JywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2RwJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydmdmEnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnb3JnJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21sJywgICAgICdpbnQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1BvaSc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnb3JnaWQnLCAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3R5cGUnLCAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwcmljZScsICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkJywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2xhJywgICAgICdyZWFsJ10sXG4gICAgICAgICAgICAgICAgICAgIFsnbG8nLCAgICAgJ3JlYWwnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1BvaV9UeXBlJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ljb24nLCAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnUG9seWdvbic6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnb3JnaWQnLCAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QnLCAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYycsICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd2ZXInLCAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydtb2QnLCAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwb2x5JywgICAgICAndGV4dCddXG4gICAgICAgICAgICAgICAgXVxuXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICB2YXIgY3JlYXRlT2JqZWN0ID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciByZXR2YWwgPSBbXTtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgZGF0YS5yb3dzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHZhbC5wdXNoKGRhdGEucm93cy5pdGVtKGkpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJldHZhbDtcbiAgICAgICAgICAgIH07XG5cblxuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHBvcHVsYXRlVGFibGU6IGZ1bmN0aW9uKHRhYmxlLCBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAoZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi50cmFuc2FjdGlvbihmdW5jdGlvbih0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoJ0RFTEVURSBGUk9NICcgKyB0YWJsZSArICc7Jyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpZCBpbiBkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBzaW5nbGVEYXRhID0gZGF0YVtpZF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbnNlcnREYXRhID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGFibGVEZWZbdGFibGVdLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbnNlcnREYXRhLnB1c2goc2luZ2xlRGF0YVt0YWJsZURlZlt0YWJsZV1baV1bMF1dKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSU5TRVJUIElOVE8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnVkFMVUVTKD8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyw/Jy5yZXBlYXQoaW5zZXJ0RGF0YS5sZW5ndGgtMSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKSddLmpvaW4oJyAnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHguZXhlY3V0ZVNxbChxdWVyeSwgaW5zZXJ0RGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBjbGVhblRhYmxlOiBmdW5jdGlvbih0YWJsZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24odHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKCdERUxFVEUgRlJPTSAnICsgdGFibGUgKyAnOycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogRHJvcHMgYWxsIHRhYmxlcyBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgICAgICAgKiBAbWV0aG9kIGNsZWFuXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgY2xlYW46IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIudHJhbnNhY3Rpb24oXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24odHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciB0YWJsZSBpbiB0YWJsZURlZil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKCdEUk9QIFRBQkxFIElGIEVYSVNUUyAnICsgdGFibGUgKyAnOycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbFxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtb3ZlZCBhbGwgdGFibGVzJyk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBJbml0aWFsaWVzIHRoZSB0YWJsZXMgaW4gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBpbml0XG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIudHJhbnNhY3Rpb24oIGZ1bmN0aW9uICh0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgdGFibGUgaW4gdGFibGVEZWYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJygnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiJyArIHRhYmxlRGVmW3RhYmxlXS5qb2luKCdfX19cIicpLnNwbGl0KCcsJykuam9pbignXCIgJykuc3BsaXQoJ19fXycpLmpvaW4oJywgJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLCBQUklNQVJZIEtFWSgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiJyArIHRhYmxlRGVmW3RhYmxlXVswXVswXSArICdcIicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKSk7J1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHguZXhlY3V0ZVNxbChxdWVyeSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG5cblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgYW4gYXJlYVxuICAgICAgICAgICAgICAgICAqIEBtZXRob2QgZ2V0QXJlYVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gaWRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBnZXRBcmVhOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBBcmVhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgaWQgPSA/J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksIFtpZF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbiggZnVuY3Rpb24gKGFyZWEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgb2JqZWN0ID0gY3JlYXRlT2JqZWN0KGFyZWEpWzBdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vVE9ETzogREIgc2hvdWxkIG5vdCBuZWVkIEFQSVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfcGhvdG9zKG9iamVjdC5vcmdpZClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihpbWFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmltYWdlcyA9IGltYWdlcztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChvYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKG9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGdldEFyZWFGaXNoZXM6IGZ1bmN0aW9uKGFpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoIGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIEFyZWFfRmlzaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0pPSU4gRmlzaCBPTiBBcmVhX0Zpc2guZmlkID0gRmlzaC5JRCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1dIRVJFIEFyZWFfRmlzaC5haWQgPSA/J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksIFthaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZWFyY2hlcyB0aGUgZGF0YWJhc2UgdXNpbmcgYSBxdWVyeVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogVGhlIHF1ZXJ5IGlzIG1hdGNoZWQgdG8gYSBuYW1lIGFuZC9vciBrZXl3b3JkXG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBzZWFyY2hcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoc3RyaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbihzZWFyY2hzdHJpbmcsIGNvdW50eV9pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoIGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIEFyZWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSB0IExJS0UgPycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvdW50eV9pZCA/ICdBTkQgYzEgPSA/JzonJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ09SREVSIEJZIHQnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50eV9pZCA/IFsnJScgKyBzZWFyY2hzdHJpbmcgKyAnJScsIGNvdW50eV9pZF06WyclJyArIHNlYXJjaHN0cmluZyArICclJ10pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgYSBwcm9kdWN0XG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBnZXRQcm9kdWN0XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtJbnRlZ2VyfSBwcm9kdWN0X2lkXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZ2V0UHJvZHVjdDogZnVuY3Rpb24ocHJvZHVjdF9pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCBESVNUSU5DVCBQcm9kdWN0LiosJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS50IGFzIHJ1bGVfdCwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLnZlciBhcyBydWxlX3ZlciwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLmQgYXMgcnVsZV9kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBQcm9kdWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSk9JTiBSdWxlIE9OIFJ1bGUuSUQgPSBQcm9kdWN0LnJpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgSUQgPSA/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnT1JERVIgQlkgc28nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwcm9kdWN0X2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0cyBhbGwgcHJvZHVjdHMgZnJvbSBhbiBhcmVhXG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBnZXRQcm9kdWN0c0J5QXJlYVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gYXJlYV9pZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGdldFByb2R1Y3RzQnlBcmVhOiBmdW5jdGlvbihhcmVhX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIERJU1RJTkNUIFByb2R1Y3QuKiwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLnQgYXMgcnVsZV90LCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUudmVyIGFzIHJ1bGVfdmVyLCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUuZCBhcyBydWxlX2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIFByb2R1Y3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdKT0lOIFJ1bGUgT04gUnVsZS5JRCA9IFByb2R1Y3QucmknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBhaSA9ID8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdPUkRFUiBCWSBzbydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgW2FyZWFfaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRDb3VudGllczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIERJU1RJTkNUIENvdW50eS4qJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBDb3VudHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdKT0lOIEFyZWEgT04gQXJlYS5jMSA9IENvdW50eS5JRCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ09SREVSIEJZIENvdW50eS50J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGdldFVzZXJQcm9kdWN0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIFVzZXJfUHJvZHVjdC4qLCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUudCBhcyBydWxlX3QsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS52ZXIgYXMgcnVsZV92ZXIsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS5kIGFzIHJ1bGVfZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gVXNlcl9Qcm9kdWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTEVGVCBKT0lOIFByb2R1Y3QgT04gUHJvZHVjdC5JRCA9IFVzZXJfUHJvZHVjdC5waWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdMRUZUIEpPSU4gUnVsZSBPTiBSdWxlLklEID0gUHJvZHVjdC5yaSdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRGaXNoZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqIEZST00gRmlzaCdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRGaXNoOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqIEZST00gRmlzaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1dIRVJFIGlkID0gPydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpLCBbaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRUZWNobmlxdWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKiBGUk9NIFRlY2huaXF1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0VGVjaG5pcXVlOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqIEZST00gVGVjaG5pcXVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgSUQgPSA/J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksIFtpZF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSlbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRPcmdhbml6YXRpb246IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUICogRlJPTSBPcmdhbml6YXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBJRCA9ID8nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSwgW2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFVzZXJJbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gVXNlcl9JbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbiggZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdCh1c2VyKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFVzZXJOdW1iZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gVXNlcl9OdW1iZXInXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRQb2lzOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBQb2knLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBvcmdpZCA9ID8nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSwgW2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRQb2lUeXBlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIFBvaV9UeXBlJ1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbiggZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZ2V0UG9seWdvbnM6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIFBvbHlnb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBvcmdpZCA9ID8nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSwgW2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1dO1xuICAgIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5maWx0ZXJzJywgW10pXG4uZmlsdGVyKCdub2JycycsIGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBmdW5jdGlvbihpbnB1dCkge1xuICAgICAgICByZXR1cm4gaW5wdXQucmVwbGFjZSgvKDxicj5cXHMqKSsvZywgJzxicj4nKTtcbiAgICB9O1xufSk7XG4iLCIoZnVuY3Rpb24oYW5ndWxhciwgdW5kZWZpbmVkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS51cGRhdGUnLCBbJ2lmaXNrZS5hcGknLCAnaWZpc2tlLmRiJywgJ2lmaXNrZS51dGlscyddKVxuICAgIC5wcm92aWRlcignVXBkYXRlJywgZnVuY3Rpb24gVXBkYXRlUHJvdmlkZXIoKSB7XG5cblxuICAgICAgICB0aGlzLiRnZXQgPSBbXG4gICAgICAgICAgICAnQVBJJyxcbiAgICAgICAgICAgICdEQicsXG4gICAgICAgICAgICAnbG9jYWxTdG9yYWdlJyxcbiAgICAgICAgICAgICckcScsXG4gICAgICAgICAgICAnJGlvbmljTG9hZGluZycsXG4gICAgICAgICAgICAnc2Vzc2lvbkRhdGEnLFxuICAgICAgICAgICAgZnVuY3Rpb24oQVBJLCBEQiwgbG9jYWxTdG9yYWdlLCAkcSwgJGlvbmljTG9hZGluZywgc2Vzc2lvbkRhdGEpIHtcblxuICAgICAgICAgICAgICAgIHZhciBMQVNUX1VQREFURSA9ICdsYXN0X3VwZGF0ZSc7XG5cbiAgICAgICAgICAgICAgICB2YXIgcG9wdWxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X2FyZWFzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZmlzaEFyciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIga2V5IGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpc2hlcyA9IGRhdGFba2V5XS5maXNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGZpc2hLZXkgaW4gZmlzaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXNoQXJyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdJRCc6IGtleSsnXycrZmlzaEtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWQ6IGZpc2hLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlkOiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBmaXNoZXNbZmlzaEtleV1bMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZmlzaGVzW2Zpc2hLZXldWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREIucG9wdWxhdGVUYWJsZSgnQXJlYScsIGRhdGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQi5wb3B1bGF0ZVRhYmxlKCdBcmVhX0Zpc2gnLCBmaXNoQXJyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgQXJlYScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfcHJvZHVjdHMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdQcm9kdWN0JywgZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBQcm9kdWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9jb3VudGllcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ0NvdW50eScsIGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgQ291bnR5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9tdW5pY2lwYWxpdGllcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ011bmljaXBhbGl0eScsIGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgTXVuaWNpcGFsaXR5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9maXNoZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdGaXNoJywgZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBGaXNoJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9ydWxlcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ1J1bGUnLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIFJ1bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X3RlY2huaXF1ZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdUZWNobmlxdWUnLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIFRlY2huaXF1ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfb3JnYW5pemF0aW9ucygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ09yZ2FuaXphdGlvbicsIGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgT3JnYW5pemF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9tYXBfcG9pcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ1BvaScsIGRhdGEpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgUG9pJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9tYXBfcG9pX3R5cGVzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIucG9wdWxhdGVUYWJsZSgnUG9pX1R5cGUnLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIFBvaV9UeXBlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9tYXBfcG9seWdvbnMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdQb2x5Z29uJywgZGF0YSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBQb2x5Z29uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgcG9wdWxhdGVVc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLnVzZXJfcHJvZHVjdHMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdVc2VyX1Byb2R1Y3QnLCBkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIFVzZXJfUHJvZHVjdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS51c2VyX2luZm8oKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW1iZXJzID0gZGF0YS5udW1iZXJzO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW1BcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbnVtYmVycy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1BcnIucHVzaCh7J251bWJlcic6IG51bWJlcnNbaV19KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLmFsbChbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERCLnBvcHVsYXRlVGFibGUoJ1VzZXJfSW5mbycsIFtkYXRhXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIFVzZXJfSW5mbycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERCLnBvcHVsYXRlVGFibGUoJ1VzZXJfTnVtYmVyJywgbnVtQXJyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgVXNlcl9OdW1iZXJzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIGNsZWFuVXNlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIERCLmNsZWFuVGFibGUoJ1VzZXJfUHJvZHVjdCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgREIuY2xlYW5UYWJsZSgnVXNlcl9OdW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIERCLmNsZWFuVGFibGUoJ1VzZXJfSW5mbycpXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbW92ZWQgdXNlciBpbmZvIGZyb20gZGF0YWJhc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ291bGQgbm90IHJlbW92ZSB1c2VyIGRhdGEgZnJvbSBkYXRhYmFzZSEnLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgdXBkYXRlRnVuYyA9IGZ1bmN0aW9uKGZvcmNlZCkge1xuICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXN0VXBkYXRlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYoIWZvcmNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFVwZGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXQoTEFTVF9VUERBVEUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFXZWVrID0gMTAwMCozNjAwKjI0Kjc7XG4gICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRUaW1lIC0gbGFzdFVwZGF0ZSA+IGFXZWVrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBEQi5pbml0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXplZCBEQiBzeXN0ZW0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZXNzaW9uRGF0YS50b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVsYXRlVXNlcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9wdWxhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgYWxsIHRoZSB0aGluZ3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KExBU1RfVVBEQVRFLCBjdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlcnIuZXJyb3JfY29kZSA9PT0gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRoZW50aWNhdGlvbiBmYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFNob3cgdG8gdXNlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhblVzZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVBJLnVzZXJfbG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignR290IGFuIGVycm9yLCB3aWxsIHRyeSB0byByZWNyZWF0ZSBhbGwgdGFibGVzOiAnLCBlcnIpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5jbGVhbigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIuaW5pdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9wdWxhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBhbGwgdGhlIHRoaW5ncycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldChMQVNUX1VQREFURSwgY3VycmVudFRpbWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0aWxsIGVycm9yLCBoYW5kbGUgaXQhJywgZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfdGVybXNfb2Zfc2VydmljZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldCgndG9zJyxkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9zbXNfdGVybXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odGVybXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCdzbXNfdGVybXMnLCB0ZXJtcyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfY29udGFjdF9pbmZvKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCdjb250YWN0SW5mbycsIGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmKHNlc3Npb25EYXRhLnRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBEQi5pbml0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXplZCBEQiBzeXN0ZW0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZXNzaW9uRGF0YS50b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1bGF0ZVVzZXIoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdub191cGRhdGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVGdW5jKCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgZm9yY2VkVXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZ1bmModHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAgICAgdXNlcl9sb2dvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2xlYW5Vc2VyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkudXNlcl9sb2dvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgdXNlcl9sb2dpbjogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gQVBJLnVzZXJfbG9naW4odXNlcm5hbWUsIHBhc3N3b3JkKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRnVuYygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGxhc3RfdXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2UuZ2V0KExBU1RfVVBEQVRFKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XTtcbiAgICB9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UudXRpbHMnLCBbXSlcblxuLmZhY3RvcnkoJ2xvY2FsU3RvcmFnZScsIFsnJHdpbmRvdycsIGZ1bmN0aW9uKCR3aW5kb3cpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZXQ6IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oa2V5LCB2YWx1ZSk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldDogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICByZXR1cm4gJHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xuICAgICAgICB9LFxuICAgICAgICByZW1vdmU6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShrZXkpO1xuICAgICAgICB9XG4gICAgfTtcbn1dKVxuLnNlcnZpY2UoJ3Nlc3Npb25EYXRhJywgWydsb2NhbFN0b3JhZ2UnLCBmdW5jdGlvbihsb2NhbFN0b3JhZ2UpIHtcbiAgICB0aGlzLnRva2VuID0gbG9jYWxTdG9yYWdlLmdldCgnc2Vzc2lvbicpO1xuXG4gICAgdGhpcy5zZXRUb2tlbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldCgnc2Vzc2lvbicsIHQpO1xuICAgICAgICB0aGlzLnRva2VuID0gdDtcbiAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuIHNldCcpO1xuICAgIH07XG4gICAgdGhpcy5kZWxldGVUb2tlbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlKCdzZXNzaW9uJyk7XG4gICAgICAgIHRoaXMudG9rZW4gPSBudWxsO1xuICAgICAgICBjb25zb2xlLmxvZygndG9rZW4gdW5zZXQnKTtcbiAgICB9O1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ25nQ29yZG92YVNtcycsIFtdKVxuLmRpcmVjdGl2ZSgnbmdDb3Jkb3ZhU21zJywgWyckY29yZG92YVNtcycsICckaW9uaWNQb3B1cCcsIGZ1bmN0aW9uKCRjb3Jkb3ZhU21zLCAkaW9uaWNQb3B1cCkge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycykge1xuICAgICAgICAgICAgZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAkaW9uaWNQb3B1cC5wcm9tcHQoe1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1Nrcml2IGluIGRpdHQgbmFtbicsXG4gICAgICAgICAgICAgICAgICAgIGlucHV0VHlwZTogJ3RleHQnXG4gICAgICAgICAgICAgICAgfSkudGhlbihmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtZXNzYWdlID0gJ0ZJU0tBICcgKyBhdHRycy5uZ0NvcmRvdmFTbXMgKyAnICcgKyBuYW1lO1xuICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNtcy5zZW5kKCc3MjQ1NicsIG1lc3NhZ2UsICdJTlRFTlQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdWNjdWVzcycpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5kaXJlY3RpdmVzJylcbiAgICAuZGlyZWN0aXZlKCdpZmlza2VJbnB1dCcsIGZ1bmN0aW9uKCkge1xuXHRyZXR1cm4ge1xuXHQgICAgcmVzdHJpY3Q6ICdFJyxcblx0ICAgIHRyYW5zY2x1ZGU6IHRydWUsXG5cblx0ICAgIHNjb3BlOiB7XG5cdFx0bmFtZTogJ0AnLFxuXHRcdGlkOiAnQCcsXG5cdFx0bGFiZWw6ICdAJyxcblx0XHRwbGFjZWhvbGRlcjogJ0AnLFxuXHRcdHR5cGU6ICdAJyxcblx0XHRuZ1BhdHRlcm46ICdAJyxcblx0XHRuZ01vZGVsOiAnPT8nXG5cblx0ICAgIH0sXG5cdCAgICB0ZW1wbGF0ZVVybDogJ2RpcmVjdGl2ZXMvaW5wdXRfZmllbGQvaWZpc2tlX2lucHV0Lmh0bWwnLFxuXHQgICAgY29udHJvbGxlcjogZnVuY3Rpb24oJHNjb3BlKSB7XG5cdFx0JHNjb3BlLmlkID0gJHNjb3BlLmlkIHx8ICRzY29wZS5uYW1lO1xuXHRcdCRzY29wZS50eXBlID0gJHNjb3BlLnR5cGUgfHwgJ3RleHQnO1xuXHQgICAgfVxuXHR9XG4gICAgfSlcbiIsImFuZ3VsYXIubW9kdWxlKCdzeXN0ZW1Ccm93c2VyJywgW10pXG4uZGlyZWN0aXZlKCdzeXN0ZW1Ccm93c2VyJywgWyckY29yZG92YUluQXBwQnJvd3NlcicsIGZ1bmN0aW9uKCRjb3Jkb3ZhSW5BcHBCcm93c2VyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHJzKSB7XG4gICAgICAgICAgICBlbC5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgJGNvcmRvdmFJbkFwcEJyb3dzZXIub3BlbihlbFswXS5ocmVmLCAnX3N5c3RlbScpO1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKVxuLmRpcmVjdGl2ZSgnZ2xvYmFsU3lzdGVtQnJvd3NlcicsIFsnJGNvcmRvdmFJbkFwcEJyb3dzZXInLCBmdW5jdGlvbigkY29yZG92YUluQXBwQnJvd3Nlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycykge1xuICAgICAgICAgICAgZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLnRhcmdldC5ocmVmICYmIGUudGFyZ2V0Lmhvc3QgIT09IHdpbmRvdy5sb2NhdGlvbi5ob3N0KSB7XG4gICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhSW5BcHBCcm93c2VyLm9wZW4oZS50YXJnZXQuaHJlZiwgJ19zeXN0ZW0nKTtcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==