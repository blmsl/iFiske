angular.module("ifiske",["ionic","ifiske.controllers","ifiske.directives","ifiske.api","ifiske.db","ifiske.utils","ifiske.update","ifiske.filters","ionic.ion.headerShrink","ngCordova","systemBrowser","ngCordovaSms","ngMessages","ImgCache"]).constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}).run(["$ionicPlatform","Update","ImgCache",function(e,t,n){e.ready(function(){window.ionic&&window.ionic.Keyboard&&window.ionic.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),n.$init(),t.update()})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","ImgCacheProvider",function(e,t,n,o){o.setOptions({debug:!0,usePersistentCache:!0}),o.manualInit=!0,n.views.forwardCache(!0),n.backButton.previousTitleText(!1).text(""),n.tabs.position("bottom");var r="/start/login";window.localStorage.getItem("session")&&(r="/menu/home"),t.otherwise(r),e.state("start",{url:"/start","abstract":!0,templateUrl:"components/start/start.html"}).state("start.login",{url:"/login",templateUrl:"components/login/login.html",controller:"LoginCtrl"}).state("start.register",{url:"/register",templateUrl:"components/register/register.html",controller:"RegisterCtrl"}).state("start.register.details",{url:"/details",templateUrl:"components/register/register_details.html"}).state("start.register.verify",{url:"/verify",templateUrl:"components/register/register_verify.html"}).state("menu",{url:"/menu","abstract":!0,templateUrl:"components/menu/menu.html",controller:"MenuCtrl"}).state("menu.home",{url:"/home",templateUrl:"components/home/home.html",controller:"HomeCtrl"}).state("menu.info",{url:"/info",templateUrl:"components/info/info.html"}).state("menu.bugs",{url:"/info",templateUrl:"components/menu/report.html"}).state("menu.contact",{url:"/contact",templateUrl:"components/contact/contact.html",controller:"ContactCtrl"}).state("menu.legal",{url:"/legal",templateUrl:"components/legal/legal.html",controller:"LegalCtrl"}).state("menu.about",{url:"/about",templateUrl:"components/about/about.html",controller:"AboutCtrl"}).state("menu.userinfo",{url:"/userinfo",controller:"UserCtrl",templateUrl:"components/user/user.html"}).state("menu.counties",{url:"/counties",templateUrl:"components/counties/counties.html",controller:"CountiesCtrl"}).state("menu.areas",{url:"/areas",params:{id:!1,county:!1,search:""},templateUrl:"components/area_list/area_list.html",controller:"AreasCtrl"}).state("menu.cards",{url:"/cards",templateUrl:"components/user_cards/user_cards.html",controller:"UserCardsCtrl"}).state("menu.favorites",{url:"/favorites",templateUrl:"components/favorites/favorites.html"}).state("menu.fishes",{url:"/fishes",templateUrl:"components/fishes/fishes.html",controller:"FishesCtrl"}).state("menu.fishdetail",{url:"/fishdetail/:id",params:{id:!1,fish:!1},templateUrl:"components/fish_detail/fish_detail.html",controller:"FishDetailCtrl"}).state("menu.techniques",{url:"/techniques",templateUrl:"components/techniques/techniques.html",controller:"TechniquesCtrl"}).state("menu.techniquedetail",{url:"/techniquedetail/:id",params:{id:!1,tech:!1},templateUrl:"components/technique_detail/technique_detail.html",controller:"TechniqueDetailCtrl"}).state("menu.report",{url:"/report",templateUrl:"components/report/report.html"}).state("areadetail2",{"abstract":!0,url:"/areadetail/:id",templateUrl:"components/area2/area.html",controller:"AreaCtrl"}).state("areadetail2.info",{url:"/info",views:{info:{templateUrl:"components/area/area.html"}}}).state("areadetail2.fishinfo",{url:"/fishinfo",views:{fishinfo:{templateUrl:"components/area_fish/area_fish.html"}}}).state("areadetail2.cards",{url:"/cards",views:{cards:{templateUrl:"components/area_cards/area_cards.html"}}})}]),angular.module("ifiske.controllers",[]),angular.module("ifiske.directives",[]),angular.module("ifiske.controllers").controller("AboutCtrl",["$scope","$cordovaAppVersion","$ionicPlatform","Update",function(e,t,n,o){e.version=e.dbDate="Ok√§nt",e.dbDate=o.last_update(),n.ready(function(){window.cordova&&t.getAppVersion().then(function(t){console.log(t),e.version=t})})}]),angular.module("ifiske.controllers").controller("AreaCtrl",["$scope","$ionicHistory","localStorage","$rootScope","$ionicViewSwitcher","$stateParams","DB","$ionicSlideBoxDelegate","$ionicModal",function(e,t,n,o,r,i,s,u,l){e.tabsBack=function(){t.viewHistory().currentView.index?o.$ionicGoBack():(r.nextDirection("back"),e.$emit("$ionicHistory.change",{historyId:n.get("homeHistoryId")}))},e.image_endpoint="http://www.ifiske.se",s.getArea(i.id).then(function(t){e.images=t.images,u.update(),e.area=t,s.getOrganization(t.orgid).then(function(t){e.org=t})},function(e){console.log(e)}),s.getAreaFishes(i.id).then(function(t){console.log(t),e.fishes=t},function(e){console.log(e)}),s.getProductsByArea(i.id).then(function(t){e.products=t},function(e){console.log(e)}),e.sortorder="-amount",e.smsterms=n.get("sms_terms"),e.predicate="so",l.fromTemplateUrl("components/area_cards/modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.sms_modal=t}),e.openModal=function(t){e.sms_modal.show(),e.product=t},e.closeModal=function(){e.sms_modal.hide()},e.showTerms=function(){e.showingterms=!e.showingterms},e.showingterms=!1,l.fromTemplateUrl("components/area_cards/rules_modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.rules_modal=t}),e.openRulesModal=function(t){e.rules_modal.show(),e.product=t},e.closeRulesModal=function(){e.rules_modal.hide()},e.$on("$destroy",function(){e.sms_modal.remove(),e.rules_modal.remove()})}]),angular.module("ifiske.controllers").controller("AreasCtrl",["$scope","$stateParams","$ionicScrollDelegate","DB",function(e,t,n,o){e.search={$:t.search},e.queryBy="$",e.county=t.county,o.search("",t.id).then(function(t){e.areas=t},function(e){console.log(e)}),e.clearSearch=function(){},e.scrollTop=function(){n.scrollTop()}}]),angular.module("ifiske.controllers").controller("ContactCtrl",["$scope","$state","localStorage",function(e,t,n){e.contactInfo=n.get("contactInfo")}]),angular.module("ifiske.controllers").controller("CountiesCtrl",["$scope","DB",function(e,t){t.getCounties().then(function(t){e.counties=t},function(e){console.log(e)})}]),angular.module("ifiske.controllers").controller("FishDetailCtrl",["$scope","$stateParams","DB",function(e,t,n){e.fish=t.fish,e.image_endpoint="http://www.ifiske.se",e.fish||n.getFish(t.id).then(function(t){e.fish=t,console.log(e.fish)},function(e){console.log(e)}),console.log(e.fish)}]),angular.module("ifiske.controllers").controller("FishesCtrl",["$scope","DB",function(e,t){e.sortorder="so",e.image_endpoint="http://www.ifiske.se",t.getFishes().then(function(t){e.fishes=t,e.default_img=t[0].img},function(e){console.log(e)})}]),angular.module("ifiske.controllers").controller("HomeCtrl",["$scope","$state","$ionicHistory","localStorage","sessionData",function(e,t,n,o,r){e.loggedIn=r,o.set("homeHistoryId",n.currentHistoryId()),e.myFunc=function(e){13!=e.keyCode||e.shiftKey||t.go("menu.areas",{search:e.srcElement.value})}}]),angular.module("ifiske.controllers").controller("LegalCtrl",["$scope","$state","localStorage",function(e,t,n){e.tos=n.get("tos")}]),angular.module("ifiske.controllers").controller("LoginCtrl",["$scope","$state","Update","$ionicLoading",function(e,t,n,o){e.signIn=function(r){o.show(),n.user_login(r.username.$viewValue,r.password.$viewValue).then(function(){o.hide(),r.$setValidity("loginError",!0),t.go("menu.home")},function(t){o.hide(),r.$setValidity("loginError",!1),e.error=t.response})}}]),angular.module("ifiske.controllers").controller("MenuCtrl",["$scope","$state","$ionicPopover","sessionData","Update",function(e,t,n,o,r){e.sessionData=o,n.fromTemplateUrl("components/menu/popover.html",{scope:e}).then(function(t){e.popover=t}),e.userinfo=function(){e.popover.hide(),t.go("menu.userinfo")},e.logout=function(){e.popover.hide(),r.user_logout(),t.go("start.login")},e.login=function(){e.popover.hide(),t.go("start.login")},e.register=function(){e.popover.hide(),t.go("start.register.details")},e.update=function(){r.forcedUpdate()}}]),angular.module("ifiske.controllers").controller("RegisterCtrl",["$scope","$state","$ionicLoading","$ionicScrollDelegate","API",function(e,t,n,o,r){var i;e.checkUsername=function(e){r.user_exists(e.$viewValue).then(function(t){e.$setValidity("nameTaken",!t.data.response)})},e.checkEmail=function(e){r.user_exists(null,e.$viewValue).then(function(t){e.$setValidity("emailTaken",!t.data.response)})},e.formErrors={},e.register=function(s){n.show(),e.phone=s.phone.$viewValue,i=s.username.$viewValue;var u=s.password.$viewValue,l=s.fullname.$viewValue,a=s.email.$viewValue;r.user_register(i,l,u,a,e.phone).then(function(){n.hide(),t.go("^.verify")},function(t){e.formErrors.registrationError=!0,o.scrollTop(!0),8==t.error_code&&s.email.$setValidity("invalidEmail",!1),9==t.error_code&&(e.checkUsername(s.username),e.checkEmail(s.email)),10==t.error_code&&s.phone.$setValidity("invalidPhone",!1),n.hide()})},e.verify=function(e){n.show();var o=e.vercode;r.user_confirm(i,o.$viewValue).then(function(){t.go("start.login"),o.$setValidity("verified",!0),n.hide()},function(){o.$setValidity("verified",!1),n.hide()})}}]),angular.module("ifiske.controllers").controller("TechniqueDetailCtrl",["$scope","$stateParams","DB","$ionicSlideBoxDelegate",function(e,t,n,o){if(e.image_endpoint="http://www.ifiske.se",e.tech=t.tech,e.images=[],e.tech){var r=e.tech;e.images=[r.img1,r.img2,r.img3].filter(function(e){return!/\/$/.test(e)}),o.update()}else n.getTechnique(t.id).then(function(t){e.images=[t.img1,t.img2,t.img3].filter(function(e){return!/\/$/.test(e)}),o.update(),e.tech=t})}]),angular.module("ifiske.controllers").controller("TechniquesCtrl",["$scope","DB",function(e,t){t.getTechniques().then(function(t){console.log(t),e.techniques=t}),e.image_endpoint="http://www.ifiske.se",e.sortorder="so"}]),angular.module("ifiske.controllers").controller("UserCtrl",["$scope","DB",function(e,t){t.getUserInfo().then(function(t){e.user=t}),t.getUserNumbers().then(function(t){e.numbers=t})}]),angular.module("ifiske.controllers").controller("UserCardsCtrl",["$scope","$stateParams","DB","$ionicModal",function(e,t,n,o){e.pred="-to",e.endpoint="https://www.ifiske.se",e.now=Date.now(),n.getUserProducts().then(function(t){e.products=t},function(e){console.log(e)}),o.fromTemplateUrl("components/area_cards/rules_modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.rules_modal=t}),e.openRulesModal=function(t){e.rules_modal.show(),console.log(t),e.product=t},e.closeRulesModal=function(){e.rules_modal.hide()},e.$on("$destroy",function(){e.rules_modal.remove()})}]),function(e){"use strict";e.module("ifiske.api",["ifiske.utils"]).provider("API",function(){this.base_url="https://www.ifiske.se/api/v2/api.php",this.$get=["$http","sessionData","localStorage","$q",function(t,n,o,r){var i=this.base_url,s=function(n){return r(function(o,r){t({method:"get",url:i,params:e.extend(n,{key:"0123456789abcdef"}),timeout:5e3,cache:!0}).success(function(e){"error"===e.status?r(e.message):o(e)}).error(function(e,t){r(0===t?new Error("Request timeout"):e)})})},u=function(t){var o=n.token;return s(e.extend(t,{s:o}))};return{get_municipalities:function(){return s({m:"get_municipalities"})},get_counties:function(){return s({m:"get_counties"})},user_exists:function(e,t){var n={m:"user_exists"};return"string"==typeof e&&(n.username=e),"string"==typeof t&&(n.email=t),s(n)},user_register:function(e,t,n,o,r){return s({m:"user_register",username:e,fullname:t,password:n,email:o,phone:r})},user_confirm:function(e,t){return s({m:"user_confirm",username:e,pin:t})},user_info:function(){return u({m:"user_info"})},user_login:function(e,t){return s({m:"user_login",username:e,password:t}).then(function(e){return n.setToken(e.data.response),e})},user_logout:function(){u({m:"user_logout"}).then(function(){n.deleteToken()})},user_products:function(){return u({m:"user_products"})},get_fishes:function(){return s({m:"get_fishes"})},get_techniques:function(){return s({m:"get_techniques"})},get_baits:function(){return s({m:"get_baits"})},get_organizations:function(e){return s({m:"get_organizations",orgid:e})},get_org_modified:function(e){return s({m:"get_org_modified",orgid:e})},get_areas:function(e){return s({m:"get_areas",areaid:e})},get_areas_modified:function(e){return s({m:"get_areas_modified",areaid:e})},get_products:function(e){return s({m:"get_products",areaid:e})},get_rules:function(e){return s({m:"get_rules",ruleid:e})},get_photos:function(e,t){return s({m:"get_photos",orgid:e,areaid:t})},get_map_pois:function(e){return s({m:"get_map_pois",orgid:e})},get_map_poi_types:function(){return s({m:"get_map_poi_types"})},get_map_polygons:function(e){return s({m:"get_map_polygons",orgid:e})},user_get_favorites:function(){return u({m:"user_get_favorites"})},get_terms_of_service:function(){return s({m:"get_terms_of_service"})},get_contact_info:function(){return s({m:"get_contact_info"})},get_engine_policies:function(){return s({m:"get_engine_policies"})},get_sms_terms:function(){return s({m:"get_sms_terms"})}}}]})}(window.angular),function(e,t){"use strict";e.module("ifiske.db",[]).provider("DB",function(){this.$get=["$cordovaSQLite","API","$q",function(e,n,o){var r;if(window.sqlitePlugin)r=e.openDB("fiskebasen.db");else{if(!window.openDatabase)return console.log("Not supported on this device, sorry"),t;r=window.openDatabase("fiskebasen.db","1.0","fiskebasen",10485760)}var i={Area:[["ID","int"],["orgid","int"],["t","text"],["kw","text"],["note","text"],["c1","int"],["c2","int"],["c3","int"],["m1","int"],["m2","int"],["m3","int"],["lat","real"],["lng","real"],["zoom","text"],["pnt","int"],["car","int"],["eng","int"],["hcp","int"],["map","text"],["wsc","int"],["mod","int"],["d","text"]],Area_Fish:[["ID","text"],["aid","int"],["fid","int"],["amount","int"],["comment","text"]],Product:[["ID","int"],["t","text"],["t2","text"],["no","text"],["im","text"],["pf","text"],["ai","int"],["ri","int"],["ch","int"],["price","int"],["mod","int"],["so","int"],["hl","text"]],County:[["ID","int"],["s","text"],["t","text"],["d","text"]],Municipality:[["ID","int"],["cID","int"],["name","text"]],Fish:[["ID","int"],["t","text"],["d","text"],["mod","int"],["so","int"],["max","int"],["icon","text"],["img","text"],["in","text"],["geo","text"],["size","text"],["lat","text"],["rec","text"]],Rule:[["ID","int"],["ver","int"],["d","text"],["t","text"]],User_Product:[["ID","int"],["at","int"],["code","int"],["fr","int"],["fullname","text"],["ot","text"],["ref1","int"],["ref2","int"],["t","text"],["to","int"],["pid","int"],["pdf","text"]],User_Info:[["ID","int"],["username","text"],["loggedin","text"],["IP1","text"],["IP2","text"],["name","text"],["email","text"],["created","text"]],User_Number:[["number","text"]],Technique:[["ID","int"],["t","text"],["d","text"],["so","int"],["de","text"],["da","text"],["icon","text"],["img1","text"],["img2","text"],["img3","text"],["youtube","text"]],Organization:[["ID","int"],["t","text"],["d","text"],["cp","text"],["url","text"],["co","int"],["mod","int"],["vat","int"],["dp","int"],["fva","int"],["org","int"],["ml","int"]]},s=function(e){for(var t=[],n=0;n<e.rows.length;++n)t.push(e.rows.item(n));return t};return{populateTable:function(e,t){return o(function(n,o){r.transaction(function(n){n.executeSql("DELETE FROM "+e+";");for(var o in t){for(var r=t[o],s=[],u=0;u<i[e].length;++u)s.push(r[i[e][u][0]]);var l=["INSERT INTO",e,"VALUES(?",",?".repeat(s.length-1),")"].join(" ");n.executeSql(l,s)}},o,n)})},cleanTable:function(e){return o(function(t,n){r.transaction(function(t){t.executeSql("DELETE FROM "+e+";")},n,t)})},clean:function(){return o(function(e,t){r.transaction(function(e){for(var t in i)e.executeSql("DROP TABLE IF EXISTS "+t+";")},t,e)}).then(function(){console.log("Removed all tables")})},init:function(){return o(function(e,t){r.transaction(function(e){for(var t in i){var n=["CREATE TABLE IF NOT EXISTS",t,"(",'"'+i[t].join('___"').split(",").join('" ').split("___").join(", "),", PRIMARY KEY(",'"'+i[t][0][0]+'"',"));"].join(" ");e.executeSql(n)}},t,e)})},getArea:function(t){return o(function(o){e.execute(r,["SELECT *","FROM Area","WHERE id = ?"].join(" "),[t]).then(function(e){var t=s(e)[0];n.get_photos(t.orgid).then(function(e){t.images=e.data.response,o(t)},function(){o(t)})})})},getAreaFishes:function(t){return o(function(n,o){e.execute(r,["SELECT *","FROM Area_Fish","JOIN Fish ON Area_Fish.fid = Fish.ID","WHERE Area_Fish.aid = ?"].join(" "),[t]).then(function(e){n(s(e))},o)})},search:function(t,n){return o(function(o,i){e.execute(r,["SELECT *","FROM Area","WHERE t LIKE ?",n?"AND c1 = ?":"","ORDER BY t"].join(" "),n?["%"+t+"%",n]:["%"+t+"%"]).then(function(e){o(s(e))},i)})},getProduct:function(t){return o(function(n,o){e.execute(r,["SELECT DISTINCT Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM Product","JOIN Rule ON Rule.ID = Product.ri","WHERE ID = ?","ORDER BY so"].join(" "),[t]).then(function(e){n(s(e))},o)})},getProductsByArea:function(t){return o(function(n,o){e.execute(r,["SELECT DISTINCT Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM Product","JOIN Rule ON Rule.ID = Product.ri","WHERE ai = ?","ORDER BY so"].join(" "),[t]).then(function(e){n(s(e))},o)})},getCounties:function(){return o(function(t,n){e.execute(r,["SELECT DISTINCT County.*","FROM County","JOIN Area ON Area.c1 = County.ID","ORDER BY County.t"].join(" ")).then(function(e){t(s(e))},n)})},getUserProducts:function(){return o(function(t,n){e.execute(r,["SELECT User_Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM User_Product","LEFT JOIN Product ON Product.ID = User_Product.pid","LEFT JOIN Rule ON Rule.ID = Product.ri"].join(" ")).then(function(e){t(s(e))},n)})},getFishes:function(){return o(function(t,n){e.execute(r,["SELECT * FROM Fish"].join(" ")).then(function(e){t(s(e))},n)})},getFish:function(t){return o(function(n,o){e.execute(r,["SELECT * FROM Fish","WHERE id = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getTechniques:function(){return o(function(t,n){e.execute(r,["SELECT * FROM Technique"].join(" ")).then(function(e){t(s(e))},n)})},getTechnique:function(t){return o(function(n,o){e.execute(r,["SELECT * FROM Technique","WHERE ID = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getOrganization:function(t){return o(function(n,o){e.execute(r,["SELECT * FROM Organization","WHERE ID = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getUserInfo:function(){return o(function(t,n){e.execute(r,["SELECT *","FROM User_Info"].join(" ")).then(function(e){t(s(e)[0])},n)})},getUserNumbers:function(){return o(function(t,n){e.execute(r,["SELECT *","FROM User_Number"].join(" ")).then(function(e){t(s(e))},n)})}}}]})}(window.angular),angular.module("ifiske.filters",[]).filter("nobrs",function(){return function(e){return e.replace(/(<br>\s*)+/g,"<br>")}}),function(e){"use strict";e.module("ifiske.update",["ifiske.api","ifiske.db","ifiske.utils"]).provider("Update",function(){this.$get=["API","DB","localStorage","$q","$ionicLoading","sessionData",function(e,t,n,o,r,i){var s="last_update",u=function(){return o.all([e.get_areas().then(function(e){var n=[];for(var r in e.data.response){var i=e.data.response[r].fish;for(var s in i)n.push({ID:r+"_"+s,fid:s,aid:r,amount:i[s][0],comment:i[s][1]})}return o.all([t.populateTable("Area",e.data.response),t.populateTable("Area_Fish",n)]).then(function(){console.log("Populated Area")},function(e){return console.log(e),o.reject(e)})}),e.get_products().then(function(e){return t.populateTable("Product",e.data.response).then(function(){console.log("Populated Product")},function(e){return console.log(e),o.reject(e)})}),e.get_counties().then(function(e){return t.populateTable("County",e.data.response).then(function(){console.log("Populated County")},function(e){return console.log(e),o.reject(e)})}),e.get_municipalities().then(function(e){return t.populateTable("Municipality",e.data.response).then(function(){console.log("Populated Municipality")},function(e){return console.log(e),o.reject(e)})}),e.get_fishes().then(function(e){return t.populateTable("Fish",e.data.response).then(function(){console.log("Populated Fish")},function(e){return console.log(e),o.reject(e)})}),e.get_rules().then(function(e){return t.populateTable("Rule",e.data.response).then(function(){console.log("Populated Rule")},function(e){return console.log(e),o.reject(e)})}),e.get_techniques().then(function(e){return t.populateTable("Technique",e.data.response).then(function(){console.log("Populated Technique")},function(e){return console.log(e),o.reject(e)})}),e.get_organizations().then(function(e){return t.populateTable("Organization",e.data.response).then(function(){console.log("Populated Organization")},function(e){return console.log(e),o.reject(e)})})])},l=function(){return o.all([e.user_products().then(function(e){return t.populateTable("User_Product",e.data.response).then(function(){console.log("Populated User_Product")},function(e){return console.log(e),o.reject(e)})}),e.user_info().then(function(e){for(var n=e.data.response.numbers,r=[],i=0;i<n.length;++i)r.push({number:n[i]});return o.all([t.populateTable("User_Info",[e.data.response]).then(function(){console.log("Populated User_Info")},function(t){return console.log(e.data.response),console.log(t),o.reject(t)}),t.populateTable("User_Number",r).then(function(){console.log("Populated User_Numbers")},function(e){return console.log(e),o.reject(e)})])})])},a=function(){return o.all([t.cleanTable("User_Product"),t.cleanTable("User_Number"),t.cleanTable("User_Info")]).then(function(){console.log("Removed user info from database")},function(e){console.log("Could not remove user data from database!",e)})},c=function(c){r.show();var f=Date.now(),d=0;c||(d=n.get(s));var m=6048e5;f-d>m?(t.init().then(function(){return console.log("Initialized DB system"),i.token?o.all([l(),u()]):u()}).then(function(){console.log("Populated all the things"),n.set(s,f),r.hide()},function(o){return 7!==o.error_code?(console.log("Got an error, will try to recreate all tables: ",o),t.clean().then(function(){return t.init()}).then(function(){return u()}).then(function(){console.log("Populated all the things"),n.set(s,f),r.hide()},function(e){console.log("Still error, handle it!",e),r.hide()})):(a(),e.user_logout(),r.hide(),void 0)}),e.get_terms_of_service().then(function(e){n.set("tos",e.data.response)}),e.get_sms_terms().then(function(e){n.set("sms_terms",e.data.response)}),e.get_contact_info().then(function(e){n.set("contactInfo",e.data.response)})):i.token?t.init().then(function(){console.log("Initialized DB system"),i.token&&l().then(function(){r.hide()},function(){r.hide()}),r.hide()}):(console.log("no_update"),r.hide())};return{update:function(){c()},forcedUpdate:function(){c(!0)},user_logout:function(){a(),e.user_logout()},user_login:function(t,n){return e.user_login(t,n).then(function(){c()})},last_update:function(){return n.get(s)}}}]})}(window.angular),angular.module("ifiske.utils",[]).factory("localStorage",["$window",function(e){return{set:function(t,n){e.localStorage.setItem(t,n)},get:function(t){return e.localStorage.getItem(t)},remove:function(t){e.localStorage.removeItem(t)}}}]).service("sessionData",["localStorage",function(e){this.token=e.get("session"),this.setToken=function(t){e.set("session",t),this.token=t,console.log("token set")},this.deleteToken=function(){e.remove("session"),this.token=null,console.log("token unset")}}]),angular.module("ngCordovaSms",[]).directive("ngCordovaSms",["$cordovaSms","$ionicPopup",function(e,t){"use strict";return{restrict:"A",link:function(n,o,r){o.on("click",function(n){n.preventDefault(),t.prompt({title:"Skriv in ditt namn",inputType:"text"}).then(function(t){var n="FISKA "+r.ngCordovaSms+" "+t;e.send("72456",n,"INTENT",function(){console.log("succuess")},function(e){console.log(e)})})})}}}]),angular.module("ifiske.directives").directive("ifiskeInput",function(){return{restrict:"E",transclude:!0,scope:{name:"@",id:"@",label:"@",placeholder:"@",type:"@",ngPattern:"@",ngModel:"=?"},templateUrl:"directives/input_field/ifiske_input.html",controller:function(e){e.id=e.id||e.name,e.type=e.type||"text"}}}),angular.module("systemBrowser",[]).directive("systemBrowser",["$cordovaInAppBrowser",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("click",function(t){e.open(n[0].href,"_system"),t.preventDefault()})}}}]).directive("globalSystemBrowser",["$cordovaInAppBrowser",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("click",function(t){t.target.href&&t.target.host!==window.location.host&&(e.open(t.target.href,"_system"),t.preventDefault())})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0L2Fib3V0X2NvbnRyb2xsZXIuanMiLCJhcmVhMi9hcmVhMl9jb250cm9sbGVyLmpzIiwiYXJlYV9saXN0L2FyZWFfbGlzdF9jb250cm9sbGVyLmpzIiwiY29udGFjdC9jb250YWN0X2NvbnRyb2xsZXIuanMiLCJjb3VudGllcy9jb3VudGllc19jb250cm9sbGVyLmpzIiwiZmlzaF9kZXRhaWwvZmlzaF9kZXRhaWxfY29udHJvbGxlci5qcyIsImZpc2hlcy9maXNoZXNfY29udHJvbGxlci5qcyIsImhvbWUvaG9tZV9jb250cm9sbGVyLmpzIiwibGVnYWwvbGVnYWxfY29udHJvbGxlci5qcyIsImxvZ2luL2xvZ2luX2NvbnRyb2xsZXIuanMiLCJtZW51L21lbnVfY29udHJvbGxlci5qcyIsInJlZ2lzdGVyL3JlZ2lzdGVyX2NvbnRyb2xsZXIuanMiLCJ0ZWNobmlxdWVfZGV0YWlsL3RlY2huaXF1ZV9kZXRhaWxfY29udHJvbGxlci5qcyIsInRlY2huaXF1ZXMvdGVjaG5pcXVlc19jb250cm9sbGVyLmpzIiwidXNlci91c2VyX2NvbnRyb2xsZXIuanMiLCJ1c2VyX2NhcmRzL3VzZXJfY2FyZHNfY29udHJvbGxlci5qcyIsImFwaS5qcyIsImRiLmpzIiwiZmlsdGVyLmpzIiwidXBkYXRlLmpzIiwidXRpbHMuanMiLCJpZmlza2Vfc21zL2lmaXNrZV9zbXMuanMiLCJpbnB1dF9maWVsZC9pZmlza2VfaW5wdXQuanMiLCJzeXN0ZW1fYnJvd3Nlci9zeXN0ZW1fYnJvd3Nlci5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiY29uc3RhbnQiLCJ0ZW1wbGF0ZSIsInJ1biIsIiRpb25pY1BsYXRmb3JtIiwiVXBkYXRlIiwiSW1nQ2FjaGUiLCJyZWFkeSIsIndpbmRvdyIsImlvbmljIiwiS2V5Ym9hcmQiLCJoaWRlS2V5Ym9hcmRBY2Nlc3NvcnlCYXIiLCJTdGF0dXNCYXIiLCJzdHlsZURlZmF1bHQiLCIkaW5pdCIsInVwZGF0ZSIsImNvbmZpZyIsIiRzdGF0ZVByb3ZpZGVyIiwiJHVybFJvdXRlclByb3ZpZGVyIiwiJGlvbmljQ29uZmlnUHJvdmlkZXIiLCJJbWdDYWNoZVByb3ZpZGVyIiwic2V0T3B0aW9ucyIsImRlYnVnIiwidXNlUGVyc2lzdGVudENhY2hlIiwibWFudWFsSW5pdCIsInZpZXdzIiwiZm9yd2FyZENhY2hlIiwiYmFja0J1dHRvbiIsInByZXZpb3VzVGl0bGVUZXh0IiwidGV4dCIsInRhYnMiLCJwb3NpdGlvbiIsImRlZmF1bHRVcmwiLCJsb2NhbFN0b3JhZ2UiLCJnZXRJdGVtIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJhYnN0cmFjdCIsInRlbXBsYXRlVXJsIiwiY29udHJvbGxlciIsInBhcmFtcyIsImlkIiwiY291bnR5Iiwic2VhcmNoIiwiZmlzaCIsInRlY2giLCJpbmZvIiwiZmlzaGluZm8iLCJjYXJkcyIsIiRzY29wZSIsIiRjb3Jkb3ZhQXBwVmVyc2lvbiIsInZlcnNpb24iLCJkYkRhdGUiLCJsYXN0X3VwZGF0ZSIsImNvcmRvdmEiLCJnZXRBcHBWZXJzaW9uIiwidGhlbiIsImNvbnNvbGUiLCJsb2ciLCIkaW9uaWNIaXN0b3J5IiwiJHJvb3RTY29wZSIsIiRpb25pY1ZpZXdTd2l0Y2hlciIsIiRzdGF0ZVBhcmFtcyIsIkRCIiwiJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSIsIiRpb25pY01vZGFsIiwidGFic0JhY2siLCJ2aWV3SGlzdG9yeSIsImN1cnJlbnRWaWV3IiwiaW5kZXgiLCIkaW9uaWNHb0JhY2siLCJuZXh0RGlyZWN0aW9uIiwiJGVtaXQiLCJoaXN0b3J5SWQiLCJnZXQiLCJpbWFnZV9lbmRwb2ludCIsImdldEFyZWEiLCJhcmVhIiwiaW1hZ2VzIiwiZ2V0T3JnYW5pemF0aW9uIiwib3JnaWQiLCJvcmciLCJlcnIiLCJnZXRBcmVhRmlzaGVzIiwiZmlzaGVzIiwiZ2V0UHJvZHVjdHNCeUFyZWEiLCJwcm9kdWN0cyIsInNvcnRvcmRlciIsInNtc3Rlcm1zIiwicHJlZGljYXRlIiwiZnJvbVRlbXBsYXRlVXJsIiwic2NvcGUiLCJhbmltYXRpb24iLCJtb2RhbCIsInNtc19tb2RhbCIsIm9wZW5Nb2RhbCIsInByb2R1Y3QiLCJzaG93IiwiY2xvc2VNb2RhbCIsImhpZGUiLCJzaG93VGVybXMiLCJzaG93aW5ndGVybXMiLCJydWxlc19tb2RhbCIsIm9wZW5SdWxlc01vZGFsIiwiY2xvc2VSdWxlc01vZGFsIiwiJG9uIiwicmVtb3ZlIiwiJGlvbmljU2Nyb2xsRGVsZWdhdGUiLCIkIiwicXVlcnlCeSIsImRhdGEiLCJhcmVhcyIsImNsZWFyU2VhcmNoIiwic2Nyb2xsVG9wIiwiJHN0YXRlIiwiY29udGFjdEluZm8iLCJnZXRDb3VudGllcyIsImNvdW50aWVzIiwiZ2V0RmlzaCIsImdldEZpc2hlcyIsImRlZmF1bHRfaW1nIiwiaW1nIiwic2Vzc2lvbkRhdGEiLCJsb2dnZWRJbiIsInNldCIsImN1cnJlbnRIaXN0b3J5SWQiLCJteUZ1bmMiLCIkZXZlbnQiLCJrZXlDb2RlIiwic2hpZnRLZXkiLCJnbyIsInNyY0VsZW1lbnQiLCJ2YWx1ZSIsInRvcyIsIiRpb25pY0xvYWRpbmciLCJzaWduSW4iLCJsb2dpbkZvcm0iLCJ1c2VyX2xvZ2luIiwidXNlcm5hbWUiLCIkdmlld1ZhbHVlIiwicGFzc3dvcmQiLCIkc2V0VmFsaWRpdHkiLCJlcnJvciIsInJlc3BvbnNlIiwiJGlvbmljUG9wb3ZlciIsInBvcG92ZXIiLCJ1c2VyaW5mbyIsImxvZ291dCIsInVzZXJfbG9nb3V0IiwibG9naW4iLCJyZWdpc3RlciIsImZvcmNlZFVwZGF0ZSIsIkFQSSIsImNoZWNrVXNlcm5hbWUiLCJpbnB1dCIsInVzZXJfZXhpc3RzIiwiY2hlY2tFbWFpbCIsImZvcm1FcnJvcnMiLCJmb3JtIiwicGhvbmUiLCJmdWxsbmFtZSIsImVtYWlsIiwidXNlcl9yZWdpc3RlciIsInJlZ2lzdHJhdGlvbkVycm9yIiwiZXJyb3JfY29kZSIsInZlcmlmeSIsInZlcmNvZGUiLCJ1c2VyX2NvbmZpcm0iLCJpbWcxIiwiaW1nMiIsImltZzMiLCJmaWx0ZXIiLCJlbCIsInRlc3QiLCJnZXRUZWNobmlxdWUiLCJnZXRUZWNobmlxdWVzIiwidGVjaG5pcXVlcyIsImdldFVzZXJJbmZvIiwidXNlciIsImdldFVzZXJOdW1iZXJzIiwibnVtYmVycyIsInByZWQiLCJlbmRwb2ludCIsIm5vdyIsIkRhdGUiLCJnZXRVc2VyUHJvZHVjdHMiLCJwcm92aWRlciIsInRoaXMiLCJiYXNlX3VybCIsIiRnZXQiLCIkaHR0cCIsIiRxIiwiYXBpX2NhbGwiLCJmdWxmaWxsIiwicmVqZWN0IiwibWV0aG9kIiwiZXh0ZW5kIiwia2V5IiwidGltZW91dCIsImNhY2hlIiwic3VjY2VzcyIsInN0YXR1cyIsIm1lc3NhZ2UiLCJFcnJvciIsInNlc3Npb25fYXBpX2NhbGwiLCJzZXNzaW9uIiwidG9rZW4iLCJzIiwiZ2V0X211bmljaXBhbGl0aWVzIiwibSIsImdldF9jb3VudGllcyIsImFyZ3MiLCJwaW4iLCJ1c2VyX2luZm8iLCJzZXRUb2tlbiIsImRlbGV0ZVRva2VuIiwidXNlcl9wcm9kdWN0cyIsImdldF9maXNoZXMiLCJnZXRfdGVjaG5pcXVlcyIsImdldF9iYWl0cyIsImdldF9vcmdhbml6YXRpb25zIiwiZ2V0X29yZ19tb2RpZmllZCIsImdldF9hcmVhcyIsImFyZWFpZCIsImdldF9hcmVhc19tb2RpZmllZCIsImdldF9wcm9kdWN0cyIsImdldF9ydWxlcyIsInJ1bGVpZCIsImdldF9waG90b3MiLCJnZXRfbWFwX3BvaXMiLCJnZXRfbWFwX3BvaV90eXBlcyIsImdldF9tYXBfcG9seWdvbnMiLCJ1c2VyX2dldF9mYXZvcml0ZXMiLCJnZXRfdGVybXNfb2Zfc2VydmljZSIsImdldF9jb250YWN0X2luZm8iLCJnZXRfZW5naW5lX3BvbGljaWVzIiwiZ2V0X3Ntc190ZXJtcyIsInVuZGVmaW5lZCIsIiRjb3Jkb3ZhU1FMaXRlIiwiZGIiLCJzcWxpdGVQbHVnaW4iLCJvcGVuREIiLCJvcGVuRGF0YWJhc2UiLCJ0YWJsZURlZiIsIkFyZWEiLCJBcmVhX0Zpc2giLCJQcm9kdWN0IiwiQ291bnR5IiwiTXVuaWNpcGFsaXR5IiwiRmlzaCIsIlJ1bGUiLCJVc2VyX1Byb2R1Y3QiLCJVc2VyX0luZm8iLCJVc2VyX051bWJlciIsIlRlY2huaXF1ZSIsIk9yZ2FuaXphdGlvbiIsImNyZWF0ZU9iamVjdCIsInJldHZhbCIsImkiLCJyb3dzIiwibGVuZ3RoIiwicHVzaCIsIml0ZW0iLCJwb3B1bGF0ZVRhYmxlIiwidGFibGUiLCJ0cmFuc2FjdGlvbiIsInR4IiwiZXhlY3V0ZVNxbCIsInNpbmdsZURhdGEiLCJpbnNlcnREYXRhIiwicXVlcnkiLCJyZXBlYXQiLCJqb2luIiwiY2xlYW5UYWJsZSIsImNsZWFuIiwiaW5pdCIsInNwbGl0IiwiZXhlY3V0ZSIsIm9iamVjdCIsImFpZCIsInNlYXJjaHN0cmluZyIsImNvdW50eV9pZCIsImdldFByb2R1Y3QiLCJwcm9kdWN0X2lkIiwiYXJlYV9pZCIsInJlcGxhY2UiLCJMQVNUX1VQREFURSIsInBvcHVsYXRlIiwiYWxsIiwiZmlzaEFyciIsImZpc2hLZXkiLCJJRCIsImZpZCIsImFtb3VudCIsImNvbW1lbnQiLCJwb3B1bGF0ZVVzZXIiLCJudW1BcnIiLCJudW1iZXIiLCJjbGVhblVzZXIiLCJ1cGRhdGVGdW5jIiwiZm9yY2VkIiwiY3VycmVudFRpbWUiLCJsYXN0VXBkYXRlIiwiYVdlZWsiLCJ0ZXJtcyIsImZhY3RvcnkiLCIkd2luZG93Iiwic2V0SXRlbSIsInJlbW92ZUl0ZW0iLCJzZXJ2aWNlIiwidCIsImRpcmVjdGl2ZSIsIiRjb3Jkb3ZhU21zIiwiJGlvbmljUG9wdXAiLCJyZXN0cmljdCIsImxpbmsiLCJhdHRycyIsIm9uIiwiZSIsInByZXZlbnREZWZhdWx0IiwicHJvbXB0IiwidGl0bGUiLCJpbnB1dFR5cGUiLCJuYW1lIiwibmdDb3Jkb3ZhU21zIiwic2VuZCIsInRyYW5zY2x1ZGUiLCJsYWJlbCIsInBsYWNlaG9sZGVyIiwidHlwZSIsIm5nUGF0dGVybiIsIm5nTW9kZWwiLCIkY29yZG92YUluQXBwQnJvd3NlciIs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TUFBQSxRQUNBLE9BQUEsU0FFQUMsT0FDQSxLQUFBLFFBQ0EsSUFBQSxTQUNBLElBQUEsU0FDQSxNQUFBLFFBQ0EsS0FBQSxRQUNBLE1BQUEsUUFDQSxPQUFBLFNBQ0EsTUFBQSxTQUNBLEtBQUEsU0FDQSxNQUFBLFNBQ0EsT0FBQSxTQUNBLE1BQUEsU0FDQSxNQUFBLFNBRUFDLE9BQ0EsS0FBQSxRQUNBLE1BQUEsUUFDQSxJQUFBLFNBQ0EsSUFBQSxTQUVBQyxlQUNBLEtBQUEsUUFDQSxLQUFBLFFBQ0EsT0FBQSxRQUNBLEtBQUEsUUFDQSxXQUFBLFNBQ0EsS0FBQSxTQUNBLE9BQUEsUUFDQSxPQUFBLFFBQ0EsSUFBQSxTQUNBLEtBQUEsUUFDQSxNQUFBLFFBQ0EsTUFBQSxTQUVBQyxZQUNBLEtBQUEsUUFDQSxXQUFBLFNBQ0EsV0FBQSxTQUNBLE1BQUEsU0FDQSxNQUFBLFNBQ0EsT0FBQSxTQUNBLFFBQUEsU0FDQSxVQUFBLFNBRUFDLGNBQ0EsU0FBQSxTQUVBQyxZQUNBLEtBQUEsUUFDQSxJQUFBLFNBQ0EsSUFBQSxTQUNBLEtBQUEsUUFDQSxLQUFBLFNBQ0EsS0FBQSxTQUNBLE9BQUEsU0FDQSxPQUFBLFNBQ0EsT0FBQSxTQUNBLE9BQUEsU0FDQSxVQUFBLFNBRUFDLGVBQ0EsS0FBQSxRQUNBLElBQUEsU0FDQSxJQUFBLFNBQ0EsS0FBQSxTQUNBLE1BQUEsU0FDQSxLQUFBLFFBQ0EsTUFBQSxRQUNBLE1BQUEsUUFDQSxLQUFBLFFBQ0EsTUFBQSxRQUNBLE1BQUEsUUFDQSxLQUFBLFNBSUFDLEVBQUEsU0FBQWxKLEdBRUEsSUFBQSxHQURBbUosTUFDQUMsRUFBQSxFQUFBQSxFQUFBcEosRUFBQXFKLEtBQUFDLFNBQUFGLEVBQ0FELEVBQUFJLEtBQUF2SixFQUFBcUosS0FBQUcsS0FBQUosR0FFQSxPQUFBRCxHQUtBLFFBQ0FNLGNBQUEsU0FBQUMsRUFBQTFKLEdBQ0EsTUFBQWlGLEdBQUEsU0FBQUUsRUFBQUMsR0FDQTZDLEVBQUEwQixZQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLFdBQUEsZUFBQUgsRUFBQSxJQUVBLEtBQUEsR0FBQS9OLEtBQUFxRSxHQUFBLENBR0EsSUFBQSxHQUZBOEosR0FBQTlKLEVBQUFyRSxHQUNBb08sS0FDQVgsRUFBQSxFQUFBQSxFQUFBZixFQUFBcUIsR0FBQUosU0FBQUYsRUFDQVcsRUFBQVIsS0FBQU8sRUFBQXpCLEVBQUFxQixHQUFBTixHQUFBLElBRUEsSUFBQVksSUFDQSxjQUNBTixFQUNBLFdBQ0EsS0FBQU8sT0FBQUYsRUFBQVQsT0FBQSxHQUNBLEtBQUFZLEtBQUEsSUFFQU4sR0FBQUMsV0FBQUcsRUFBQUQsS0FHQTNFLEVBQ0FELE1BS0FnRixXQUFBLFNBQUFULEdBQ0EsTUFBQXpFLEdBQUEsU0FBQUUsRUFBQUMsR0FDQTZDLEVBQUEwQixZQUFBLFNBQUFDLEdBQ0FBLEVBQUFDLFdBQUEsZUFBQUgsRUFBQSxNQUVBdEUsRUFDQUQsTUFRQWlGLE1BQUEsV0FDQSxNQUFBbkYsR0FBQSxTQUFBRSxFQUFBQyxHQUNBNkMsRUFBQTBCLFlBQ0EsU0FBQUMsR0FDQSxJQUFBLEdBQUFGLEtBQUFyQixHQUNBdUIsRUFBQUMsV0FBQSx3QkFBQUgsRUFBQSxNQUdBdEUsRUFDQUQsS0FHQXpJLEtBQUEsV0FDQUMsUUFBQUMsSUFBQSx5QkFRQXlOLEtBQUEsV0FDQSxNQUFBcEYsR0FBQSxTQUFBRSxFQUFBQyxHQUNBNkMsRUFBQTBCLFlBQUEsU0FBQUMsR0FDQSxJQUFBLEdBQUFGLEtBQUFyQixHQUFBLENBQ0EsR0FBQTJCLElBQ0EsNkJBQ0FOLEVBQ0EsSUFDQSxJQUFBckIsRUFBQXFCLEdBQUFRLEtBQUEsUUFBQUksTUFBQSxLQUFBSixLQUFBLE1BQUFJLE1BQUEsT0FBQUosS0FBQSxNQUNBLGlCQUNBLElBQUE3QixFQUFBcUIsR0FBQSxHQUFBLEdBQUEsSUFDQSxPQUNBUSxLQUFBLElBQ0FOLEdBQUFDLFdBQUFHLEtBR0E1RSxFQUNBRCxNQVdBckgsUUFBQSxTQUFBbkMsR0FDQSxNQUFBc0osR0FBQSxTQUFBRSxHQUNBNkMsRUFBQXVDLFFBQUF0QyxHQUNBLFdBQ0EsWUFDQSxnQkFDQWlDLEtBQUEsTUFBQXZPLElBQ0FlLEtBQUEsU0FBQXFCLEdBQ0EsR0FBQXlNLEdBQUF0QixFQUFBbkwsR0FBQSxFQUNBMkUsR0FBQTRFLFdBQUFrRCxFQUFBdE0sT0FDQXhCLEtBQUEsU0FBQXNCLEdBQ0F3TSxFQUFBeE0sT0FBQUEsRUFBQWdDLEtBQUFpQyxTQUNBa0QsRUFBQXFGLElBQ0EsV0FDQXJGLEVBQUFxRixVQU1Bbk0sY0FBQSxTQUFBb00sR0FDQSxNQUFBeEYsR0FBQSxTQUFBRSxFQUFBQyxHQUNBNEMsRUFBQXVDLFFBQUF0QyxHQUNBLFdBQ0EsaUJBQ0EsdUNBQ0EsMkJBQ0FpQyxLQUFBLE1BQUFPLElBQ0EvTixLQUFBLFNBQUFzRCxHQUNBbUYsRUFBQStELEVBQUFsSixLQUNBb0YsTUFXQXZKLE9BQUEsU0FBQTZPLEVBQUFDLEdBQ0EsTUFBQTFGLEdBQUEsU0FBQUUsRUFBQUMsR0FDQTRDLEVBQUF1QyxRQUFBdEMsR0FDQSxXQUNBLFlBQ0EsaUJBQ0EwQyxFQUFBLGFBQUEsR0FDQSxjQUNBVCxLQUFBLEtBQ0FTLEdBQUEsSUFBQUQsRUFBQSxJQUFBQyxJQUFBLElBQUFELEVBQUEsTUFDQWhPLEtBQUEsU0FBQXNELEdBQ0FtRixFQUFBK0QsRUFBQWxKLEtBQ0FvRixNQVNBd0YsV0FBQSxTQUFBQyxHQUNBLE1BQUE1RixHQUFBLFNBQUFFLEVBQUFDLEdBQ0E0QyxFQUFBdUMsUUFBQXRDLEdBQ0EsNkJBQ0Esb0JBQ0Esd0JBQ0EsbUJBQ0EsZUFDQSxvQ0FDQSxlQUNBLGVBQ0FpQyxLQUFBLE1BQ0FXLElBQ0FuTyxLQUFBLFNBQUFzRCxHQUNBbUYsRUFBQStELEVBQUFsSixLQUNBb0YsTUFTQTdHLGtCQUFBLFNBQUF1TSxHQUNBLE1BQUE3RixHQUFBLFNBQUFFLEVBQUFDLEdBQ0E0QyxFQUFBdUMsUUFBQXRDLEdBQ0EsNkJBQ0Esb0JBQ0Esd0JBQ0EsbUJBQ0EsZUFDQSxvQ0FDQSxlQUNBLGVBQ0FpQyxLQUFBLE1BQ0FZLElBQ0FwTyxLQUFBLFNBQUFzRCxHQUNBbUYsRUFBQStELEVBQUFsSixLQUNBb0YsTUFJQTlFLFlBQUEsV0FDQSxNQUFBMkUsR0FBQSxTQUFBRSxFQUFBQyxHQUNBNEMsRUFBQXVDLFFBQUF0QyxHQUNBLDJCQUNBLGNBQ0EsbUNBQ0EscUJBQ0FpQyxLQUFBLE1BQ0F4TixLQUFBLFNBQUFzRCxHQUNBbUYsRUFBQStELEVBQUFsSixLQUNBb0YsTUFJQVQsZ0JBQUEsV0FDQSxNQUFBTSxHQUFBLFNBQUFFLEVBQUFDLEdBQ0E0QyxFQUFBdUMsUUFBQXRDLEdBQ0EseUJBQ0Esb0JBQ0Esd0JBQ0EsbUJBQ0Esb0JBQ0EscURBQ0EsMENBQ0FpQyxLQUFBLE1BQ0F4TixLQUFBLFNBQUFzRCxHQUNBbUYsRUFBQStELEVBQUFsSixLQUNBb0YsTUFJQTNFLFVBQUEsV0FDQSxNQUFBd0UsR0FBQSxTQUFBRSxFQUFBQyxHQUNBNEMsRUFBQXVDLFFBQUF0QyxHQUNBLHNCQUNBaUMsS0FBQSxNQUNBeE4sS0FBQSxTQUFBc0QsR0FDQW1GLEVBQUErRCxFQUFBbEosS0FDQW9GLE1BSUE1RSxRQUFBLFNBQUE3RSxHQUNBLE1BQUFzSixHQUFBLFNBQUFFLEVBQUFDLEdBQ0E0QyxFQUFBdUMsUUFBQXRDLEdBQ0EscUJBQ0EsZ0JBQ0FpQyxLQUFBLE1BQUF2TyxJQUNBZSxLQUFBLFNBQUFzRCxHQUNBbUYsRUFBQStELEVBQUFsSixHQUFBLEtBQ0FvRixNQUlBbkIsY0FBQSxXQUNBLE1BQUFnQixHQUFBLFNBQUFFLEVBQUFDLEdBQ0E0QyxFQUFBdUMsUUFBQXRDLEdBQ0EsMkJBQ0FpQyxLQUFBLE1BQ0F4TixLQUFBLFNBQUFzRCxHQUNBbUYsRUFBQStELEVBQUFsSixLQUNBb0YsTUFHQXBCLGFBQUEsU0FBQXJJLEdBQ0EsTUFBQXNKLEdBQUEsU0FBQUUsRUFBQUMsR0FDQTRDLEVBQUF1QyxRQUFBdEMsR0FDQSwwQkFDQSxnQkFDQWlDLEtBQUEsTUFBQXZPLElBQ0FlLEtBQUEsU0FBQXNELEdBQ0FtRixFQUFBK0QsRUFBQWxKLEdBQUEsS0FDQW9GLE1BR0FuSCxnQkFBQSxTQUFBdEMsR0FDQSxNQUFBc0osR0FBQSxTQUFBRSxFQUFBQyxHQUNBNEMsRUFBQXVDLFFBQUF0QyxHQUNBLDZCQUNBLGdCQUNBaUMsS0FBQSxNQUFBdk8sSUFDQWUsS0FBQSxTQUFBc0QsR0FDQW1GLEVBQUErRCxFQUFBbEosR0FBQSxLQUNBb0YsTUFHQWpCLFlBQUEsV0FDQSxNQUFBYyxHQUFBLFNBQUFFLEVBQUFDLEdBQ0E0QyxFQUFBdUMsUUFBQXRDLEdBQ0EsV0FDQSxrQkFDQWlDLEtBQUEsTUFDQXhOLEtBQUEsU0FBQTBILEdBQ0FlLEVBQUErRCxFQUFBOUUsR0FBQSxLQUNBZ0IsTUFHQWYsZUFBQSxXQUNBLE1BQUFZLEdBQUEsU0FBQUUsRUFBQUMsR0FDQTRDLEVBQUF1QyxRQUFBdEMsR0FDQSxXQUNBLG9CQUNBaUMsS0FBQSxNQUNBeE4sS0FBQSxTQUFBc0QsR0FDQW1GLEVBQUErRCxFQUFBbEosS0FDQW9GLFlBUUEzTCxPQUFBVCxTQzFkQUEsUUFBQUMsT0FBQSxxQkFDQTRLLE9BQUEsUUFBQSxXQUNBLE1BQUEsVUFBQWpCLEdBQ0EsTUFBQUEsR0FBQW1JLFFBQUEsY0FBQSxXQ0hBLFNBQUEvUixHQUNBLFlBRUFBLEdBQUFDLE9BQUEsaUJBQUEsYUFBQSxZQUFBLGlCQUNBMkwsU0FBQSxTQUFBLFdBR0FDLEtBQUFFLE1BQ0EsTUFDQSxLQUNBLGVBQ0EsS0FDQSxnQkFDQSxjQUNBLFNBQUFyQyxFQUFBekYsRUFBQS9CLEVBQUErSixFQUFBekQsRUFBQVosR0FFQSxHQUFBb0ssR0FBQSxjQUVBQyxFQUFBLFdBQ0EsTUFBQWhHLEdBQUFpRyxLQUNBeEksRUFBQXNFLFlBQ0F0SyxLQUFBLFNBQUFzRCxHQUNBLEdBQUFtTCxLQUNBLEtBQUEsR0FBQTVGLEtBQUF2RixHQUFBQSxLQUFBaUMsU0FBQSxDQUNBLEdBQUEzRCxHQUFBMEIsRUFBQUEsS0FBQWlDLFNBQUFzRCxHQUFBekosSUFDQSxLQUFBLEdBQUFzUCxLQUFBOU0sR0FDQTZNLEVBQUE1QixNQUNBOEIsR0FBQTlGLEVBQUEsSUFBQTZGLEVBQ0FFLElBQUFGLEVBQ0FYLElBQUFsRixFQUNBZ0csT0FBQWpOLEVBQUE4TSxHQUFBLEdBQ0FJLFFBQUFsTixFQUFBOE0sR0FBQSxLQUlBLE1BQUFuRyxHQUFBaUcsS0FDQWpPLEVBQUF3TSxjQUFBLE9BQUF6SixFQUFBQSxLQUFBaUMsVUFDQWhGLEVBQUF3TSxjQUFBLFlBQUEwQixLQUVBek8sS0FBQSxXQUNBQyxRQUFBQyxJQUFBLG1CQUNBLFNBQUF3QixHQUVBLE1BREF6QixTQUFBQyxJQUFBd0IsR0FDQTZHLEVBQUFHLE9BQUFoSCxPQUdBc0UsRUFBQXlFLGVBQ0F6SyxLQUFBLFNBQUFzRCxHQUNBLE1BQUEvQyxHQUFBd00sY0FBQSxVQUFBekosRUFBQUEsS0FBQWlDLFVBQ0F2RixLQUFBLFdBQ0FDLFFBQUFDLElBQUEsc0JBQ0EsU0FBQXdCLEdBRUEsTUFEQXpCLFNBQUFDLElBQUF3QixHQUNBNkcsRUFBQUcsT0FBQWhILE9BR0FzRSxFQUFBMEQsZUFDQTFKLEtBQUEsU0FBQXNELEdBQ0EsTUFBQS9DLEdBQUF3TSxjQUFBLFNBQUF6SixFQUFBQSxLQUFBaUMsVUFDQXZGLEtBQUEsV0FDQUMsUUFBQUMsSUFBQSxxQkFDQSxTQUFBd0IsR0FFQSxNQURBekIsU0FBQUMsSUFBQXdCLEdBQ0E2RyxFQUFBRyxPQUFBaEgsT0FHQXNFLEVBQUF3RCxxQkFDQXhKLEtBQUEsU0FBQXNELEdBQ0EsTUFBQS9DLEdBQUF3TSxjQUFBLGVBQUF6SixFQUFBQSxLQUFBaUMsVUFDQXZGLEtBQUEsV0FDQUMsUUFBQUMsSUFBQSwyQkFDQSxTQUFBd0IsR0FFQSxNQURBekIsU0FBQUMsSUFBQXdCLEdBQ0E2RyxFQUFBRyxPQUFBaEgsT0FHQXNFLEVBQUFpRSxhQUNBakssS0FBQSxTQUFBc0QsR0FDQSxNQUFBL0MsR0FBQXdNLGNBQUEsT0FBQXpKLEVBQUFBLEtBQUFpQyxVQUNBdkYsS0FBQSxXQUNBQyxRQUFBQyxJQUFBLG1CQUNBLFNBQUF3QixHQUVBLE1BREF6QixTQUFBQyxJQUFBd0IsR0FDQTZHLEVBQUFHLE9BQUFoSCxPQUdBc0UsRUFBQTBFLFlBQ0ExSyxLQUFBLFNBQUFzRCxHQUNBLE1BQUEvQyxHQUFBd00sY0FBQSxPQUFBekosRUFBQUEsS0FBQWlDLFVBQ0F2RixLQUFBLFdBQ0FDLFFBQUFDLElBQUEsbUJBQ0EsU0FBQXdCLEdBRUEsTUFEQXpCLFNBQUFDLElBQUF3QixHQUNBNkcsRUFBQUcsT0FBQWhILE9BR0FzRSxFQUFBa0UsaUJBQ0FsSyxLQUFBLFNBQUFzRCxHQUNBLE1BQUEvQyxHQUFBd00sY0FBQSxZQUFBekosRUFBQUEsS0FBQWlDLFVBQ0F2RixLQUFBLFdBQ0FDLFFBQUFDLElBQUEsd0JBQ0EsU0FBQXdCLEdBRUEsTUFEQXpCLFNBQUFDLElBQUF3QixHQUNBNkcsRUFBQUcsT0FBQWhILE9BR0FzRSxFQUFBb0Usb0JBQ0FwSyxLQUFBLFNBQUFzRCxHQUNBLE1BQUEvQyxHQUFBd00sY0FBQSxlQUFBekosRUFBQUEsS0FBQWlDLFVBQ0F2RixLQUFBLFdBQ0FDLFFBQUFDLElBQUEsMkJBQ0EsU0FBQXdCLEdBRUEsTUFEQXpCLFNBQUFDLElBQUF3QixHQUNBNkcsRUFBQUcsT0FBQWhILFVBTUFxTixFQUFBLFdBQ0EsTUFBQXhHLEdBQUFpRyxLQUNBeEksRUFBQWdFLGdCQUNBaEssS0FBQSxTQUFBc0QsR0FDQSxNQUFBL0MsR0FBQXdNLGNBQUEsZUFBQXpKLEVBQUFBLEtBQUFpQyxVQUNBdkYsS0FBQSxXQUNBQyxRQUFBQyxJQUFBLDJCQUNBLFNBQUF3QixHQUVBLE1BREF6QixTQUFBQyxJQUFBd0IsR0FDQTZHLEVBQUFHLE9BQUFoSCxPQUdBc0UsRUFBQTZELFlBQ0E3SixLQUFBLFNBQUFzRCxHQUdBLElBQUEsR0FGQXNFLEdBQUF0RSxFQUFBQSxLQUFBaUMsU0FBQXFDLFFBQ0FvSCxLQUNBdEMsRUFBQSxFQUFBQSxFQUFBOUUsRUFBQWdGLFNBQUFGLEVBQ0FzQyxFQUFBbkMsTUFBQW9DLE9BQUFySCxFQUFBOEUsSUFFQSxPQUFBbkUsR0FBQWlHLEtBQ0FqTyxFQUFBd00sY0FBQSxhQUFBekosRUFBQUEsS0FBQWlDLFdBQ0F2RixLQUFBLFdBQ0FDLFFBQUFDLElBQUEsd0JBQ0EsU0FBQXdCLEdBR0EsTUFGQXpCLFNBQUFDLElBQUFvRCxFQUFBQSxLQUFBaUMsVUFDQXRGLFFBQUFDLElBQUF3QixHQUNBNkcsRUFBQUcsT0FBQWhILEtBRUFuQixFQUFBd00sY0FBQSxjQUFBaUMsR0FDQWhQLEtBQUEsV0FDQUMsUUFBQUMsSUFBQSwyQkFDQSxTQUFBd0IsR0FFQSxNQURBekIsU0FBQUMsSUFBQXdCLEdBQ0E2RyxFQUFBRyxPQUFBaEgsWUFPQXdOLEVBQUEsV0FDQSxNQUFBM0csR0FBQWlHLEtBQ0FqTyxFQUFBa04sV0FBQSxnQkFDQWxOLEVBQUFrTixXQUFBLGVBQ0FsTixFQUFBa04sV0FBQSxlQUVBek4sS0FBQSxXQUNBQyxRQUFBQyxJQUFBLG9DQUNBLFNBQUF3QixHQUNBekIsUUFBQUMsSUFBQSw0Q0FBQXdCLE1BS0F5TixFQUFBLFNBQUFDLEdBQ0F0SyxFQUFBckMsTUFFQSxJQUFBNE0sR0FBQXJILEtBQUFELE1BRUF1SCxFQUFBLENBQ0FGLEtBQ0FFLEVBQUE5USxFQUFBMEMsSUFBQW9OLEdBR0EsSUFBQWlCLEdBQUEsTUFDQUYsR0FBQUMsRUFBQUMsR0FDQWhQLEVBQUFvTixPQUNBM04sS0FBQSxXQUVBLE1BREFDLFNBQUFDLElBQUEseUJBQ0FnRSxFQUFBb0YsTUFDQWYsRUFBQWlHLEtBQ0FPLElBQ0FSLE1BR0FBLE1BSUF2TyxLQUFBLFdBQ0FDLFFBQUFDLElBQUEsNEJBQ0ExQixFQUFBNEYsSUFBQWtLLEVBQUFlLEdBQ0F2SyxFQUFBbkMsUUFDQSxTQUFBakIsR0FDQSxNQUFBLEtBQUFBLEVBQUFrRixZQU9BM0csUUFBQUMsSUFBQSxrREFBQXdCLEdBRUFuQixFQUFBbU4sUUFDQTFOLEtBQUEsV0FDQSxNQUFBTyxHQUFBb04sU0FHQTNOLEtBQUEsV0FDQSxNQUFBdU8sT0FHQXZPLEtBQUEsV0FDQUMsUUFBQUMsSUFBQSw0QkFDQTFCLEVBQUE0RixJQUFBa0ssRUFBQWUsR0FDQXZLLEVBQUFuQyxRQUNBLFNBQUFqQixHQUNBekIsUUFBQUMsSUFBQSwwQkFBQXdCLEdBQ0FvRCxFQUFBbkMsV0FyQkF1TSxJQUNBbEosRUFBQUosY0FDQWQsRUFBQW5DLE9BRkF1TSxVQXlCQWxKLEVBQUFpRix1QkFDQWpMLEtBQUEsU0FBQXNELEdBQ0E5RSxFQUFBNEYsSUFBQSxNQUFBZCxFQUFBQSxLQUFBaUMsWUFFQVMsRUFBQW9GLGdCQUNBcEwsS0FBQSxTQUFBd1AsR0FDQWhSLEVBQUE0RixJQUFBLFlBQUFvTCxFQUFBbE0sS0FBQWlDLFlBRUFTLEVBQUFrRixtQkFDQWxMLEtBQUEsU0FBQXNELEdBQ0E5RSxFQUFBNEYsSUFBQSxjQUFBZCxFQUFBQSxLQUFBaUMsYUFHQXJCLEVBQUFvRixNQUNBL0ksRUFBQW9OLE9BQ0EzTixLQUFBLFdBQ0FDLFFBQUFDLElBQUEseUJBQ0FnRSxFQUFBb0YsT0FDQXlGLElBQ0EvTyxLQUFBLFdBQ0E4RSxFQUFBbkMsUUFDQSxXQUNBbUMsRUFBQW5DLFNBR0FtQyxFQUFBbkMsVUFHQTFDLFFBQUFDLElBQUEsYUFDQTRFLEVBQUFuQyxRQUlBLFFBQ0FyRixPQUFBLFdBQ0E2UixLQUdBcEosYUFBQSxXQUNBb0osR0FBQSxJQUdBdkosWUFBQSxXQUNBc0osSUFDQWxKLEVBQUFKLGVBRUFYLFdBQUEsU0FBQUMsRUFBQUUsR0FDQSxNQUFBWSxHQUFBZixXQUFBQyxFQUFBRSxHQUNBcEYsS0FBQSxXQUNBbVAsT0FHQXRQLFlBQUEsV0FDQSxNQUFBckIsR0FBQTBDLElBQUFvTixVQUtBdlIsT0FBQVQsU0NqU0FBLFFBQUFDLE9BQUEsbUJBRUFrVCxRQUFBLGdCQUFBLFVBQUEsU0FBQUMsR0FDQSxPQUNBdEwsSUFBQSxTQUFBeUUsRUFBQWpFLEdBQ0E4SyxFQUFBbFIsYUFBQW1SLFFBQUE5RyxFQUFBakUsSUFFQTFELElBQUEsU0FBQTJILEdBQ0EsTUFBQTZHLEdBQUFsUixhQUFBQyxRQUFBb0ssSUFFQTNGLE9BQUEsU0FBQTJGLEdBQ0E2RyxFQUFBbFIsYUFBQW9SLFdBQUEvRyxRQUlBZ0gsUUFBQSxlQUFBLGVBQUEsU0FBQXJSLEdBQ0EySixLQUFBbUIsTUFBQTlLLEVBQUEwQyxJQUFBLFdBRUFpSCxLQUFBMkIsU0FBQSxTQUFBZ0csR0FDQXRSLEVBQUE0RixJQUFBLFVBQUEwTCxHQUNBM0gsS0FBQW1CLE1BQUF3RyxFQUNBN1AsUUFBQUMsSUFBQSxjQUVBaUksS0FBQTRCLFlBQUEsV0FDQXZMLEVBQUEwRSxPQUFBLFdBQ0FpRixLQUFBbUIsTUFBQSxLQUNBckosUUFBQUMsSUFBQSxtQkMxQkE1RCxRQUFBQyxPQUFBLG1CQUNBd1QsVUFBQSxnQkFBQSxjQUFBLGNBQUEsU0FBQUMsRUFBQUMsR0FDQSxZQUNBLFFBQ0FDLFNBQUEsSUFDQUMsS0FBQSxTQUFBaE8sRUFBQWlGLEVBQUFnSixHQUNBaEosRUFBQWlKLEdBQUEsUUFBQSxTQUFBQyxHQUNBQSxFQUFBQyxpQkFDQU4sRUFBQU8sUUFDQUMsTUFBQSxxQkFDQUMsVUFBQSxTQUNBMVEsS0FBQSxTQUFBMlEsR0FDQSxHQUFBekgsR0FBQSxTQUFBa0gsRUFBQVEsYUFBQSxJQUFBRCxDQUNBWCxHQUFBYSxLQUFBLFFBQUEzSCxFQUFBLFNBQUEsV0FDQWpKLFFBQUFDLElBQUEsYUFDQSxTQUFBd0IsR0FDQXpCLFFBQUFDLElBQUF3QixjQ2hCQXBGLFFBQUFDLE9BQUEscUJBQ0F3VCxVQUFBLGNBQUEsV0FDQSxPQUNBRyxTQUFBLElBQ0FZLFlBQUEsRUFFQTNPLE9BQ0F3TyxLQUFBLElBQ0ExUixHQUFBLElBQ0E4UixNQUFBLElBQ0FDLFlBQUEsSUFDQUMsS0FBQSxJQUNBQyxVQUFBLElBQ0FDLFFBQUEsTUFHQXJTLFlBQUEsMkNBQ0FDLFdBQUEsU0FBQVUsR0FDQUEsRUFBQVIsR0FBQVEsRUFBQVIsSUFBQVEsRUFBQWtSLEtBQ0FsUixFQUFBd1IsS0FBQXhSLEVBQUF3UixNQUFBLFdDbkJBM1UsUUFBQUMsT0FBQSxvQkFDQXdULFVBQUEsaUJBQUEsdUJBQUEsU0FBQXFCLEdBQ0EsWUFDQSxRQUNBbEIsU0FBQSxJQUNBQyxLQUFBLFNBQUFoTyxFQUFBaUYsR0FDQUEsRUFBQWlKLEdBQUEsUUFBQSxTQUFBQyxHQUNBYyxFQUFBQyxLQUFBakssRUFBQSxHQUFBa0ssS0FBQSxXQUNBaEIsRUFBQUMsd0JBS0FSLFVBQUEsdUJBQUEsdUJBQUEsU0FBQXFCLEdBQ0EsWUFDQSxRQUNBbEIsU0FBQSxJQUNBQyxLQUFBLFNBQUFoTyxFQUFBaUYsR0FDQUEsRUFBQWlKLEdBQUEsUUFBQSxTQUFBQyxHQUNBQSxFQUFBaUIsT0FBQUQsTUFBQWhCLEVBQUFpQixPQUFBQyxPQUFBelUsT0FBQTBVLFNBQUFELE9BQ0FKLEVBQUFDLEtBQUFmLEVBQUFpQixPQUFBRCxLQUFBLFdBQ0FoQixFQUFBQyIsImZpbGUiOiJhbGwubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gYW5ndWxhci5tb2R1bGUgaXMgYSBnbG9iYWwgcGxhY2UgZm9yIGNyZWF0aW5nLCByZWdpc3RlcmluZyBhbmQgcmV0cmlldmluZyBBbmd1bGFyIG1vZHVsZXNcbi8vICdpZmlza2UnIGlzIHRoZSBuYW1lIG9mIHRoaXMgYW5ndWxhciBtb2R1bGUgZXhhbXBsZSAoYWxzbyBzZXQgaW4gYSA8Ym9keT4gYXR0cmlidXRlIGluIGluZGV4Lmh0bWwpXG4vLyB0aGUgMm5kIHBhcmFtZXRlciBpcyBhbiBhcnJheSBvZiAncmVxdWlyZXMnXG4vLyAnaWZpc2tlLmNvbnRyb2xsZXJzJyBpcyBmb3VuZCBpbiBjb250cm9sbGVycy5qc1xuXG5hbmd1bGFyLm1vZHVsZSgnaWZpc2tlJywgW1xuICAgICdpb25pYycsXG4gICAgJ2lmaXNrZS5jb250cm9sbGVycycsXG4gICAgJ2lmaXNrZS5kaXJlY3RpdmVzJyxcbiAgICAnaWZpc2tlLmFwaScsXG4gICAgJ2lmaXNrZS5kYicsXG4gICAgJ2lmaXNrZS51dGlscycsXG4gICAgJ2lmaXNrZS51cGRhdGUnLFxuICAgICdpZmlza2UuZmlsdGVycycsXG4gICAgJ2lvbmljLmlvbi5oZWFkZXJTaHJpbmsnLFxuICAgICduZ0NvcmRvdmEnLFxuICAgICdzeXN0ZW1Ccm93c2VyJyxcbiAgICAnbmdDb3Jkb3ZhU21zJyxcbiAgICAnbmdNZXNzYWdlcycsXG4gICAgJ0ltZ0NhY2hlJ1xuXSlcbi5jb25zdGFudCgnJGlvbmljTG9hZGluZ0NvbmZpZycsIHtcbiAgICB0ZW1wbGF0ZTogJzxpb24tc3Bpbm5lcj48L2lvbi1zcGlubmVyPidcbiAgICAvLyBoaWRlT25TdGF0ZUNoYW5nZTogdHJ1ZVxufSlcbi5ydW4oWyckaW9uaWNQbGF0Zm9ybScsICdVcGRhdGUnLCAnSW1nQ2FjaGUnLCBmdW5jdGlvbigkaW9uaWNQbGF0Zm9ybSwgVXBkYXRlLCBJbWdDYWNoZSkge1xuICAgICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBIaWRlIHRoZSBhY2Nlc3NvcnkgYmFyIGJ5IGRlZmF1bHQgKHJlbW92ZSB0aGlzIHRvIHNob3cgdGhlIGFjY2Vzc29yeSBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgICAgIC8vIGZvciBmb3JtIGlucHV0cylcbiAgICAgICAgaWYod2luZG93LmlvbmljICYmIHdpbmRvdy5pb25pYy5LZXlib2FyZCkge1xuICAgICAgICAgICAgd2luZG93LmlvbmljLktleWJvYXJkLmhpZGVLZXlib2FyZEFjY2Vzc29yeUJhcih0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZih3aW5kb3cuU3RhdHVzQmFyKSB7XG4gICAgICAgICAgICAvLyBvcmcuYXBhY2hlLmNvcmRvdmEuc3RhdHVzYmFyIHJlcXVpcmVkXG4gICAgICAgICAgICBTdGF0dXNCYXIuc3R5bGVEZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBJbWdDYWNoZS4kaW5pdCgpO1xuICAgICAgICBVcGRhdGUudXBkYXRlKCk7XG4gICAgfSk7XG59XSlcblxuLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckaW9uaWNDb25maWdQcm92aWRlcicsICdJbWdDYWNoZVByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGlvbmljQ29uZmlnUHJvdmlkZXIsIEltZ0NhY2hlUHJvdmlkZXIpIHtcblxuICAgIEltZ0NhY2hlUHJvdmlkZXIuc2V0T3B0aW9ucyh7XG4gICAgICAgIGRlYnVnOiB0cnVlLFxuICAgICAgICB1c2VQZXJzaXN0ZW50Q2FjaGU6IHRydWVcbiAgICB9KTtcbiAgICBJbWdDYWNoZVByb3ZpZGVyLm1hbnVhbEluaXQgPSB0cnVlO1xuXG5cblxuICAgIC8vIENhY2hlIHZpZXdzIGluIHRoZSBmb3J3YXJkIHN0YWNrXG4gICAgJGlvbmljQ29uZmlnUHJvdmlkZXIudmlld3MuZm9yd2FyZENhY2hlKHRydWUpO1xuXG4gICAgLy8gQ2xlYXIgYmFjayBidXR0b24gZGVmYXVsdCB0ZXh0XG4gICAgJGlvbmljQ29uZmlnUHJvdmlkZXIuYmFja0J1dHRvbi5wcmV2aW91c1RpdGxlVGV4dChmYWxzZSkudGV4dCgnJyk7XG5cbiAgICAvLyBUYWJzIHBvc2l0aW9uXG4gICAgJGlvbmljQ29uZmlnUHJvdmlkZXIudGFicy5wb3NpdGlvbignYm90dG9tJyk7XG5cbiAgICAvKipcbiAgICAgKiBJb25pYyB1c2VzIEFuZ3VsYXJVSSBSb3V0ZXIuIExlYXJuIG1vcmUgaGVyZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXJcbiAgICAgKi9cblxuICAgIHZhciBkZWZhdWx0VXJsID0gJy9zdGFydC9sb2dpbic7XG4gICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbicpKSB7XG4gICAgICAgIGRlZmF1bHRVcmwgPSAnL21lbnUvaG9tZSc7XG4gICAgfVxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoZGVmYXVsdFVybCk7XG5cblxuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAvLyBBYnN0cmFjdCBwcmUtbWVudSBzdGF0ZS4gTmVlZGVkIGZvciBuYXZpZ2F0aW9uIGJldHdlZW4gbG9naW4gYW5kIHJlZ2lzdGVyIHZpZXdzLlxuICAgIC5zdGF0ZSgnc3RhcnQnLCB7XG4gICAgICAgIHVybDogJy9zdGFydCcsXG4gICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvc3RhcnQvc3RhcnQuaHRtbCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnc3RhcnQubG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9sb2dpbi9sb2dpbi5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnc3RhcnQucmVnaXN0ZXInLCB7XG4gICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnc3RhcnQucmVnaXN0ZXIuZGV0YWlscycsIHtcbiAgICAgICAgdXJsOiAnL2RldGFpbHMnLFxuXHR0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvcmVnaXN0ZXIvcmVnaXN0ZXJfZGV0YWlscy5odG1sJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdzdGFydC5yZWdpc3Rlci52ZXJpZnknLCB7XG4gICAgICAgIHVybDogJy92ZXJpZnknLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvcmVnaXN0ZXIvcmVnaXN0ZXJfdmVyaWZ5Lmh0bWwnXG4gICAgfSlcblxuICAgIC8vIEFic3RyYWN0IG1lbnUgc3RhdGUuIFwiUm9vdFwiIHN0YXRlIG9uY2Ugd2UncmUgcGFzdCB0aGUgbG9naW4gc3RhdGUuXG4gICAgLnN0YXRlKCdtZW51Jywge1xuICAgICAgICB1cmw6ICcvbWVudScsXG4gICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvbWVudS9tZW51Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTWVudUN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuaG9tZScsIHtcbiAgICAgICAgdXJsOiAnL2hvbWUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuaW5mbycsIHtcbiAgICAgICAgdXJsOiAnL2luZm8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvaW5mby9pbmZvLmh0bWwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuYnVncycsIHtcbiAgICAgICAgdXJsOiAnL2luZm8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvbWVudS9yZXBvcnQuaHRtbCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5jb250YWN0Jywge1xuICAgICAgICB1cmw6ICcvY29udGFjdCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9jb250YWN0L2NvbnRhY3QuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb250YWN0Q3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5sZWdhbCcsIHtcbiAgICAgICAgdXJsOiAnL2xlZ2FsJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2xlZ2FsL2xlZ2FsLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTGVnYWxDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmFib3V0Jywge1xuICAgICAgICB1cmw6ICcvYWJvdXQnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvYWJvdXQvYWJvdXQuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBYm91dEN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUudXNlcmluZm8nLCB7XG4gICAgICAgIHVybDogJy91c2VyaW5mbycsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ3RybCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy91c2VyL3VzZXIuaHRtbCcsXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuY291bnRpZXMnLCB7XG4gICAgICAgIHVybDogJy9jb3VudGllcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9jb3VudGllcy9jb3VudGllcy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0NvdW50aWVzQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5hcmVhcycsIHtcbiAgICAgICAgdXJsOiAnL2FyZWFzJyxcbiAgICAgICAgcGFyYW1zOiB7J2lkJzogZmFsc2UsICdjb3VudHknOiBmYWxzZSwgJ3NlYXJjaCc6ICcnfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWFfbGlzdC9hcmVhX2xpc3QuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcmVhc0N0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuY2FyZHMnLCB7XG4gICAgICAgIHVybDogJy9jYXJkcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy91c2VyX2NhcmRzL3VzZXJfY2FyZHMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ2FyZHNDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmZhdm9yaXRlcycsIHtcbiAgICAgICAgdXJsOiAnL2Zhdm9yaXRlcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9mYXZvcml0ZXMvZmF2b3JpdGVzLmh0bWwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuZmlzaGVzJywge1xuICAgICAgICB1cmw6ICcvZmlzaGVzJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2Zpc2hlcy9maXNoZXMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdGaXNoZXNDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmZpc2hkZXRhaWwnLCB7XG4gICAgICAgIHVybDogJy9maXNoZGV0YWlsLzppZCcsXG4gICAgICAgIHBhcmFtczogeydpZCc6IGZhbHNlLCAnZmlzaCc6IGZhbHNlfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2Zpc2hfZGV0YWlsL2Zpc2hfZGV0YWlsLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnRmlzaERldGFpbEN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUudGVjaG5pcXVlcycsIHtcbiAgICAgICAgdXJsOiAnL3RlY2huaXF1ZXMnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvdGVjaG5pcXVlcy90ZWNobmlxdWVzLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnVGVjaG5pcXVlc0N0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUudGVjaG5pcXVlZGV0YWlsJywge1xuICAgICAgICB1cmw6ICcvdGVjaG5pcXVlZGV0YWlsLzppZCcsXG4gICAgICAgIHBhcmFtczogeydpZCc6IGZhbHNlLCAndGVjaCc6IGZhbHNlfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL3RlY2huaXF1ZV9kZXRhaWwvdGVjaG5pcXVlX2RldGFpbC5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1RlY2huaXF1ZURldGFpbEN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUucmVwb3J0Jywge1xuICAgICAgICB1cmw6ICcvcmVwb3J0JyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL3JlcG9ydC9yZXBvcnQuaHRtbCdcbiAgICB9KVxuXG4gICAgLnN0YXRlKCdhcmVhZGV0YWlsMicsIHtcbiAgICAgICAgYWJzdHJhY3Q6dHJ1ZSxcbiAgICAgICAgdXJsOiAnL2FyZWFkZXRhaWwvOmlkJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWEyL2FyZWEuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcmVhQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnYXJlYWRldGFpbDIuaW5mbycsIHtcbiAgICAgICAgdXJsOiAnL2luZm8nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ2luZm8nOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWEvYXJlYS5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2FyZWFkZXRhaWwyLmZpc2hpbmZvJywge1xuICAgICAgICB1cmw6ICcvZmlzaGluZm8nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ2Zpc2hpbmZvJzoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9hcmVhX2Zpc2gvYXJlYV9maXNoLmh0bWwnXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KVxuICAgIC5zdGF0ZSgnYXJlYWRldGFpbDIuY2FyZHMnLCB7XG4gICAgICAgIHVybDogJy9jYXJkcycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAnY2FyZHMnOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWFfY2FyZHMvYXJlYV9jYXJkcy5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSk7XG59XSk7XG5cbmFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnLCBbXSk7XG5hbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmRpcmVjdGl2ZXMnLCBbXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbiAgICAuY29udHJvbGxlcignQWJvdXRDdHJsJywgWyckc2NvcGUnLCckY29yZG92YUFwcFZlcnNpb24nLCAnJGlvbmljUGxhdGZvcm0nLCAnVXBkYXRlJywgZnVuY3Rpb24oJHNjb3BlLCAkY29yZG92YUFwcFZlcnNpb24sICRpb25pY1BsYXRmb3JtLCBVcGRhdGUpIHtcblx0JHNjb3BlLnZlcnNpb24gPSAkc2NvcGUuZGJEYXRlID0gJ09rw6RudCc7XG4gICAgJHNjb3BlLmRiRGF0ZSA9IFVwZGF0ZS5sYXN0X3VwZGF0ZSgpO1xuXG5cdCRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuXHQgICAgaWYgKHdpbmRvdy5jb3Jkb3ZhKSB7XG5cdFx0JGNvcmRvdmFBcHBWZXJzaW9uLmdldEFwcFZlcnNpb24oKS50aGVuKGZ1bmN0aW9uKHZlcnNpb24pIHtcblx0XHQgICAgY29uc29sZS5sb2codmVyc2lvbik7XG5cdFx0ICAgICRzY29wZS52ZXJzaW9uID0gdmVyc2lvbjtcblx0XHR9KTtcblx0ICAgIH1cblx0fSk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdBcmVhQ3RybCcsIFtcbiAgICAnJHNjb3BlJyxcbiAgICAnJGlvbmljSGlzdG9yeScsXG4gICAgJ2xvY2FsU3RvcmFnZScsXG4gICAgJyRyb290U2NvcGUnLFxuICAgICckaW9uaWNWaWV3U3dpdGNoZXInLFxuICAgICckc3RhdGVQYXJhbXMnLFxuICAgICdEQicsXG4gICAgJyRpb25pY1NsaWRlQm94RGVsZWdhdGUnLFxuICAgICckaW9uaWNNb2RhbCcsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkaW9uaWNIaXN0b3J5LCBsb2NhbFN0b3JhZ2UsICRyb290U2NvcGUsICRpb25pY1ZpZXdTd2l0Y2hlciwgJHN0YXRlUGFyYW1zLCBEQiwgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSwgJGlvbmljTW9kYWwpIHtcblxuICAgICAgICAkc2NvcGUudGFic0JhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjdXJyZW50IHZpZXcgaXMgYXQgdGhlIHRvcCBvZiBpdHMgaGlzdG9yeSBzdGFja1xuICAgICAgICAgICAgaWYoISRpb25pY0hpc3Rvcnkudmlld0hpc3RvcnkoKS5jdXJyZW50Vmlldy5pbmRleCkge1xuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIFN3aXRjaCB0byB0aGUgaG9tZSBoaXN0b3J5IHN0YWNrXG4gICAgICAgICAgICAgICAgICogU2VlICRpb25pY0hpc3Rvcnkgc291cmNlIGZvciB0aGUgZXZlbiBoYW5kbGVyIHVzZWRcbiAgICAgICAgICAgICAgICAgKiBTZWUgaG9tZV9jb250cm9sbGVyLmpzIGZvciB0aGUgaGlzdG9yeUlkIHVzZWRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICAkaW9uaWNWaWV3U3dpdGNoZXIubmV4dERpcmVjdGlvbignYmFjaycpO1xuICAgICAgICAgICAgICAgICRzY29wZS4kZW1pdCgnJGlvbmljSGlzdG9yeS5jaGFuZ2UnLCB7XG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnlJZDogbG9jYWxTdG9yYWdlLmdldCgnaG9tZUhpc3RvcnlJZCcpXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIERlZmF1bHQgYmFjayBhY3Rpb25cbiAgICAgICAgICAgICAgICAkcm9vdFNjb3BlLiRpb25pY0dvQmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5pbWFnZV9lbmRwb2ludCA9ICdodHRwOi8vd3d3LmlmaXNrZS5zZSc7XG5cbiAgICAgICAgLy8gQXJlYWluZm9cbiAgICAgICAgREIuZ2V0QXJlYSgkc3RhdGVQYXJhbXMuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGFyZWEpIHtcbiAgICAgICAgICAgICRzY29wZS5pbWFnZXMgPSBhcmVhLmltYWdlcztcblxuICAgICAgICAgICAgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZS51cGRhdGUoKTtcbiAgICAgICAgICAgICRzY29wZS5hcmVhID0gYXJlYTtcblxuICAgICAgICAgICAgREIuZ2V0T3JnYW5pemF0aW9uKGFyZWEub3JnaWQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihvcmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JnID0gb3JnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgREIuZ2V0QXJlYUZpc2hlcygkc3RhdGVQYXJhbXMuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGZpc2hlcykge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZmlzaGVzKTtcbiAgICAgICAgICAgICRzY29wZS5maXNoZXMgPSBmaXNoZXM7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIERCLmdldFByb2R1Y3RzQnlBcmVhKCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24ocHJvZHVjdHMpIHtcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IHByb2R1Y3RzO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFyZWEgZmlzaGVzXG4gICAgICAgICRzY29wZS5zb3J0b3JkZXIgPSAnLWFtb3VudCc7XG5cbiAgICAgICAgLy9BcmVhX0NhcmRzXG4gICAgICAgICRzY29wZS5zbXN0ZXJtcyA9IGxvY2FsU3RvcmFnZS5nZXQoJ3Ntc190ZXJtcycpO1xuICAgICAgICAkc2NvcGUucHJlZGljYXRlID0gXCJzb1wiO1xuXG5cbiAgICAgICAgLy9TTVMtbW9kYWxcbiAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCdjb21wb25lbnRzL2FyZWFfY2FyZHMvbW9kYWwuaHRtbCcsIHtcbiAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCdcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgJHNjb3BlLnNtc19tb2RhbCA9IG1vZGFsO1xuICAgICAgICB9KTtcbiAgICAgICAgJHNjb3BlLm9wZW5Nb2RhbCA9IGZ1bmN0aW9uKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICRzY29wZS5zbXNfbW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3QgPSBwcm9kdWN0O1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuY2xvc2VNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnNtc19tb2RhbC5oaWRlKCk7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5zaG93VGVybXMgPSBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgICRzY29wZS5zaG93aW5ndGVybXMgPSAhJHNjb3BlLnNob3dpbmd0ZXJtcztcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnNob3dpbmd0ZXJtcyA9IGZhbHNlO1xuXG4gICAgICAgIC8vUnVsZXMgbW9kYWxcbiAgICAgICAgJGlvbmljTW9kYWwuZnJvbVRlbXBsYXRlVXJsKCdjb21wb25lbnRzL2FyZWFfY2FyZHMvcnVsZXNfbW9kYWwuaHRtbCcsIHtcbiAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXG4gICAgICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCdcbiAgICAgICAgfSkudGhlbihmdW5jdGlvbihtb2RhbCkge1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsID0gbW9kYWw7XG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUub3BlblJ1bGVzTW9kYWwgPSBmdW5jdGlvbihwcm9kdWN0KSB7XG4gICAgICAgICAgICAkc2NvcGUucnVsZXNfbW9kYWwuc2hvdygpO1xuICAgICAgICAgICAgJHNjb3BlLnByb2R1Y3QgPSBwcm9kdWN0O1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuY2xvc2VSdWxlc01vZGFsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUucnVsZXNfbW9kYWwuaGlkZSgpO1xuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS4kb24oJyRkZXN0cm95JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuc21zX21vZGFsLnJlbW92ZSgpO1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsLnJlbW92ZSgpO1xuICAgICAgICB9KTtcblxuICAgIH1cbl0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignQXJlYXNDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJyRpb25pY1Njcm9sbERlbGVnYXRlJyAsJ0RCJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGVQYXJhbXMsICRpb25pY1Njcm9sbERlbGVnYXRlICxEQikge1xuXG4gICAgJHNjb3BlLnNlYXJjaCA9IHsnJCc6ICRzdGF0ZVBhcmFtcy5zZWFyY2h9O1xuICAgICRzY29wZS5xdWVyeUJ5ID0gJyQnO1xuICAgICRzY29wZS5jb3VudHkgPSAkc3RhdGVQYXJhbXMuY291bnR5O1xuICAgIERCLnNlYXJjaCgnJywgJHN0YXRlUGFyYW1zLmlkKVxuICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5hcmVhcyA9IGRhdGE7XG4gICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgfSk7XG4gICAgJHNjb3BlLmNsZWFyU2VhcmNoID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vdG9kbzogY2xlYXIgc2VhcmNoIGZpZWxkXG4gICAgfTtcbiAgICAkc2NvcGUuc2Nyb2xsVG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRpb25pY1Njcm9sbERlbGVnYXRlLnNjcm9sbFRvcCgpO1xuICAgIH07XG5cbn1dKTtcblxuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignQ29udGFjdEN0cmwnLCBbJyRzY29wZScsICckc3RhdGUnLCAnbG9jYWxTdG9yYWdlJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsIGxvY2FsU3RvcmFnZSkge1xuICAgICAgICAkc2NvcGUuY29udGFjdEluZm8gPSBsb2NhbFN0b3JhZ2UuZ2V0KCdjb250YWN0SW5mbycpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignQ291bnRpZXNDdHJsJywgWyckc2NvcGUnLCAnREInLCBmdW5jdGlvbigkc2NvcGUsIERCKSB7XG4gICAgREIuZ2V0Q291bnRpZXMoKVxuICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJHNjb3BlLmNvdW50aWVzID0gZGF0YTtcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ0Zpc2hEZXRhaWxDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlUGFyYW1zJywgJ0RCJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGVQYXJhbXMsIERCKSB7XG4gICAgJHNjb3BlLmZpc2ggPSAkc3RhdGVQYXJhbXMuZmlzaDtcbiAgICAkc2NvcGUuaW1hZ2VfZW5kcG9pbnQgPSAnaHR0cDovL3d3dy5pZmlza2Uuc2UnO1xuICAgIGlmKCEkc2NvcGUuZmlzaCkge1xuICAgICAgICBEQi5nZXRGaXNoKCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmZpc2ggPSBkYXRhO1xuICAgIGNvbnNvbGUubG9nKCRzY29wZS5maXNoKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgY29uc29sZS5sb2coJHNjb3BlLmZpc2gpO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignRmlzaGVzQ3RybCcsIFsnJHNjb3BlJywgJ0RCJywgZnVuY3Rpb24oJHNjb3BlLCBEQikge1xuICAgICRzY29wZS5zb3J0b3JkZXIgPSAnc28nO1xuICAgICRzY29wZS5pbWFnZV9lbmRwb2ludCA9ICdodHRwOi8vd3d3LmlmaXNrZS5zZSc7XG4gICAgREIuZ2V0RmlzaGVzKClcbiAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICRzY29wZS5maXNoZXMgPSBkYXRhO1xuICAgICAgICAkc2NvcGUuZGVmYXVsdF9pbWcgPSBkYXRhWzBdLmltZztcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgW1xuICAgICckc2NvcGUnLFxuICAgICckc3RhdGUnLFxuICAgICckaW9uaWNIaXN0b3J5JyxcbiAgICAnbG9jYWxTdG9yYWdlJyxcbiAgICAnc2Vzc2lvbkRhdGEnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCAkaW9uaWNIaXN0b3J5LCBsb2NhbFN0b3JhZ2UsIHNlc3Npb25EYXRhKSB7XG5cbiAgICAgICAgJHNjb3BlLmxvZ2dlZEluID0gc2Vzc2lvbkRhdGE7XG5cbiAgICAgICAgLy8gQ3VycmVudCBoaXN0b3J5IHN0YWNrIElkLiBTZWUgYXJlYV9jb250cm9sbGVyIGZvciB1c2FnZS5cbiAgICAgICAgbG9jYWxTdG9yYWdlLnNldCgnaG9tZUhpc3RvcnlJZCcsICRpb25pY0hpc3RvcnkuY3VycmVudEhpc3RvcnlJZCgpKTtcblxuICAgICAgICAkc2NvcGUubXlGdW5jID0gZnVuY3Rpb24oJGV2ZW50KSB7XG4gICAgICAgICAgICBpZigkZXZlbnQua2V5Q29kZSA9PSAxMyAmJiAhJGV2ZW50LnNoaWZ0S2V5KSB7IC8vaWYgZW50ZXIta2V5XG4gICAgICAgICAgICAgICAgJHN0YXRlLmdvKCdtZW51LmFyZWFzJywge3NlYXJjaDogJGV2ZW50LnNyY0VsZW1lbnQudmFsdWV9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9O1xuICAgIH1cbl0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignTGVnYWxDdHJsJywgWyckc2NvcGUnLCAnJHN0YXRlJywgJ2xvY2FsU3RvcmFnZScsIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCBsb2NhbFN0b3JhZ2UpIHtcbiAgICAkc2NvcGUudG9zID0gbG9jYWxTdG9yYWdlLmdldCgndG9zJyk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBbJyRzY29wZScsICckc3RhdGUnLCAnVXBkYXRlJywgJyRpb25pY0xvYWRpbmcnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgVXBkYXRlLCAkaW9uaWNMb2FkaW5nKSB7XG4gICAgLy8kc2NvcGUudXNlciA9IHt9O1xuICAgICRzY29wZS5zaWduSW4gPSBmdW5jdGlvbihsb2dpbkZvcm0pIHtcbiAgICAgICAgJGlvbmljTG9hZGluZy5zaG93KCk7XG5cbiAgICAgICAgVXBkYXRlLnVzZXJfbG9naW4obG9naW5Gb3JtLnVzZXJuYW1lLiR2aWV3VmFsdWUsIGxvZ2luRm9ybS5wYXNzd29yZC4kdmlld1ZhbHVlKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgIGxvZ2luRm9ybS4kc2V0VmFsaWRpdHkoXCJsb2dpbkVycm9yXCIsIHRydWUpO1xuICAgICAgICAgICAgJHN0YXRlLmdvKCdtZW51LmhvbWUnKTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyb3IpIHtcbiAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgbG9naW5Gb3JtLiRzZXRWYWxpZGl0eShcImxvZ2luRXJyb3JcIiwgZmFsc2UpO1xuICAgICAgICAgICAgJHNjb3BlLmVycm9yID0gZXJyb3IucmVzcG9uc2U7XG4gICAgICAgIH0pO1xuICAgIH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdNZW51Q3RybCcsIFtcbiAgICAnJHNjb3BlJyxcbiAgICAnJHN0YXRlJyxcbiAgICAnJGlvbmljUG9wb3ZlcicsXG4gICAgJ3Nlc3Npb25EYXRhJyxcbiAgICAnVXBkYXRlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGlvbmljUG9wb3Zlciwgc2Vzc2lvbkRhdGEsIFVwZGF0ZSkge1xuXG4gICAgJHNjb3BlLnNlc3Npb25EYXRhID0gc2Vzc2lvbkRhdGE7XG5cbiAgICAkaW9uaWNQb3BvdmVyLmZyb21UZW1wbGF0ZVVybCgnY29tcG9uZW50cy9tZW51L3BvcG92ZXIuaHRtbCcsIHtcbiAgICAgICAgc2NvcGU6ICRzY29wZVxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocG9wb3Zlcikge1xuICAgICAgICAkc2NvcGUucG9wb3ZlciA9IHBvcG92ZXI7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUudXNlcmluZm8gPSBmdW5jdGlvbigpIHtcblx0JHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuXHQkc3RhdGUuZ28oJ21lbnUudXNlcmluZm8nKTtcbiAgICB9O1xuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0JHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuXHRVcGRhdGUudXNlcl9sb2dvdXQoKTtcblxuXHQkc3RhdGUuZ28oJ3N0YXJ0LmxvZ2luJyk7XG4gICAgfTtcbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbigpIHtcblx0JHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuXHQkc3RhdGUuZ28oJ3N0YXJ0LmxvZ2luJyk7XG4gICAgfTtcbiAgICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbigpIHtcblx0JHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuXHQkc3RhdGUuZ28oJ3N0YXJ0LnJlZ2lzdGVyLmRldGFpbHMnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBVcGRhdGUuZm9yY2VkVXBkYXRlKCk7XG4gICAgfTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4gICAgLmNvbnRyb2xsZXIoJ1JlZ2lzdGVyQ3RybCcsIFsnJHNjb3BlJywgJyRzdGF0ZScsICckaW9uaWNMb2FkaW5nJywgJyRpb25pY1Njcm9sbERlbGVnYXRlJywgJ0FQSScsIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCAkaW9uaWNMb2FkaW5nLCAkaW9uaWNTY3JvbGxEZWxlZ2F0ZSwgQVBJKSB7XG5cdFxuXHR2YXIgdXNlcm5hbWU7XG5cdFxuXHQvLyBMaXZlIGNoZWNrIGZvciB1c2VybmFtZSBhdmFpbGFiaWxpdHlcblx0JHNjb3BlLmNoZWNrVXNlcm5hbWUgPSBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgQVBJLnVzZXJfZXhpc3RzKGlucHV0LiR2aWV3VmFsdWUpXG5cdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdCAgICBpbnB1dC4kc2V0VmFsaWRpdHkoJ25hbWVUYWtlbicsICFkYXRhLmRhdGEucmVzcG9uc2UpO1xuXHRcdH0pO1xuXHR9XG5cdFxuXHQvLyBMaXZlIGNoZWNrIGZvciBlbWFpbCBhdmFpbGFiaWxpdHlcblx0JHNjb3BlLmNoZWNrRW1haWwgPSBmdW5jdGlvbihpbnB1dCkge1xuXHQgICAgQVBJLnVzZXJfZXhpc3RzKG51bGwsIGlucHV0LiR2aWV3VmFsdWUpXG5cdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdCAgICBpbnB1dC4kc2V0VmFsaWRpdHkoJ2VtYWlsVGFrZW4nLCAhZGF0YS5kYXRhLnJlc3BvbnNlKTtcblx0XHR9KTtcblx0fVxuXG5cdFxuXHQvLyBWYWxpZGF0aW9uIGVycm9ycyBub3QgdGllZCB0byBpbnB1dCBmaWVsZFxuXHQkc2NvcGUuZm9ybUVycm9ycyA9IHt9O1xuXG5cdC8qKlxuXHQgKiByZWdpc3RlclxuXHQgKiBTdWJtaXQgaGFuZGxlciBmb3IgdGhlIHJlZ2lzdHJhdGlvbiBmb3JtXG5cdCAqL1xuXHQkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbihmb3JtKSB7XG5cdCAgICAkaW9uaWNMb2FkaW5nLnNob3coKTtcblxuXHQgICAgLy8gU2F2ZSBwaG9uZSBudW1iZXIgZm9yIG5leHQgdmlld1xuXHQgICAgJHNjb3BlLnBob25lID0gZm9ybS5waG9uZS4kdmlld1ZhbHVlO1xuXG5cdCAgICAvLyBTYXZlIHVzZXJuYW1lIGZvciB2ZXJpZnkgc3VibWl0IGhhbmRsZXJcblx0ICAgIHVzZXJuYW1lID0gZm9ybS51c2VybmFtZS4kdmlld1ZhbHVlO1xuXHQgICAgXG5cdCAgICB2YXIgcGFzc3dvcmQgPSBmb3JtLnBhc3N3b3JkLiR2aWV3VmFsdWU7XG5cdCAgICB2YXIgZnVsbG5hbWUgPSBmb3JtLmZ1bGxuYW1lLiR2aWV3VmFsdWU7XG5cdCAgICB2YXIgZW1haWwgPSBmb3JtLmVtYWlsLiR2aWV3VmFsdWU7XG5cdCAgICBcblx0ICAgIEFQSS51c2VyX3JlZ2lzdGVyKHVzZXJuYW1lLCBmdWxsbmFtZSwgcGFzc3dvcmQsIGVtYWlsLCAkc2NvcGUucGhvbmUpXG5cdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkgeyBcblx0XHQgICAgLy8gU3VjY2VzczogR28gdG8gdmVyaWZ5IGFjY291bnQgdmlld1xuXHRcdCAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcblx0XHQgICAgJHN0YXRlLmdvKCdeLnZlcmlmeScpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHQgICAgLyoqXG5cdFx0ICAgICAqIEVycm9yOiBJbmZvcm0gdGhlIHVzZXIgYWJvdXQgZmFpbGVkIHJlZ2lzdHJhdGlvblxuXHRcdCAgICAgKiBTZWUgQVBJIGRvY3VtZW50YXRpb24gZm9yIGVycm9yIGNvZGVzXG5cdFx0ICAgICAqL1xuXHRcdCAgICAkc2NvcGUuZm9ybUVycm9ycy5yZWdpc3RyYXRpb25FcnJvciA9IHRydWU7XG5cdFx0ICAgICRpb25pY1Njcm9sbERlbGVnYXRlLnNjcm9sbFRvcCh0cnVlKTtcblx0XHQgICAgXG5cdFx0ICAgIC8vIEludmFsaWQgRW1haWxcblx0XHQgICAgaWYgKGVycm9yLmVycm9yX2NvZGUgPT0gOCkge1xuXHRcdFx0Zm9ybS5lbWFpbC4kc2V0VmFsaWRpdHkoJ2ludmFsaWRFbWFpbCcsIGZhbHNlKTtcblx0XHQgICAgfVxuXHRcdCAgICAvLyBVc2VybmFtZSBvciBFbWFpbCBhbHJlYWR5IHJlZ2lzdGVyZWRcblx0XHQgICAgaWYgKGVycm9yLmVycm9yX2NvZGUgPT0gOSkge1xuXHRcdFx0JHNjb3BlLmNoZWNrVXNlcm5hbWUoZm9ybS51c2VybmFtZSk7XG5cdFx0XHQkc2NvcGUuY2hlY2tFbWFpbChmb3JtLmVtYWlsKTtcblx0XHQgICAgfVxuXHRcdCAgICAvLyBJbnZhbGlkIHBob25lIG51bWJlclxuXHRcdCAgICBpZiAoZXJyb3IuZXJyb3JfY29kZSA9PSAxMCkge1xuXHRcdFx0Zm9ybS5waG9uZS4kc2V0VmFsaWRpdHkoJ2ludmFsaWRQaG9uZScsIGZhbHNlKTtcblx0XHQgICAgfVxuXG5cdFx0ICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cblx0LyoqXG5cdCAqIHZlcmlmeVxuXHQgKiBTdWJtaXQgaGFuZGxlciBmb3IgdGhlIHZlcmlmaWNhdGlvbiBmb3JtXG5cdCAqL1xuXHQkc2NvcGUudmVyaWZ5ID0gZnVuY3Rpb24oZm9ybSkge1xuXHQgICAgJGlvbmljTG9hZGluZy5zaG93KCk7XG5cblx0ICAgIHZhciB2ZXJjb2RlID0gZm9ybS52ZXJjb2RlO1xuXHQgICAgXG5cdCAgICBBUEkudXNlcl9jb25maXJtKHVzZXJuYW1lLCB2ZXJjb2RlLiR2aWV3VmFsdWUpXG5cdFx0LnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuXHRcdCAgICAkc3RhdGUuZ28oJ3N0YXJ0LmxvZ2luJyk7XG5cdFx0ICAgIHZlcmNvZGUuJHNldFZhbGlkaXR5KFwidmVyaWZpZWRcIiwgdHJ1ZSk7XG5cdFx0ICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuXG5cdFx0fSwgZnVuY3Rpb24oZXJyb3IpIHtcblx0XHQgICAgdmVyY29kZS4kc2V0VmFsaWRpdHkoXCJ2ZXJpZmllZFwiLCBmYWxzZSk7XG5cdFx0ICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuXHRcdH0pO1xuXHR9O1xuICAgIH1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ1RlY2huaXF1ZURldGFpbEN0cmwnLCBbJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnREInLCAnJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZScsIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlUGFyYW1zLCBEQiwgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSkge1xuICAgICRzY29wZS5pbWFnZV9lbmRwb2ludCA9ICdodHRwOi8vd3d3LmlmaXNrZS5zZSc7XG4gICAgJHNjb3BlLnRlY2ggPSAkc3RhdGVQYXJhbXMudGVjaDtcbiAgICAkc2NvcGUuaW1hZ2VzID0gW107XG5cbiAgICBpZighJHNjb3BlLnRlY2gpIHtcbiAgICAgICAgREIuZ2V0VGVjaG5pcXVlKCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmltYWdlcyA9IFtkYXRhLmltZzEsIGRhdGEuaW1nMiwgZGF0YS5pbWczXS5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIS9cXC8kLy50ZXN0KGVsKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgJHNjb3BlLnRlY2ggPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS50ZWNoO1xuICAgICAgICAkc2NvcGUuaW1hZ2VzID0gW2RhdGEuaW1nMSwgZGF0YS5pbWcyLCBkYXRhLmltZzNdLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgcmV0dXJuICEvXFwvJC8udGVzdChlbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUudXBkYXRlKCk7XG4gICAgfVxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignVGVjaG5pcXVlc0N0cmwnLCBbJyRzY29wZScsICdEQicsIGZ1bmN0aW9uKCRzY29wZSwgREIpIHtcbiAgICBEQi5nZXRUZWNobmlxdWVzKClcbiAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAkc2NvcGUudGVjaG5pcXVlcyA9IGRhdGE7XG4gICAgfSk7XG4gICAgJHNjb3BlLmltYWdlX2VuZHBvaW50ID0gJ2h0dHA6Ly93d3cuaWZpc2tlLnNlJztcbiAgICAkc2NvcGUuc29ydG9yZGVyID0gJ3NvJztcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignVXNlckN0cmwnLCBbJyRzY29wZScsICdEQicsIGZ1bmN0aW9uKCRzY29wZSwgREIpIHtcbiAgICBEQi5nZXRVc2VySW5mbygpXG4gICAgLnRoZW4oZnVuY3Rpb24odXNlcikge1xuICAgICAgICAkc2NvcGUudXNlciA9IHVzZXI7XG4gICAgfSk7XG4gICAgREIuZ2V0VXNlck51bWJlcnMoKVxuICAgIC50aGVuKGZ1bmN0aW9uKG51bWJlcnMpIHtcbiAgICAgICAgJHNjb3BlLm51bWJlcnMgPSBudW1iZXJzO1xuICAgIH0pO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignVXNlckNhcmRzQ3RybCcsIFtcbiAgICAnJHNjb3BlJyxcbiAgICAnJHN0YXRlUGFyYW1zJyxcbiAgICAnREInLFxuICAgICckaW9uaWNNb2RhbCcsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGVQYXJhbXMsIERCLCAkaW9uaWNNb2RhbCkge1xuICAgICAgICAkc2NvcGUucHJlZCA9ICctdG8nO1xuICAgICAgICAkc2NvcGUuZW5kcG9pbnQgPSAnaHR0cHM6Ly93d3cuaWZpc2tlLnNlJztcbiAgICAgICAgJHNjb3BlLm5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIERCLmdldFVzZXJQcm9kdWN0cygpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IGRhdGE7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy91c2UgdGhlIHNhbWUgbW9kYWwgYXMgaW4gYXJlYV9jYXJkc1xuICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ2NvbXBvbmVudHMvYXJlYV9jYXJkcy9ydWxlc19tb2RhbC5odG1sJywge1xuICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAkc2NvcGUucnVsZXNfbW9kYWwgPSBtb2RhbDtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5vcGVuUnVsZXNNb2RhbCA9IGZ1bmN0aW9uKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc19tb2RhbC5zaG93KCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9kdWN0KTtcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0ID0gcHJvZHVjdDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNsb3NlUnVsZXNNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5dKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyLCB1bmRlZmluZWQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmFwaScsIFsnaWZpc2tlLnV0aWxzJ10pXG4gICAgLnByb3ZpZGVyKCdBUEknLCBmdW5jdGlvbiBBUElQcm92aWRlcigpIHtcblxuICAgICAgICB0aGlzLmJhc2VfdXJsID0gJ2h0dHBzOi8vd3d3LmlmaXNrZS5zZS9hcGkvdjIvYXBpLnBocCc7XG5cbiAgICAgICAgdGhpcy4kZ2V0ID0gWyckaHR0cCcsICdzZXNzaW9uRGF0YScsICdsb2NhbFN0b3JhZ2UnLCAnJHEnLCBmdW5jdGlvbigkaHR0cCwgc2Vzc2lvbkRhdGEsIGxvY2FsU3RvcmFnZSwgJHEpIHtcbiAgICAgICAgICAgIHZhciBiYXNlX3VybCA9IHRoaXMuYmFzZV91cmw7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogIyBhcGlfY2FsbCAjXG4gICAgICAgICAgICAgKiBoYW5kbGVzIGh0dHAgcmVxdWVzdHNcbiAgICAgICAgICAgICAqIHJldHVybnMgYSAkaHR0cCBvYmplY3QgZm9yIHRoZSByZXF1ZXN0ZWQgYXBpIGNhbGxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIGFwaV9jYWxsID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAkaHR0cChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6J2dldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBiYXNlX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IGFuZ3VsYXIuZXh0ZW5kKHBhcmFtcywgeydrZXknOiAnMDEyMzQ1Njc4OWFiY2RlZid9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLy8gVG9EbzogUHJvcGVyIGxvZ2dpbmdcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVxdWVzdCB0aW1lb3V0JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiAjIHNlc3Npb25fYXBpX2NhbGwgI1xuICAgICAgICAgICAgICogd3JhcHBlciBmb3IgYXBpX2NhbGwgLSBpbnNlcnRzIHRoZSBzZXNzaW9uIHRva2VuIGludG8gcGFyYW1zXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBzZXNzaW9uX2FwaV9jYWxsID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBzZXNzaW9uRGF0YS50b2tlbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoYW5ndWxhci5leHRlbmQocGFyYW1zLCB7czogc2Vzc2lvbn0pKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2V0X211bmljaXBhbGl0aWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X211bmljaXBhbGl0aWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2NvdW50aWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X2NvdW50aWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9leGlzdHM6IGZ1bmN0aW9uKHVzZXJuYW1lLCBlbWFpbCkge1xuXHRcdCAgICB2YXIgYXJncyA9IHttOiAndXNlcl9leGlzdHMnfTtcblx0XHQgICAgXG5cdFx0ICAgIGlmICh0eXBlb2YgdXNlcm5hbWUgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRhcmdzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG5cdFx0ICAgIH1cblx0XHQgICAgaWYgKHR5cGVvZiBlbWFpbCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdGFyZ3MuZW1haWwgPSBlbWFpbDtcblx0XHQgICAgfVxuXHRcdCAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9yZWdpc3RlcjogZnVuY3Rpb24odXNlcm5hbWUsIGZ1bGxuYW1lLCBwYXNzd29yZCwgZW1haWwsIHBob25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ3VzZXJfcmVnaXN0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxsbmFtZTogZnVsbG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogcGhvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9jb25maXJtOiBmdW5jdGlvbih1c2VybmFtZSwgcGluKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ3VzZXJfY29uZmlybScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpbjogcGluXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVzZXJfaW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uX2FwaV9jYWxsKHttOiAndXNlcl9pbmZvJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9sb2dpbjogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ3VzZXJfbG9naW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRhdGEuc2V0VG9rZW4oZGF0YS5kYXRhLnJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbmVlZGVkIGZvciBjaGFpbmluZyBvZiBwcm9taXNlcywgc2hvdWxkIGJlIGRvbmUgc29tZSBvdGhlciB3YXkgcGVyaGFwcz9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9sb2dvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uX2FwaV9jYWxsKHttOiAndXNlcl9sb2dvdXQnfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRhdGEuZGVsZXRlVG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1c2VyX3Byb2R1Y3RzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25fYXBpX2NhbGwoe206ICd1c2VyX3Byb2R1Y3RzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2Zpc2hlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF9maXNoZXMnfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfdGVjaG5pcXVlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF90ZWNobmlxdWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2JhaXRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X2JhaXRzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X29yZ2FuaXphdGlvbnM6IGZ1bmN0aW9uKG9yZ2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9vcmdhbml6YXRpb25zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdpZDogb3JnaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X29yZ19tb2RpZmllZDogZnVuY3Rpb24ob3JnaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAnZ2V0X29yZ19tb2RpZmllZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnaWQ6IG9yZ2lkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9hcmVhczogZnVuY3Rpb24oYXJlYWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9hcmVhcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlYWlkOiBhcmVhaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2FyZWFzX21vZGlmaWVkOiBmdW5jdGlvbihhcmVhaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAnZ2V0X2FyZWFzX21vZGlmaWVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmVhaWQ6IGFyZWFpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfcHJvZHVjdHM6IGZ1bmN0aW9uKGFyZWFpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfcHJvZHVjdHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFpZDogYXJlYWlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9ydWxlczogZnVuY3Rpb24ocnVsZWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9ydWxlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZWlkOiBydWxlaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X3Bob3RvczogZnVuY3Rpb24ob3JnaWQsIGFyZWFpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfcGhvdG9zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdpZDogb3JnaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlYWlkOiBhcmVhaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X21hcF9wb2lzOiBmdW5jdGlvbihvcmdpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfbWFwX3BvaXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2lkOiBvcmdpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfbWFwX3BvaV90eXBlcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoe206ICdnZXRfbWFwX3BvaV90eXBlcyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9tYXBfcG9seWdvbnM6IGZ1bmN0aW9uKG9yZ2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9tYXBfcG9seWdvbnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2lkOiBvcmdpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1c2VyX2dldF9mYXZvcml0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Vzc2lvbl9hcGlfY2FsbCh7bTogJ3VzZXJfZ2V0X2Zhdm9yaXRlcyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF90ZXJtc19vZl9zZXJ2aWNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X3Rlcm1zX29mX3NlcnZpY2UnfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfY29udGFjdF9pbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X2NvbnRhY3RfaW5mbyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9lbmdpbmVfcG9saWNpZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoe206ICdnZXRfZW5naW5lX3BvbGljaWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X3Ntc190ZXJtczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF9zbXNfdGVybXMnfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfV07XG4gICAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24oYW5ndWxhciwgdW5kZWZpbmVkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5kYicsIFtdKVxuICAgIC5wcm92aWRlcignREInLCBmdW5jdGlvbiBEQlByb3ZpZGVyKCkge1xuXG4gICAgICAgIHRoaXMuJGdldCA9IFsgJyRjb3Jkb3ZhU1FMaXRlJywgJ0FQSScsICckcScsIGZ1bmN0aW9uKCRjb3Jkb3ZhU1FMaXRlLCBBUEksICRxKSB7XG5cblxuICAgICAgICAgICAgdmFyIGRiO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5zcWxpdGVQbHVnaW4pIHtcbiAgICAgICAgICAgICAgICBkYiA9ICRjb3Jkb3ZhU1FMaXRlLm9wZW5EQignZmlza2ViYXNlbi5kYicpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cub3BlbkRhdGFiYXNlKSB7XG4gICAgICAgICAgICAgICAgZGIgPSB3aW5kb3cub3BlbkRhdGFiYXNlKCdmaXNrZWJhc2VuLmRiJywgJzEuMCcsICdmaXNrZWJhc2VuJywgMTAqMTAyNCoxMDI0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vdCBzdXBwb3J0ZWQgb24gdGhpcyBkZXZpY2UsIHNvcnJ5Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB2YXIgdGFibGVEZWYgPSB7XG4gICAgICAgICAgICAgICAgJ0FyZWEnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnb3JnaWQnLCAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2t3JywgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydub3RlJywgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYzEnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYzInLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYzMnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbTEnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbTInLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbTMnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbGF0JywgICAncmVhbCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2xuZycsICAgJ3JlYWwnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd6b29tJywgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncG50JywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2FyJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZW5nJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaGNwJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbWFwJywgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3dzYycsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ0FyZWFfRmlzaCc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWlkJywgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ZpZCcsICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydhbW91bnQnLCAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY29tbWVudCcsICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdQcm9kdWN0JzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QyJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbm8nLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbScsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BmJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWknLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JpJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjaCcsICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsncHJpY2UnLCAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzbycsICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaGwnLCAgICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ0NvdW50eSc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsncycsICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdNdW5pY2lwYWxpdHknOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY0lEJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbmFtZScsICAndGV4dCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnRmlzaCc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZCcsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3NvJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21heCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ljb24nLCAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbWcnLCAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaW4nLCAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2dlbycsICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzaXplJywgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbGF0JywgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlYycsICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1J1bGUnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd2ZXInLCAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QnLCAgICAndGV4dCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnVXNlcl9Qcm9kdWN0JzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydhdCcsICAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY29kZScsICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ZyJywgICAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydmdWxsbmFtZScsICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ290JywgICAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVmMScsICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlZjInLCAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RvJywgICAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwaWQnLCAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGRmJywgICAgICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1VzZXJfSW5mbyc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndXNlcm5hbWUnLCAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydsb2dnZWRpbicsICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ0lQMScsICAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnSVAyJywgICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyduYW1lJywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2VtYWlsJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZCcsICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1VzZXJfTnVtYmVyJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ251bWJlcicsICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdUZWNobmlxdWUnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzbycsICAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkZScsICAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGEnLCAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ljb24nLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbWcxJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaW1nMicsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ltZzMnLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd5b3V0dWJlJywgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdPcmdhbml6YXRpb24nOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QnLCAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZCcsICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcCcsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VybCcsICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY28nLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd2YXQnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZHAnLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Z2YScsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvcmcnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbWwnLCAgICAgJ2ludCddXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdmFyIGNyZWF0ZU9iamVjdCA9IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICB2YXIgcmV0dmFsID0gW107XG4gICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IGRhdGEucm93cy5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICByZXR2YWwucHVzaChkYXRhLnJvd3MuaXRlbShpKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXR2YWw7XG4gICAgICAgICAgICB9O1xuXG5cblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBwb3B1bGF0ZVRhYmxlOiBmdW5jdGlvbih0YWJsZSwgZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24gKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZGIudHJhbnNhY3Rpb24oZnVuY3Rpb24odHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKCdERUxFVEUgRlJPTSAnICsgdGFibGUgKyAnOycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaWQgaW4gZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgc2luZ2xlRGF0YSA9IGRhdGFbaWRdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaW5zZXJ0RGF0YSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRhYmxlRGVmW3RhYmxlXS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5zZXJ0RGF0YS5wdXNoKHNpbmdsZURhdGFbdGFibGVEZWZbdGFibGVdW2ldWzBdXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHF1ZXJ5ID0gW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0lOU0VSVCBJTlRPJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRhYmxlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1ZBTFVFUyg/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcsPycucmVwZWF0KGluc2VydERhdGEubGVuZ3RoLTEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyknXS5qb2luKCcgJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwocXVlcnksIGluc2VydERhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgY2xlYW5UYWJsZTogZnVuY3Rpb24odGFibGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKHR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHguZXhlY3V0ZVNxbCgnREVMRVRFIEZST00gJyArIHRhYmxlICsgJzsnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIERyb3BzIGFsbCB0YWJsZXMgaW4gdGhlIGRhdGFiYXNlXG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBjbGVhblxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGNsZWFuOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnRyYW5zYWN0aW9uKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgdGFibGUgaW4gdGFibGVEZWYpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHguZXhlY3V0ZVNxbCgnRFJPUCBUQUJMRSBJRiBFWElTVFMgJyArIHRhYmxlICsgJzsnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGxcbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbW92ZWQgYWxsIHRhYmxlcycpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogSW5pdGlhbGllcyB0aGUgdGFibGVzIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgICAgICAgICAqIEBtZXRob2QgaW5pdFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnRyYW5zYWN0aW9uKCBmdW5jdGlvbiAodHgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIHRhYmxlIGluIHRhYmxlRGVmKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIicgKyB0YWJsZURlZlt0YWJsZV0uam9pbignX19fXCInKS5zcGxpdCgnLCcpLmpvaW4oJ1wiICcpLnNwbGl0KCdfX18nKS5qb2luKCcsICcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJywgUFJJTUFSWSBLRVkoJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdcIicgKyB0YWJsZURlZlt0YWJsZV1bMF1bMF0gKyAnXCInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJykpOydcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwocXVlcnkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QsXG4gICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXRzIGluZm9ybWF0aW9uIGFib3V0IGFuIGFyZWFcbiAgICAgICAgICAgICAgICAgKiBAbWV0aG9kIGdldEFyZWFcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGlkXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZ2V0QXJlYTogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gQXJlYScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1dIRVJFIGlkID0gPydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpLCBbaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oIGZ1bmN0aW9uIChhcmVhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9iamVjdCA9IGNyZWF0ZU9iamVjdChhcmVhKVswXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X3Bob3RvcyhvYmplY3Qub3JnaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oaW1hZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9iamVjdC5pbWFnZXMgPSBpbWFnZXMuZGF0YS5yZXNwb25zZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChvYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKG9iamVjdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGdldEFyZWFGaXNoZXM6IGZ1bmN0aW9uKGFpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoIGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIEFyZWFfRmlzaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0pPSU4gRmlzaCBPTiBBcmVhX0Zpc2guZmlkID0gRmlzaC5JRCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1dIRVJFIEFyZWFfRmlzaC5haWQgPSA/J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksIFthaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBTZWFyY2hlcyB0aGUgZGF0YWJhc2UgdXNpbmcgYSBxdWVyeVxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogVGhlIHF1ZXJ5IGlzIG1hdGNoZWQgdG8gYSBuYW1lIGFuZC9vciBrZXl3b3JkXG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBzZWFyY2hcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoc3RyaW5nXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgc2VhcmNoOiBmdW5jdGlvbihzZWFyY2hzdHJpbmcsIGNvdW50eV9pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoIGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIEFyZWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSB0IExJS0UgPycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKGNvdW50eV9pZCA/ICdBTkQgYzEgPSA/JzonJyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ09SREVSIEJZIHQnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvdW50eV9pZCA/IFsnJScgKyBzZWFyY2hzdHJpbmcgKyAnJScsIGNvdW50eV9pZF06WyclJyArIHNlYXJjaHN0cmluZyArICclJ10pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldHMgaW5mb3JtYXRpb24gYWJvdXQgYSBwcm9kdWN0XG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBnZXRQcm9kdWN0XG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtJbnRlZ2VyfSBwcm9kdWN0X2lkXG4gICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgZ2V0UHJvZHVjdDogZnVuY3Rpb24ocHJvZHVjdF9pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCBESVNUSU5DVCBQcm9kdWN0LiosJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS50IGFzIHJ1bGVfdCwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLnZlciBhcyBydWxlX3ZlciwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLmQgYXMgcnVsZV9kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBQcm9kdWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSk9JTiBSdWxlIE9OIFJ1bGUuSUQgPSBQcm9kdWN0LnJpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgSUQgPSA/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnT1JERVIgQlkgc28nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFtwcm9kdWN0X2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0cyBhbGwgcHJvZHVjdHMgZnJvbSBhbiBhcmVhXG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBnZXRQcm9kdWN0c0J5QXJlYVxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gYXJlYV9pZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGdldFByb2R1Y3RzQnlBcmVhOiBmdW5jdGlvbihhcmVhX2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIERJU1RJTkNUIFByb2R1Y3QuKiwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLnQgYXMgcnVsZV90LCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUudmVyIGFzIHJ1bGVfdmVyLCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUuZCBhcyBydWxlX2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIFByb2R1Y3QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdKT0lOIFJ1bGUgT04gUnVsZS5JRCA9IFByb2R1Y3QucmknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBhaSA9ID8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdPUkRFUiBCWSBzbydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgW2FyZWFfaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRDb3VudGllczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIERJU1RJTkNUIENvdW50eS4qJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBDb3VudHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdKT0lOIEFyZWEgT04gQXJlYS5jMSA9IENvdW50eS5JRCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ09SREVSIEJZIENvdW50eS50J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGdldFVzZXJQcm9kdWN0czogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIFVzZXJfUHJvZHVjdC4qLCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUudCBhcyBydWxlX3QsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS52ZXIgYXMgcnVsZV92ZXIsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS5kIGFzIHJ1bGVfZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gVXNlcl9Qcm9kdWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTEVGVCBKT0lOIFByb2R1Y3QgT04gUHJvZHVjdC5JRCA9IFVzZXJfUHJvZHVjdC5waWQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdMRUZUIEpPSU4gUnVsZSBPTiBSdWxlLklEID0gUHJvZHVjdC5yaSdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRGaXNoZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqIEZST00gRmlzaCdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRGaXNoOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqIEZST00gRmlzaCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1dIRVJFIGlkID0gPydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpLCBbaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRUZWNobmlxdWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKiBGUk9NIFRlY2huaXF1ZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0VGVjaG5pcXVlOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqIEZST00gVGVjaG5pcXVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgSUQgPSA/J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksIFtpZF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSlbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRPcmdhbml6YXRpb246IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUICogRlJPTSBPcmdhbml6YXRpb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBJRCA9ID8nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSwgW2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFVzZXJJbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gVXNlcl9JbmZvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbiggZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdCh1c2VyKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFVzZXJOdW1iZXJzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gVXNlcl9OdW1iZXInXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cblxuICAgICAgICAgICAgfTtcbiAgICAgICAgfV07XG4gICAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmZpbHRlcnMnLCBbXSlcbi5maWx0ZXIoJ25vYnJzJywgZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIHJldHVybiBpbnB1dC5yZXBsYWNlKC8oPGJyPlxccyopKy9nLCAnPGJyPicpO1xuICAgIH07XG59KTtcbiIsIihmdW5jdGlvbihhbmd1bGFyLCB1bmRlZmluZWQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLnVwZGF0ZScsIFsnaWZpc2tlLmFwaScsICdpZmlza2UuZGInLCAnaWZpc2tlLnV0aWxzJ10pXG4gICAgLnByb3ZpZGVyKCdVcGRhdGUnLCBmdW5jdGlvbiBVcGRhdGVQcm92aWRlcigpIHtcblxuXG4gICAgICAgIHRoaXMuJGdldCA9IFtcbiAgICAgICAgICAgICdBUEknLFxuICAgICAgICAgICAgJ0RCJyxcbiAgICAgICAgICAgICdsb2NhbFN0b3JhZ2UnLFxuICAgICAgICAgICAgJyRxJyxcbiAgICAgICAgICAgICckaW9uaWNMb2FkaW5nJyxcbiAgICAgICAgICAgICdzZXNzaW9uRGF0YScsXG4gICAgICAgICAgICBmdW5jdGlvbihBUEksIERCLCBsb2NhbFN0b3JhZ2UsICRxLCAkaW9uaWNMb2FkaW5nLCBzZXNzaW9uRGF0YSkge1xuXG4gICAgICAgICAgICAgICAgdmFyIExBU1RfVVBEQVRFID0gJ2xhc3RfdXBkYXRlJztcblxuICAgICAgICAgICAgICAgIHZhciBwb3B1bGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfYXJlYXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXNoQXJyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBrZXkgaW4gZGF0YS5kYXRhLnJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXNoZXMgPSBkYXRhLmRhdGEucmVzcG9uc2Vba2V5XS5maXNoO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGZpc2hLZXkgaW4gZmlzaGVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaXNoQXJyLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdJRCc6IGtleSsnXycrZmlzaEtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWQ6IGZpc2hLZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWlkOiBrZXksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYW1vdW50OiBmaXNoZXNbZmlzaEtleV1bMF0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWVudDogZmlzaGVzW2Zpc2hLZXldWzFdXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREIucG9wdWxhdGVUYWJsZSgnQXJlYScsIGRhdGEuZGF0YS5yZXNwb25zZSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERCLnBvcHVsYXRlVGFibGUoJ0FyZWFfRmlzaCcsIGZpc2hBcnIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBBcmVhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9wcm9kdWN0cygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ1Byb2R1Y3QnLCBkYXRhLmRhdGEucmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgUHJvZHVjdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfY291bnRpZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdDb3VudHknLCBkYXRhLmRhdGEucmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgQ291bnR5Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9tdW5pY2lwYWxpdGllcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ011bmljaXBhbGl0eScsIGRhdGEuZGF0YS5yZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBNdW5pY2lwYWxpdHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X2Zpc2hlcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ0Zpc2gnLCBkYXRhLmRhdGEucmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgRmlzaCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfcnVsZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdSdWxlJywgZGF0YS5kYXRhLnJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIFJ1bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X3RlY2huaXF1ZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdUZWNobmlxdWUnLCBkYXRhLmRhdGEucmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgVGVjaG5pcXVlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9vcmdhbml6YXRpb25zKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIucG9wdWxhdGVUYWJsZSgnT3JnYW5pemF0aW9uJywgZGF0YS5kYXRhLnJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIE9yZ2FuaXphdGlvbicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIHBvcHVsYXRlVXNlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS51c2VyX3Byb2R1Y3RzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIucG9wdWxhdGVUYWJsZSgnVXNlcl9Qcm9kdWN0JywgZGF0YS5kYXRhLnJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIFVzZXJfUHJvZHVjdCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS51c2VyX2luZm8oKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBudW1iZXJzID0gZGF0YS5kYXRhLnJlc3BvbnNlLm51bWJlcnM7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bUFyciA9IFtdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBudW1iZXJzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG51bUFyci5wdXNoKHsnbnVtYmVyJzogbnVtYmVyc1tpXX0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREIucG9wdWxhdGVUYWJsZSgnVXNlcl9JbmZvJywgW2RhdGEuZGF0YS5yZXNwb25zZV0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBVc2VyX0luZm8nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhLmRhdGEucmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERCLnBvcHVsYXRlVGFibGUoJ1VzZXJfTnVtYmVyJywgbnVtQXJyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgVXNlcl9OdW1iZXJzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIGNsZWFuVXNlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgIERCLmNsZWFuVGFibGUoJ1VzZXJfUHJvZHVjdCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgREIuY2xlYW5UYWJsZSgnVXNlcl9OdW1iZXInKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIERCLmNsZWFuVGFibGUoJ1VzZXJfSW5mbycpXG4gICAgICAgICAgICAgICAgICAgIF0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1JlbW92ZWQgdXNlciBpbmZvIGZyb20gZGF0YWJhc2UnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ291bGQgbm90IHJlbW92ZSB1c2VyIGRhdGEgZnJvbSBkYXRhYmFzZSEnLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9O1xuXG5cbiAgICAgICAgICAgICAgICB2YXIgdXBkYXRlRnVuYyA9IGZ1bmN0aW9uKGZvcmNlZCkge1xuICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coKTtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBsYXN0VXBkYXRlID0gMDtcbiAgICAgICAgICAgICAgICAgICAgaWYoIWZvcmNlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFzdFVwZGF0ZSA9IGxvY2FsU3RvcmFnZS5nZXQoTEFTVF9VUERBVEUpO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFXZWVrID0gMTAwMCozNjAwKjI0Kjc7XG4gICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRUaW1lIC0gbGFzdFVwZGF0ZSA+IGFXZWVrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBEQi5pbml0KClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXplZCBEQiBzeXN0ZW0nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzZXNzaW9uRGF0YS50b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEuYWxsKFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVsYXRlVXNlcigpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGUoKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcG9wdWxhdGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgYWxsIHRoZSB0aGluZ3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KExBU1RfVVBEQVRFLCBjdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihlcnIuZXJyb3JfY29kZSA9PT0gNykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBdXRoZW50aWNhdGlvbiBmYWlsdXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFNob3cgdG8gdXNlclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhblVzZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQVBJLnVzZXJfbG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHb3QgYW4gZXJyb3IsIHdpbGwgdHJ5IHRvIHJlY3JlYXRlIGFsbCB0YWJsZXM6ICcsIGVycik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLmNsZWFuKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5pbml0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3B1bGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIGFsbCB0aGUgdGhpbmdzJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KExBU1RfVVBEQVRFLCBjdXJyZW50VGltZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU3RpbGwgZXJyb3IsIGhhbmRsZSBpdCEnLCBlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF90ZXJtc19vZl9zZXJ2aWNlKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCd0b3MnLGRhdGEuZGF0YS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfc21zX3Rlcm1zKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHRlcm1zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldCgnc21zX3Rlcm1zJywgdGVybXMuZGF0YS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfY29udGFjdF9pbmZvKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCdjb250YWN0SW5mbycsIGRhdGEuZGF0YS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYoc2Vzc2lvbkRhdGEudG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERCLmluaXQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemVkIERCIHN5c3RlbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlc3Npb25EYXRhLnRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBvcHVsYXRlVXNlcigpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ25vX3VwZGF0ZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZ1bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICBmb3JjZWRVcGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRnVuYyh0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgICAgICB1c2VyX2xvZ291dDogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhblVzZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS51c2VyX2xvZ291dCgpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB1c2VyX2xvZ2luOiBmdW5jdGlvbih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBBUEkudXNlcl9sb2dpbih1c2VybmFtZSwgcGFzc3dvcmQpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVGdW5jKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbGFzdF91cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGxvY2FsU3RvcmFnZS5nZXQoTEFTVF9VUERBVEUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1dO1xuICAgIH0pO1xufSkod2luZG93LmFuZ3VsYXIpO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS51dGlscycsIFtdKVxuXG4uZmFjdG9yeSgnbG9jYWxTdG9yYWdlJywgWyckd2luZG93JywgZnVuY3Rpb24oJHdpbmRvdykge1xuICAgIHJldHVybiB7XG4gICAgICAgIHNldDogZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuICAgICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgICAgfSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIHJldHVybiAkd2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlbW92ZTogZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pXG4uc2VydmljZSgnc2Vzc2lvbkRhdGEnLCBbJ2xvY2FsU3RvcmFnZScsIGZ1bmN0aW9uKGxvY2FsU3RvcmFnZSkge1xuICAgIHRoaXMudG9rZW4gPSBsb2NhbFN0b3JhZ2UuZ2V0KCdzZXNzaW9uJyk7XG5cbiAgICB0aGlzLnNldFRva2VuID0gZnVuY3Rpb24odCkge1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCdzZXNzaW9uJywgdCk7XG4gICAgICAgIHRoaXMudG9rZW4gPSB0O1xuICAgICAgICBjb25zb2xlLmxvZygndG9rZW4gc2V0Jyk7XG4gICAgfTtcbiAgICB0aGlzLmRlbGV0ZVRva2VuID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmUoJ3Nlc3Npb24nKTtcbiAgICAgICAgdGhpcy50b2tlbiA9IG51bGw7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbiB1bnNldCcpO1xuICAgIH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnbmdDb3Jkb3ZhU21zJywgW10pXG4uZGlyZWN0aXZlKCduZ0NvcmRvdmFTbXMnLCBbJyRjb3Jkb3ZhU21zJywgJyRpb25pY1BvcHVwJywgZnVuY3Rpb24oJGNvcmRvdmFTbXMsICRpb25pY1BvcHVwKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHJzKSB7XG4gICAgICAgICAgICBlbC5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICRpb25pY1BvcHVwLnByb21wdCh7XG4gICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnU2tyaXYgaW4gZGl0dCBuYW1uJyxcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRUeXBlOiAndGV4dCdcbiAgICAgICAgICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSAnRklTS0EgJyArIGF0dHJzLm5nQ29yZG92YVNtcyArICcgJyArIG5hbWU7XG4gICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU21zLnNlbmQoJzcyNDU2JywgbWVzc2FnZSwgJ0lOVEVOVCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ3N1Y2N1ZXNzJyk7XG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmRpcmVjdGl2ZXMnKVxuICAgIC5kaXJlY3RpdmUoJ2lmaXNrZUlucHV0JywgZnVuY3Rpb24oKSB7XG5cdHJldHVybiB7XG5cdCAgICByZXN0cmljdDogJ0UnLFxuXHQgICAgdHJhbnNjbHVkZTogdHJ1ZSxcblxuXHQgICAgc2NvcGU6IHtcblx0XHRuYW1lOiAnQCcsXG5cdFx0aWQ6ICdAJyxcblx0XHRsYWJlbDogJ0AnLFxuXHRcdHBsYWNlaG9sZGVyOiAnQCcsXG5cdFx0dHlwZTogJ0AnLFxuXHRcdG5nUGF0dGVybjogJ0AnLFxuXHRcdG5nTW9kZWw6ICc9PydcblxuXHQgICAgfSxcblx0ICAgIHRlbXBsYXRlVXJsOiAnZGlyZWN0aXZlcy9pbnB1dF9maWVsZC9pZmlza2VfaW5wdXQuaHRtbCcsXG5cdCAgICBjb250cm9sbGVyOiBmdW5jdGlvbigkc2NvcGUpIHtcblx0XHQkc2NvcGUuaWQgPSAkc2NvcGUuaWQgfHwgJHNjb3BlLm5hbWU7XG5cdFx0JHNjb3BlLnR5cGUgPSAkc2NvcGUudHlwZSB8fCAndGV4dCc7XG5cdCAgICB9XG5cdH1cbiAgICB9KVxuIiwiYW5ndWxhci5tb2R1bGUoJ3N5c3RlbUJyb3dzZXInLCBbXSlcbi5kaXJlY3RpdmUoJ3N5c3RlbUJyb3dzZXInLCBbJyRjb3Jkb3ZhSW5BcHBCcm93c2VyJywgZnVuY3Rpb24oJGNvcmRvdmFJbkFwcEJyb3dzZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbCwgYXR0cnMpIHtcbiAgICAgICAgICAgIGVsLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAkY29yZG92YUluQXBwQnJvd3Nlci5vcGVuKGVsWzBdLmhyZWYsICdfc3lzdGVtJyk7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pXG4uZGlyZWN0aXZlKCdnbG9iYWxTeXN0ZW1Ccm93c2VyJywgWyckY29yZG92YUluQXBwQnJvd3NlcicsIGZ1bmN0aW9uKCRjb3Jkb3ZhSW5BcHBCcm93c2VyKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHJldHVybiB7XG4gICAgICAgIHJlc3RyaWN0OiAnQScsXG4gICAgICAgIGxpbms6IGZ1bmN0aW9uIChzY29wZSwgZWwsIGF0dHJzKSB7XG4gICAgICAgICAgICBlbC5vbignY2xpY2snLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGUudGFyZ2V0LmhyZWYgJiYgZS50YXJnZXQuaG9zdCAhPT0gd2luZG93LmxvY2F0aW9uLmhvc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFJbkFwcEJyb3dzZXIub3BlbihlLnRhcmdldC5ocmVmLCAnX3N5c3RlbScpO1xuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xufV0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9