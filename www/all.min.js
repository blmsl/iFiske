angular.module("ifiske",["ionic","ifiske.controllers","ifiske.directives","ifiske.api","ifiske.db","ifiske.utils","ifiske.update","ifiske.filters","ionic.ion.headerShrink","ngCordova","systemBrowser","ngCordovaSms","ngMessages","ImgCache","leaflet-directive"]).constant("$ionicLoadingConfig",{template:"<ion-spinner></ion-spinner>"}).run(["$ionicPlatform","Update","ImgCache",function(e,t,n){e.ready(function(){window.ionic&&window.ionic.Keyboard&&window.ionic.Keyboard.hideKeyboardAccessoryBar(!0),window.StatusBar&&StatusBar.styleDefault(),n.$init(),t.update()})}]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider","ImgCacheProvider",function(e,t,n,o){o.setOptions({debug:!0,usePersistentCache:!0}),o.manualInit=!0,n.views.forwardCache(!0),n.backButton.previousTitleText(!1).text(""),n.tabs.position("bottom");var r="/start/login";window.localStorage.getItem("session")&&(r="/menu/home"),t.otherwise(r),e.state("start",{url:"/start","abstract":!0,templateUrl:"components/start/start.html"}).state("start.login",{url:"/login",templateUrl:"components/login/login.html",controller:"LoginCtrl"}).state("start.register",{url:"/register",templateUrl:"components/register/register.html",controller:"RegisterCtrl"}).state("start.register.details",{url:"/details",templateUrl:"components/register/register_details.html"}).state("start.register.verify",{url:"/verify",templateUrl:"components/register/register_verify.html"}).state("menu",{url:"/menu","abstract":!0,templateUrl:"components/menu/menu.html",controller:"MenuCtrl"}).state("menu.home",{url:"/home",templateUrl:"components/home/home.html",controller:"HomeCtrl"}).state("menu.info",{url:"/info",templateUrl:"components/info/info.html"}).state("menu.bugs",{url:"/info",templateUrl:"components/menu/report.html"}).state("menu.contact",{url:"/contact",templateUrl:"components/contact/contact.html",controller:"ContactCtrl"}).state("menu.legal",{url:"/legal",templateUrl:"components/legal/legal.html",controller:"LegalCtrl"}).state("menu.about",{url:"/about",templateUrl:"components/about/about.html",controller:"AboutCtrl"}).state("menu.userinfo",{url:"/userinfo",controller:"UserCtrl",templateUrl:"components/user/user.html"}).state("menu.counties",{url:"/counties",templateUrl:"components/counties/counties.html",controller:"CountiesCtrl"}).state("menu.areas",{url:"/areas",params:{id:!1,county:!1,search:""},templateUrl:"components/area_list/area_list.html",controller:"AreasCtrl"}).state("menu.cards",{url:"/cards",templateUrl:"components/user_cards/user_cards.html",controller:"UserCardsCtrl"}).state("menu.favorites",{url:"/favorites",templateUrl:"components/favorites/favorites.html"}).state("menu.fishes",{url:"/fishes",templateUrl:"components/fishes/fishes.html",controller:"FishesCtrl"}).state("menu.fishdetail",{url:"/fishdetail/:id",params:{id:!1,fish:!1},templateUrl:"components/fish_detail/fish_detail.html",controller:"FishDetailCtrl"}).state("menu.map",{url:"/map",templateUrl:"components/map/map.html",controller:"MapCtrl"}).state("menu.techniques",{url:"/techniques",templateUrl:"components/techniques/techniques.html",controller:"TechniquesCtrl"}).state("menu.techniquedetail",{url:"/techniquedetail/:id",params:{id:!1,tech:!1},templateUrl:"components/technique_detail/technique_detail.html",controller:"TechniqueDetailCtrl"}).state("menu.report",{url:"/report",templateUrl:"components/report/report.html"}).state("area",{"abstract":!0,url:"/area/:id",templateUrl:"components/area/area.html",controller:"AreaCtrl"}).state("area.map",{url:"/map",views:{map:{templateUrl:"components/area/map.html"}}}).state("area.info",{url:"/info",views:{info:{templateUrl:"components/area/info.html"}}}).state("area.fishinfo",{url:"/fishinfo",views:{fishinfo:{templateUrl:"components/area/fish.html"}}}).state("area.cards",{url:"/cards",views:{cards:{templateUrl:"components/area/cards.html"}}})}]),angular.module("ifiske.controllers",[]),angular.module("ifiske.directives",[]),angular.module("ifiske.controllers").controller("AboutCtrl",["$scope","$cordovaAppVersion","$ionicPlatform","Update",function(e,t,n,o){e.version=e.dbDate="Okänt",e.dbDate=o.last_update(),n.ready(function(){window.cordova&&t.getAppVersion().then(function(t){console.log(t),e.version=t})})}]),angular.module("ifiske.controllers").controller("AreaCtrl",["$scope","$ionicHistory","localStorage","$rootScope","$ionicViewSwitcher","$stateParams","DB","$ionicSlideBoxDelegate","$ionicModal",function(e,t,n,o,r,i,s,a,l){e.map={},e.tabsBack=function(){t.viewHistory().currentView.index?o.$ionicGoBack():(r.nextDirection("back"),e.$emit("$ionicHistory.change",{historyId:n.get("homeHistoryId")}))},e.image_endpoint="http://www.ifiske.se";var u={};s.getArea(i.id).then(function(t){e.images=t.images,a.update(),e.area=t,s.getOrganization(t.orgid).then(function(t){e.org=t}),s.getPoiTypes().then(function(n){for(var o=0;o<n.length;++o){var r=n[o];u[r.ID]={iconUrl:"http://www.ifiske.se/"+r.icon}}s.getPois(t.orgid).then(function(t){console.log(t),e.map.markers=t.map(function(e){return{layer:"pois",lat:e.la,lng:e.lo,icon:u[e.type],message:e.t}})},function(e){console.log(e)}),s.getPolygons(t.orgid).then(function(t){console.log(t),e.map.paths=t.map(function(e){return{latlngs:JSON.parse("["+e.poly+"]"),color:e.c,weight:2}})},function(e){console.log(e)})})},function(e){console.log(e)}),s.getAreaFishes(i.id).then(function(t){console.log(t),e.fishes=t},function(e){console.log(e)}),s.getProductsByArea(i.id).then(function(t){e.products=t},function(e){console.log(e)}),e.sortorder="-amount",e.smsterms=n.get("sms_terms"),e.predicate="so",l.fromTemplateUrl("components/area/sms_modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.sms_modal=t}),e.openModal=function(t){e.sms_modal.show(),e.product=t},e.closeModal=function(){e.sms_modal.hide()},e.showTerms=function(){e.showingterms=!e.showingterms},e.showingterms=!1,l.fromTemplateUrl("components/area/rules_modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.rules_modal=t}),e.openRulesModal=function(t){e.rules_modal.show(),e.product=t},e.closeRulesModal=function(){e.rules_modal.hide()},e.$on("$destroy",function(){e.sms_modal.remove(),e.rules_modal.remove()}),angular.extend(e.map,{center:{lat:62,lng:15,zoom:5},layers:{baselayers:{mapbox:{name:"Mapbox",type:"xyz",url:"http://api.tiles.mapbox.com/v4/{maptype}/{z}/{x}/{y}@2x.png?access_token={apikey}",layerOptions:{maptype:"mapbox.outdoors",apikey:"pk.eyJ1IjoibWFpc3RobyIsImEiOiI3Ums5R0IwIn0.DOhU81clHLEhTj81DIOjdg"}}},overlays:{pois:{name:"Fiskeområden",type:"markercluster",visible:!0,layerOptions:{disableClusteringAtZoom:9,chunkedLoading:!0,showCoverageOnHover:!1,removeOutsideVisibleBounds:!0}}}}})}]),angular.module("ifiske.controllers").controller("AreasCtrl",["$scope","$stateParams","$ionicScrollDelegate","DB",function(e,t,n,o){e.search={$:t.search},e.queryBy="$",e.county=t.county,o.search("",t.id).then(function(t){e.areas=t},function(e){console.log(e)}),e.clearSearch=function(){},e.scrollTop=function(){n.scrollTop()}}]),angular.module("ifiske.controllers").controller("ContactCtrl",["$scope","$state","localStorage",function(e,t,n){e.contactInfo=n.get("contactInfo")}]),angular.module("ifiske.controllers").controller("CountiesCtrl",["$scope","DB",function(e,t){t.getCounties().then(function(t){e.counties=t},function(e){console.log(e)})}]),angular.module("ifiske.controllers").controller("FishDetailCtrl",["$scope","$stateParams","DB",function(e,t,n){e.fish=t.fish,e.image_endpoint="http://www.ifiske.se",e.fish||n.getFish(t.id).then(function(t){e.fish=t,console.log(e.fish)},function(e){console.log(e)}),console.log(e.fish)}]),angular.module("ifiske.controllers").controller("FishesCtrl",["$scope","DB",function(e,t){e.sortorder="so",e.image_endpoint="http://www.ifiske.se",t.getFishes().then(function(t){e.fishes=t,e.default_img=t[0].img},function(e){console.log(e)})}]),angular.module("ifiske.controllers").controller("HomeCtrl",["$scope","$state","$ionicHistory","localStorage","sessionData",function(e,t,n,o,r){e.loggedIn=r,o.set("homeHistoryId",n.currentHistoryId()),e.myFunc=function(e){13!=e.keyCode||e.shiftKey||t.go("menu.areas",{search:e.srcElement.value})}}]),angular.module("ifiske.controllers").controller("LegalCtrl",["$scope","$state","localStorage",function(e,t,n){e.tos=n.get("tos")}]),angular.module("ifiske.controllers").controller("LoginCtrl",["$scope","$state","Update","$ionicLoading",function(e,t,n,o){e.signIn=function(r){o.show(),n.user_login(r.username.$viewValue,r.password.$viewValue).then(function(){o.hide(),r.$setValidity("loginError",!0),t.go("menu.home")},function(t){o.hide(),r.$setValidity("loginError",!1),e.error=t.response})}}]),angular.module("ifiske.controllers").controller("MapCtrl",["$scope","leafletData","DB",function(e,t,n){e.test="hej",n.search("").then(function(t){e.markers=t.map(function(t){return{layer:"fishareas",lat:t.lat,lng:t.lng,getMessageScope:function(){var n=e.$new();return n.area=t,n},message:'<a ui-sref="area.info({id: area.ID })">{{area.t}}</a>'}})}),angular.extend(e,{center:{lat:62,lng:15,zoom:5},layers:{baselayers:{mapbox:{name:"Mapbox",type:"xyz",url:"http://api.tiles.mapbox.com/v4/{maptype}/{z}/{x}/{y}@2x.png?access_token={apikey}",layerOptions:{maptype:"mapbox.outdoors",apikey:"pk.eyJ1IjoibWFpc3RobyIsImEiOiI3Ums5R0IwIn0.DOhU81clHLEhTj81DIOjdg"}}},overlays:{fishareas:{name:"Fiskeområden",type:"markercluster",visible:!0,layerOptions:{disableClusteringAtZoom:9,chunkedLoading:!0,showCoverageOnHover:!1,removeOutsideVisibleBounds:!0}}}}})}]),angular.module("ifiske.controllers").controller("MenuCtrl",["$scope","$state","$ionicPopover","sessionData","Update",function(e,t,n,o,r){e.sessionData=o,n.fromTemplateUrl("components/menu/popover.html",{scope:e}).then(function(t){e.popover=t}),e.userinfo=function(){e.popover.hide(),t.go("menu.userinfo")},e.logout=function(){e.popover.hide(),r.user_logout(),t.go("start.login")},e.login=function(){e.popover.hide(),t.go("start.login")},e.register=function(){e.popover.hide(),t.go("start.register.details")},e.update=function(){r.forcedUpdate()}}]),angular.module("ifiske.controllers").controller("RegisterCtrl",["$scope","$state","$ionicLoading","$ionicModal","$ionicScrollDelegate","API","localStorage",function(e,t,n,o,r,i,s){var a;e.checkUsername=function(e){i.user_exists(e.$viewValue).then(function(t){e.$setValidity("nameTaken",!t.data.response)})},e.checkEmail=function(e){i.user_exists(null,e.$viewValue).then(function(t){e.$setValidity("emailTaken",!t.data.response)})},e.formErrors={},e.register=function(o){n.show(),e.phone=o.phone.$viewValue,a=o.username.$viewValue;var s=o.password.$viewValue,l=o.fullname.$viewValue,u=o.email.$viewValue;i.user_register(a,l,s,u,e.phone).then(function(){n.hide(),t.go("^.verify")},function(t){e.formErrors.registrationError=!0,r.scrollTop(!0),8==t.error_code&&o.email.$setValidity("invalidEmail",!1),9==t.error_code&&(e.checkUsername(o.username),e.checkEmail(o.email)),10==t.error_code&&o.phone.$setValidity("invalidPhone",!1),n.hide()})},e.verify=function(e){n.show();var o=e.vercode;i.user_confirm(a,o.$viewValue).then(function(){t.go("start.login"),o.$setValidity("verified",!0),n.hide()},function(){o.$setValidity("verified",!1),n.hide()})},e.tos=s.get("tos"),o.fromTemplateUrl("components/register/eula.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.eula=t}),e.showEula=function(){e.eula.show()},e.closeEula=function(){e.eula.hide()},e.$on("$destroy",function(){e.eula.remove()})}]),angular.module("ifiske.controllers").controller("TechniqueDetailCtrl",["$scope","$stateParams","DB","$ionicSlideBoxDelegate",function(e,t,n,o){if(e.image_endpoint="http://www.ifiske.se",e.tech=t.tech,e.images=[],e.tech){var r=e.tech;e.images=[r.img1,r.img2,r.img3].filter(function(e){return!/\/$/.test(e)}),o.update()}else n.getTechnique(t.id).then(function(t){e.images=[t.img1,t.img2,t.img3].filter(function(e){return!/\/$/.test(e)}),o.update(),e.tech=t})}]),angular.module("ifiske.controllers").controller("TechniquesCtrl",["$scope","DB",function(e,t){t.getTechniques().then(function(t){console.log(t),e.techniques=t}),e.image_endpoint="http://www.ifiske.se",e.sortorder="so"}]),angular.module("ifiske.controllers").controller("UserCtrl",["$scope","DB",function(e,t){t.getUserInfo().then(function(t){e.user=t}),t.getUserNumbers().then(function(t){e.numbers=t})}]),angular.module("ifiske.controllers").controller("UserCardsCtrl",["$scope","$stateParams","DB","$ionicModal",function(e,t,n,o){e.pred="-to",e.endpoint="https://www.ifiske.se",e.now=Date.now(),n.getUserProducts().then(function(t){e.products=t},function(e){console.log(e)}),o.fromTemplateUrl("components/area_cards/rules_modal.html",{scope:e,animation:"slide-in-up"}).then(function(t){e.rules_modal=t}),e.openRulesModal=function(t){e.rules_modal.show(),console.log(t),e.product=t},e.closeRulesModal=function(){e.rules_modal.hide()},e.$on("$destroy",function(){e.rules_modal.remove()})}]),function(e){"use strict";e.module("ifiske.api",["ifiske.utils"]).provider("API",function(){this.base_url="https://www.ifiske.se/api/v2/api.php",this.$get=["$http","sessionData","localStorage","$q",function(t,n,o,r){var i=this.base_url,s=function(n){return r(function(o,r){t({method:"get",url:i,params:e.extend(n,{key:"0123456789abcdef"}),timeout:5e3,cache:!0}).success(function(e){"error"===e.status?r(e.message):o(e)}).error(function(e,t){r(0===t?new Error("Request timeout"):e)})})},a=function(t){var o=n.token;return s(e.extend(t,{s:o}))};return{get_municipalities:function(){return s({m:"get_municipalities"})},get_counties:function(){return s({m:"get_counties"})},user_exists:function(e,t){var n={m:"user_exists"};return"string"==typeof e&&(n.username=e),"string"==typeof t&&(n.email=t),s(n)},user_register:function(e,t,n,o,r){return s({m:"user_register",username:e,fullname:t,password:n,email:o,phone:r})},user_confirm:function(e,t){return s({m:"user_confirm",username:e,pin:t})},user_info:function(){return a({m:"user_info"})},user_login:function(e,t){return s({m:"user_login",username:e,password:t}).then(function(e){return n.setToken(e.data.response),e})},user_logout:function(){a({m:"user_logout"}).then(function(){n.deleteToken()})},user_products:function(){return a({m:"user_products"})},get_fishes:function(){return s({m:"get_fishes"})},get_techniques:function(){return s({m:"get_techniques"})},get_baits:function(){return s({m:"get_baits"})},get_organizations:function(e){return s({m:"get_organizations",orgid:e})},get_org_modified:function(e){return s({m:"get_org_modified",orgid:e})},get_areas:function(e){return s({m:"get_areas",areaid:e})},get_areas_modified:function(e){return s({m:"get_areas_modified",areaid:e})},get_products:function(e){return s({m:"get_products",areaid:e})},get_rules:function(e){return s({m:"get_rules",ruleid:e})},get_photos:function(e,t){return s({m:"get_photos",orgid:e,areaid:t})},get_map_pois:function(e){return s({m:"get_map_pois",orgid:e})},get_map_poi_types:function(){return s({m:"get_map_poi_types"})},get_map_polygons:function(e){return s({m:"get_map_polygons",orgid:e})},user_get_favorites:function(){return a({m:"user_get_favorites"})},get_terms_of_service:function(){return s({m:"get_terms_of_service"})},get_contact_info:function(){return s({m:"get_contact_info"})},get_engine_policies:function(){return s({m:"get_engine_policies"})},get_sms_terms:function(){return s({m:"get_sms_terms"})}}}]})}(window.angular),function(e,t){"use strict";e.module("ifiske.db",[]).provider("DB",function(){this.$get=["$cordovaSQLite","API","$q",function(e,n,o){var r;if(window.sqlitePlugin)r=e.openDB("fiskebasen.db");else{if(!window.openDatabase)return console.log("Not supported on this device, sorry"),t;r=window.openDatabase("fiskebasen.db","1.0","fiskebasen",10485760)}var i={Area:[["ID","int"],["orgid","int"],["t","text"],["kw","text"],["note","text"],["c1","int"],["c2","int"],["c3","int"],["m1","int"],["m2","int"],["m3","int"],["lat","real"],["lng","real"],["zoom","text"],["pnt","int"],["car","int"],["eng","int"],["hcp","int"],["map","text"],["wsc","int"],["mod","int"],["d","text"]],Area_Fish:[["ID","text"],["aid","int"],["fid","int"],["amount","int"],["comment","text"]],Product:[["ID","int"],["t","text"],["t2","text"],["no","text"],["im","text"],["pf","text"],["ai","int"],["ri","int"],["ch","int"],["price","int"],["mod","int"],["so","int"],["hl","text"]],County:[["ID","int"],["s","text"],["t","text"],["d","text"]],Municipality:[["ID","int"],["cID","int"],["name","text"]],Fish:[["ID","int"],["t","text"],["d","text"],["mod","int"],["so","int"],["max","int"],["icon","text"],["img","text"],["in","text"],["geo","text"],["size","text"],["lat","text"],["rec","text"]],Rule:[["ID","int"],["ver","int"],["d","text"],["t","text"]],User_Product:[["ID","int"],["at","int"],["code","int"],["fr","int"],["fullname","text"],["ot","text"],["ref1","int"],["ref2","int"],["t","text"],["to","int"],["pid","int"],["pdf","text"]],User_Info:[["ID","int"],["username","text"],["loggedin","text"],["IP1","text"],["IP2","text"],["name","text"],["email","text"],["created","text"]],User_Number:[["number","text"]],Technique:[["ID","int"],["t","text"],["d","text"],["so","int"],["de","text"],["da","text"],["icon","text"],["img1","text"],["img2","text"],["img3","text"],["youtube","text"]],Organization:[["ID","int"],["t","text"],["d","text"],["cp","text"],["url","text"],["co","int"],["mod","int"],["vat","int"],["dp","int"],["fva","int"],["org","int"],["ml","int"]],Poi:[["ID","int"],["orgid","int"],["type","int"],["price","int"],["t","text"],["d","text"],["la","real"],["lo","real"]],Poi_Type:[["ID","int"],["t","text"],["icon","text"]],Polygon:[["ID","int"],["orgid","int"],["t","text"],["c","text"],["ver","int"],["mod","int"],["poly","text"]]},s=function(e){for(var t=[],n=0;n<e.rows.length;++n)t.push(e.rows.item(n));return t};return{populateTable:function(e,t){return o(function(n,o){r.transaction(function(n){n.executeSql("DELETE FROM "+e+";");for(var o in t){for(var r=t[o],s=[],a=0;a<i[e].length;++a)s.push(r[i[e][a][0]]);var l=["INSERT INTO",e,"VALUES(?",",?".repeat(s.length-1),")"].join(" ");n.executeSql(l,s)}},o,n)})},cleanTable:function(e){return o(function(t,n){r.transaction(function(t){t.executeSql("DELETE FROM "+e+";")},n,t)})},clean:function(){return o(function(e,t){r.transaction(function(e){for(var t in i)e.executeSql("DROP TABLE IF EXISTS "+t+";")},t,e)}).then(function(){console.log("Removed all tables")})},init:function(){return o(function(e,t){r.transaction(function(e){for(var t in i){var n=["CREATE TABLE IF NOT EXISTS",t,"(",'"'+i[t].join('___"').split(",").join('" ').split("___").join(", "),", PRIMARY KEY(",'"'+i[t][0][0]+'"',"));"].join(" ");e.executeSql(n)}},t,e)})},getArea:function(t){return o(function(o){e.execute(r,["SELECT *","FROM Area","WHERE id = ?"].join(" "),[t]).then(function(e){var t=s(e)[0];n.get_photos(t.orgid).then(function(e){t.images=e.data.response,o(t)},function(){o(t)})})})},getAreaFishes:function(t){return o(function(n,o){e.execute(r,["SELECT *","FROM Area_Fish","JOIN Fish ON Area_Fish.fid = Fish.ID","WHERE Area_Fish.aid = ?"].join(" "),[t]).then(function(e){n(s(e))},o)})},search:function(t,n){return o(function(o,i){e.execute(r,["SELECT *","FROM Area","WHERE t LIKE ?",n?"AND c1 = ?":"","ORDER BY t"].join(" "),n?["%"+t+"%",n]:["%"+t+"%"]).then(function(e){o(s(e))},i)})},getProduct:function(t){return o(function(n,o){e.execute(r,["SELECT DISTINCT Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM Product","JOIN Rule ON Rule.ID = Product.ri","WHERE ID = ?","ORDER BY so"].join(" "),[t]).then(function(e){n(s(e))},o)})},getProductsByArea:function(t){return o(function(n,o){e.execute(r,["SELECT DISTINCT Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM Product","JOIN Rule ON Rule.ID = Product.ri","WHERE ai = ?","ORDER BY so"].join(" "),[t]).then(function(e){n(s(e))},o)})},getCounties:function(){return o(function(t,n){e.execute(r,["SELECT DISTINCT County.*","FROM County","JOIN Area ON Area.c1 = County.ID","ORDER BY County.t"].join(" ")).then(function(e){t(s(e))},n)})},getUserProducts:function(){return o(function(t,n){e.execute(r,["SELECT User_Product.*,","Rule.t as rule_t,","Rule.ver as rule_ver,","Rule.d as rule_d","FROM User_Product","LEFT JOIN Product ON Product.ID = User_Product.pid","LEFT JOIN Rule ON Rule.ID = Product.ri"].join(" ")).then(function(e){t(s(e))},n)})},getFishes:function(){return o(function(t,n){e.execute(r,["SELECT * FROM Fish"].join(" ")).then(function(e){t(s(e))},n)})},getFish:function(t){return o(function(n,o){e.execute(r,["SELECT * FROM Fish","WHERE id = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getTechniques:function(){return o(function(t,n){e.execute(r,["SELECT * FROM Technique"].join(" ")).then(function(e){t(s(e))},n)})},getTechnique:function(t){return o(function(n,o){e.execute(r,["SELECT * FROM Technique","WHERE ID = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getOrganization:function(t){return o(function(n,o){e.execute(r,["SELECT * FROM Organization","WHERE ID = ?"].join(" "),[t]).then(function(e){n(s(e)[0])},o)})},getUserInfo:function(){return o(function(t,n){e.execute(r,["SELECT *","FROM User_Info"].join(" ")).then(function(e){t(s(e)[0])},n)})},getUserNumbers:function(){return o(function(t,n){e.execute(r,["SELECT *","FROM User_Number"].join(" ")).then(function(e){t(s(e))},n)})},getPois:function(t){return o(function(n,o){e.execute(r,["SELECT *","FROM Poi","WHERE orgid = ?"].join(" "),[t]).then(function(e){n(s(e))},o)})},getPoiTypes:function(){return o(function(t,n){e.execute(r,["SELECT *","FROM Poi_Type"].join(" ")).then(function(e){t(s(e))},n)})},getPolygons:function(t){return o(function(n,o){e.execute(r,["SELECT *","FROM Polygon","WHERE orgid = ?"].join(" "),[t]).then(function(e){n(s(e))},o)})}}}]})}(window.angular),angular.module("ifiske.filters",[]).filter("nobrs",function(){return function(e){return e.replace(/(<br>\s*)+/g,"<br>")}}),function(e){"use strict";e.module("ifiske.update",["ifiske.api","ifiske.db","ifiske.utils"]).provider("Update",function(){this.$get=["API","DB","localStorage","$q","$ionicLoading","sessionData",function(e,t,n,o,r,i){var s="last_update",a=function(){return o.all([e.get_areas().then(function(e){var n=[];for(var r in e.data.response){var i=e.data.response[r].fish;for(var s in i)n.push({ID:r+"_"+s,fid:s,aid:r,amount:i[s][0],comment:i[s][1]})}return o.all([t.populateTable("Area",e.data.response),t.populateTable("Area_Fish",n)]).then(function(){console.log("Populated Area")},function(e){return console.log(e),o.reject(e)})}),e.get_products().then(function(e){return t.populateTable("Product",e.data.response).then(function(){console.log("Populated Product")},function(e){return console.log(e),o.reject(e)})}),e.get_counties().then(function(e){return t.populateTable("County",e.data.response).then(function(){console.log("Populated County")},function(e){return console.log(e),o.reject(e)})}),e.get_municipalities().then(function(e){return t.populateTable("Municipality",e.data.response).then(function(){console.log("Populated Municipality")},function(e){return console.log(e),o.reject(e)})}),e.get_fishes().then(function(e){return t.populateTable("Fish",e.data.response).then(function(){console.log("Populated Fish")},function(e){return console.log(e),o.reject(e)})}),e.get_rules().then(function(e){return t.populateTable("Rule",e.data.response).then(function(){console.log("Populated Rule")},function(e){return console.log(e),o.reject(e)})}),e.get_techniques().then(function(e){return t.populateTable("Technique",e.data.response).then(function(){console.log("Populated Technique")},function(e){return console.log(e),o.reject(e)})}),e.get_organizations().then(function(e){return t.populateTable("Organization",e.data.response).then(function(){console.log("Populated Organization")},function(e){return console.log(e),o.reject(e)})}),e.get_map_pois().then(function(e){return t.populateTable("Poi",e.data.response).then(function(){console.log("Populated Poi")},function(e){return console.log(e),o.reject(e)})}),e.get_map_poi_types().then(function(e){return t.populateTable("Poi_Type",e.data.response).then(function(){console.log("Populated Poi_Type")},function(e){return console.log(e),o.reject(e)})}),e.get_map_polygons().then(function(e){return t.populateTable("Polygon",e.data.response).then(function(){console.log("Populated Polygon")},function(e){return console.log(e),o.reject(e)})})])},l=function(){return o.all([e.user_products().then(function(e){return t.populateTable("User_Product",e.data.response).then(function(){console.log("Populated User_Product")},function(e){return console.log(e),o.reject(e)})}),e.user_info().then(function(e){for(var n=e.data.response.numbers,r=[],i=0;i<n.length;++i)r.push({number:n[i]});return o.all([t.populateTable("User_Info",[e.data.response]).then(function(){console.log("Populated User_Info")},function(t){return console.log(e.data.response),console.log(t),o.reject(t)}),t.populateTable("User_Number",r).then(function(){console.log("Populated User_Numbers")},function(e){return console.log(e),o.reject(e)})])})])},u=function(){return o.all([t.cleanTable("User_Product"),t.cleanTable("User_Number"),t.cleanTable("User_Info")]).then(function(){console.log("Removed user info from database")},function(e){console.log("Could not remove user data from database!",e)})},c=function(c){r.show();var f=Date.now(),m=0;c||(m=n.get(s));var d=6048e5;f-m>d?(t.init().then(function(){return console.log("Initialized DB system"),i.token?o.all([l(),a()]):a()}).then(function(){console.log("Populated all the things"),n.set(s,f),r.hide()},function(o){return 7!==o.error_code?(console.log("Got an error, will try to recreate all tables: ",o),t.clean().then(function(){return t.init()}).then(function(){return a()}).then(function(){console.log("Populated all the things"),n.set(s,f),r.hide()},function(e){console.log("Still error, handle it!",e),r.hide()})):(u(),e.user_logout(),r.hide(),void 0)}),e.get_terms_of_service().then(function(e){n.set("tos",e.data.response)}),e.get_sms_terms().then(function(e){n.set("sms_terms",e.data.response)}),e.get_contact_info().then(function(e){n.set("contactInfo",e.data.response)})):i.token?t.init().then(function(){console.log("Initialized DB system"),i.token&&l().then(function(){r.hide()},function(){r.hide()}),r.hide()}):(console.log("no_update"),r.hide())};return{update:function(){c()},forcedUpdate:function(){c(!0)},user_logout:function(){u(),e.user_logout()},user_login:function(t,n){return e.user_login(t,n).then(function(){c()})},last_update:function(){return n.get(s)}}}]})}(window.angular),angular.module("ifiske.utils",[]).factory("localStorage",["$window",function(e){return{set:function(t,n){e.localStorage.setItem(t,n)},get:function(t){return e.localStorage.getItem(t)},remove:function(t){e.localStorage.removeItem(t)}}}]).service("sessionData",["localStorage",function(e){this.token=e.get("session"),this.setToken=function(t){e.set("session",t),this.token=t,console.log("token set")},this.deleteToken=function(){e.remove("session"),this.token=null,console.log("token unset")}}]),angular.module("ngCordovaSms",[]).directive("ngCordovaSms",["$cordovaSms","$ionicPopup",function(e,t){"use strict";return{restrict:"A",link:function(n,o,r){o.on("click",function(n){n.preventDefault(),t.prompt({title:"Skriv in ditt namn",inputType:"text"}).then(function(t){var n="FISKA "+r.ngCordovaSms+" "+t;e.send("72456",n,"INTENT",function(){console.log("succuess")},function(e){console.log(e)})})})}}}]),angular.module("ifiske.directives").directive("ifiskeInput",function(){return{restrict:"E",transclude:!0,scope:{name:"@",id:"@",label:"@",placeholder:"@",type:"@",ngPattern:"@",ngModel:"=?"},templateUrl:"directives/input_field/ifiske_input.html",controller:function(e){e.id=e.id||e.name,e.type=e.type||"text"}}}),angular.module("systemBrowser",[]).directive("systemBrowser",["$cordovaInAppBrowser",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("click",function(t){e.open(n[0].href,"_system"),t.preventDefault()})}}}]).directive("globalSystemBrowser",["$cordovaInAppBrowser",function(e){"use strict";return{restrict:"A",link:function(t,n){n.on("click",function(t){t.target.href&&t.target.host!==window.location.host&&(e.open(t.target.href,"_system"),t.preventDefault())})}}}]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFib3V0L2Fib3V0X2NvbnRyb2xsZXIuanMiLCJhcmVhL2FyZWFfY29udHJvbGxlci5qcyIsImFyZWFfbGlzdC9hcmVhX2xpc3RfY29udHJvbGxlci5qcyIsImNvbnRhY3QvY29udGFjdF9jb250cm9sbGVyLmpzIiwiY291bnRpZXMvY291bnRpZXNfY29udHJvbGxlci5qcyIsImZpc2hfZGV0YWlsL2Zpc2hfZGV0YWlsX2NvbnRyb2xsZXIuanMiLCJmaXNoZXMvZmlzaGVzX2NvbnRyb2xsZXIuanMiLCJob21lL2hvbWVfY29udHJvbGxlci5qcyIsImxlZ2FsL2xlZ2FsX2NvbnRyb2xsZXIuanMiLCJsb2dpbi9sb2dpbl9jb250cm9sbGVyLmpzIiwibWFwL21hcF9jb250cm9sbGVyLmpzIiwibWVudS9tZW51X2NvbnRyb2xsZXIuanMiLCJyZWdpc3Rlci9yZWdpc3Rlcl9jb250cm9sbGVyLmpzIiwidGVjaG5pcXVlX2RldGFpbC90ZWNobmlxdWVfZGV0YWlsX2NvbnRyb2xsZXIuanMiLCJ0ZWNobmlxdWVzL3RlY2huaXF1ZXNfY29udHJvbGxlci5qcyIsInVzZXIvdXNlcl9jb250cm9sbGVyLmpzIiwidXNlcl9jYXJkcy91c2VyX2NhcmRzX2NvbnRyb2xsZXIuanMiLCJhcGkuanMiLCJkYi5qcyIsImZpbHRlci5qcyIsInVwZGF0ZS5qcyIsInV0aWxzLmpzIiwiaWZpc2tlX3Ntcy9pZmlza2Vfc21zLmpzIiwiaW5wdXRfZmllbGQvaWZpc2tlX2lucHV0LmpzIiwic3lzdGVtX2Jyb3dzZXIvc3lzdGVtX2Jyb3dzZXIuanMiXSwibmFtZXMiOlsiYW5ndWxhciIsIm1vZHVsZSIsImNvbnN0YW50IiwidGVtcGxhdGUiLCJydW4iLCIkaW9uaWNQbGF0Zm9ybSIsIlVwZGF0ZSIsIkltZ0NhY2hlIiwicmVhZHkiLCJ3aW5kb3ciLCJpb25pYyIsIktleWJvYXJkIiwiaGlkZUtleWJvYXJkQWNjZXNzb3J5QmFyIiwiU3RhdHVzQmFyIiwic3R5bGVEZWZhdWx0IiwiJGluaXQiLCJ1cGRhdGUiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRpb25pY0NvbmZpZ1Byb3ZpZGVyIiwiSW1nQ2FjaGVQcm92aWRlciIsInNldE9wdGlvbnMiLCJkZWJ1ZyIsInVzZVBlcnNpc3RlbnRDYWNoZSIsIm1hbnVhbEluaXQiLCJ2aWV3cyIsImZvcndhcmRDYWNoZSIsImJhY2tCdXR0b24iLCJwcmV2aW91c1RpdGxlVGV4dCIsInRleHQiLCJ0YWJzIiwicG9zaXRpb24iLCJkZWZhdWx0VXJsIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIm90aGVyd2lzZSIsInN0YXRlIiwidXJsIiwiYWJzdHJhY3QiLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJwYXJhbXMiLCJpZCIsImNvdW50eSIsInNlYXJjaCIsImZpc2giLCJ0ZWNoIiwibWFwIiwiaW5mbyIsImZpc2hpbmZvIiwiY2FyZHMiLCIkc2NvcGUiLCIkY29yZG92YUFwcFZlcnNpb24iLCJ2ZXJzaW9uIiwiZGJEYXRlIiwibGFzdF91cGRhdGUiLCJjb3Jkb3ZhIiwiZ2V0QXBwVmVyc2lvbiIsInRoZW4iLCJjb25zb2xlIiwibG9nIiwiJGlvbmljSGlzdG9yeSIsIiRyb290U2NvcGUiLCIkaW9uaWNWaWV3U3dpdGNoZXIiLCIkc3RhdGVQYXJhbXMiLCJEQiIsIiRpb25pY1NsaWRlQm94RGVsZWdhdGUiLCIkaW9uaWNNb2RhbCIsInRhYnNCYWNrIiwidmlld0hpc3RvcnkiLCJjdXJyZW50VmlldyIsImluZGV4IiwiJGlvbmljR29CYWNrIiwibmV4dERpcmVjdGlvbiIsIiRlbWl0IiwiaGlzdG9yeUlkIiwiZ2V0IiwiaW1hZ2VfZW5kcG9pbnQiLCJpY29ucyIsImdldEFyZWEiLCJhcmVhIiwiaW1hZ2VzIiwiZ2V0T3JnYW5pemF0aW9uIiwib3JnaWQiLCJvcmciLCJnZXRQb2lUeXBlcyIsInBvaV90eXBlcyIsImkiLCJsZW5ndGgiLCJ0eXBlIiwiSUQiLCJpY29uVXJsIiwiaWNvbiIsImdldFBvaXMiLCJwb2lzIiwibWFya2VycyIsInBvaSIsImxheWVyIiwibGF0IiwibGEiLCJsbmciLCJsbyIsIm1lc3NhZ2UiLCJ0IiwiZXJyIiwiZ2V0UG9seWdvbnMiLCJwb2x5Z29ucyIsInBhdGhzIiwicG9seSIsImxhdGxuZ3MiLCJKU09OIiwicGFyc2UiLCJjb2xvciIsImMiLCJ3ZWlnaHQiLCJnZXRBcmVhRmlzaGVzIiwiZmlzaGVzIiwiZ2V0UHJvZHVjdHNCeUFyZWEiLCJwcm9kdWN0cyIsInNvcnRvcmRlciIsInNtc3Rlcm1zIiwicHJlZGljYXRlIiwiZnJvbVRlbXBsYXRlVXJsIiwic2NvcGUiLCJhbmltYXRpb24iLCJtb2RhbCIsInNtc19tb2RhbCIsIm9wZW5Nb2RhbCIsInByb2R1Y3QiLCJzaG93IiwiY2xvc2VNb2RhbCIsImhpZGUiLCJzaG93VGVybXMiLCJzaG93aW5ndGVybXMiLCJydWxlc19tb2RhbCIsIm9wZW5SdWxlc01vZGFsIiwiY2xvc2VSdWxlc01vZGFsIiwiJG9uIiwicmVtb3ZlIiwiZXh0ZW5kIiwiY2VudGVyIiwiem9vbSIsImxheWVycyIsImJhc2VsYXllcnMiLCJtYXBib3giLCJuYW1lIiwibGF5ZXJPcHRpb25zIiwibWFwdHlwZSIsImFwaWtleSIsIm92ZXJsYXlzIiwidmlzaWJsZSIsImRpc2FibGVDbHVzdGVyaW5nQXRab29tIiwiY2h1bmtlZExvYWRpbmciLCJzaG93Q292ZXJhZ2VPbkhvdmVyIiwicmVtb3ZlT3V0c2lkZVZpc2libGVCb3VuZHMiLCIkaW9uaWNTY3JvbGxEZWxlZ2F0ZSIsIiQiLCJxdWVyeUJ5IiwiZGF0YSIsImFyZWFzIiwiY2xlYXJTZWFyY2giLCJzY3JvbGxUb3AiLCIkc3RhdGUiLCJjb250YWN0SW5mbyIsImdldENvdW50aWVzIiwiY291bnRpZXMiLCJnZXRGaXNoIiwiZ2V0RmlzaGVzIiwiZGVmYXVsdF9pbWciLCJpbWciLCJzZXNzaW9uRGF0YSIsImxvZ2dlZEluIiwic2V0IiwiY3VycmVudEhpc3RvcnlJZCIsIm15RnVuYyIsIiRldmVudCIsImtleUNvZGUiLCJzaGlmdEtleSIsImdvIiwic3JjRWxlbWVudCIsInZhbHVlIiwidG9zIiwiJGlvbmljTG9hZGluZyIsInNpZ25JbiIsImxvZ2luRm9ybSIsInVzZXJfbG9naW4iLCJ1c2VybmFtZSIsIiR2aWV3VmFsdWUiLCJwYXNzd29yZCIsIiRzZXRWYWxpZGl0eSIsImVycm9yIiwicmVzcG9uc2UiLCJsZWFmbGV0RGF0YSIsInRlc3QiLCJhIiwiZ2V0TWVzc2FnZVNjb3BlIiwibmV3X3Njb3BlIiwiJG5ldyIsImZpc2hhcmVhcyIsIiRpb25pY1BvcG92ZXIiLCJwb3BvdmVyIiwidXNlcmluZm8iLCJsb2dvdXQiLCJ1c2VyX2xvZ291dCIsImxvZ2luIiwicmVnaXN0ZXIiLCJmb3JjZWRVcGRhdGUiLCJBUEkiLCJjaGVja1VzZXJuYW1lIiwiaW5wdXQiLCJ1c2VyX2V4aXN0cyIsImNoZWNrRW1haWwiLCJmb3JtRXJyb3JzIiwiZm9ybSIsInBob25lIiwiZnVsbG5hbWUiLCJlbWFpbCIsInVzZXJfcmVnaXN0ZXIiLCJyZWdpc3RyYXRpb25FcnJvciIsImVycm9yX2NvZGUiLCJ2ZXJpZnkiLCJ2ZXJjb2RlIiwidXNlcl9jb25maXJtIiwiZXVsYSIsInNob3dFdWxhIiwiY2xvc2VFdWxhIiwiaW1nMSIsImltZzIiLCJpbWczIiwiZmlsdGVyIiwiZWwiLCJnZXRUZWNobmlxdWUiLCJnZXRUZWNobmlxdWVzIiwidGVjaG5pcXVlcyIsImdldFVzZXJJbmZvIiwidXNlciIsImdldFVzZXJOdW1iZXJzIiwibnVtYmVycyIsInByZWQiLCJlbmRwb2ludCIsIm5vdyIsIkRhdGUiLCJnZXRVc2VyUHJvZHVjdHMiLCJwcm92aWRlciIsInRoaXMiLCJiYXNlX3VybCIsIiRnZXQiLCIkaHR0cCIsIiRxIiwiYXBpX2NhbGwiLCJmdWxmaWxsIiwicmVqZWN0IiwibWV0aG9kIiwia2V5IiwidGltZW91dCIsImNhY2hlIiwic3VjY2VzcyIsInN0YXR1cyIsIkVycm9yIiwic2Vzc2lvbl9hcGlfY2FsbCIsInNlc3Npb24iLCJ0b2tlbiIsInMiLCJnZXRfbXVuaWNpcGFsaXRpZXMiLCJtIiwiZ2V0X2NvdW50aWVzIiwiYXJncyIsInBpbiIsInVzZXJfaW5mbyIsInNldFRva2VuIiwiZGVsZXRlVG9rZW4iLCJ1c2VyX3Byb2R1Y3RzIiwiZ2V0X2Zpc2hlcyIsImdldF90ZWNobmlxdWVzIiwiZ2V0X2JhaXRzIiwiZ2V0X29yZ2FuaXphdGlvbnMiLCJnZXRfb3JnX21vZGlmaWVkIiwiZ2V0X2FyZWFzIiwiYXJlYWlkIiwiZ2V0X2FyZWFzX21vZGlmaWVkIiwiZ2V0X3Byb2R1Y3RzIiwiZ2V0X3J1bGVzIiwicnVsZWlkIiwiZ2V0X3Bob3RvcyIsImdldF9tYXBfcG9pcyIsImdldF9tYXBfcG9pX3R5cGVzIiwiZ2V0X21hcF9wb2x5Z29ucyIsInVzZXJfZ2V0X2Zhdm9yaXRlcyIsImdldF90ZXJtc19vZl9zZXJ2aWNlIiwiZ2V0X2NvbnRhY3RfaW5mbyIsImdldF9lbmdpbmVfcG9saWNpZXMiLCJnZXRfc21zX3Rlcm1zIiwidW5kZWZpbmVkIiwiJGNvcmRvdmFTUUxpdGUiLCJkYiIsInNxbGl0ZVBsdWdpbiIsIm9wZW5EQiIsIm9wZW5EYXRhYmFzZSIsInRhYmxlRGVmIiwiQXJlYSIsIkFyZWFfRmlzaCIsIlByb2R1Y3QiLCJDb3VudHkiLCJNdW5pY2lwYWxpdHkiLCJGaXNoIiwiUnVsZSIsIlVzZXJfUHJvZHVjdCIsIlVzZXJfSW5mbyIsIlVzZXJfTnVtYmVyIiwiVGVjaG5pcXVlIiwiT3JnYW5pemF0aW9uIiwiUG9pIiwiUG9pX1R5cGUiLCJQb2x5Z29uIiwiY3JlYXRlT2JqZWN0IiwicmV0dmFsIiwicm93cyIsInB1c2giLCJpdGVtIiwicG9wdWxhdGVUYWJsZSIsInRhYmxlIiwidHJhbnNhY3Rpb24iLCJ0eCIsImV4ZWN1dGVTcWwiLCJzaW5nbGVEYXRhIiwiaW5zZXJ0RGF0YSIsInF1ZXJ5IiwicmVwZWF0Iiwiam9pbiIsImNsZWFuVGFibGUiLCJjbGVhbiIsImluaXQiLCJzcGxpdCIsImV4ZWN1dGUiLCJvYmplY3QiLCJhaWQiLCJzZWFyY2hzdHJpbmciLCJjb3VudHlfaWQiLCJnZXRQcm9kdWN0IiwicHJvZHVjdF9pZCIsImFyZWFfaWQiLCJyZXBsYWNlIiwiTEFTVF9VUERBVEUiLCJwb3B1bGF0ZSIsImFsbCIsImZpc2hBcnIiLCJmaXNoS2V5IiwiZmlkIiwiYW1vdW50IiwiY29tbWVudCIsInBvcHVsYXRlVXNlciIsIm51bUFyciIsIm51bWJlciIsImNsZWFuVXNlciIsInVwZGF0ZUZ1bmMiLCJmb3JjZWQiLCJjdXJyZW50VGltZSIsImxhc3RVcGRhdGUiLCJhV2VlayIsInRlcm1zIiwiZmFjdG9yeSIsIiR3aW5kb3ciLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsInNlcnZpY2UiLCJkaXJlY3RpdmUiLCIkY29yZG92YVNtcyIsIiRpb25pY1BvcHVwIiwicmVzdHJpY3QiLCJsaW5rIiwiYXR0cnMiLCJvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsInByb21wdCIsInRpdGxlIiwiaW5wdXRUeXBlIiwibmdDb3Jkb3ZhU21zIiwic2VuZCIsInRyYW5zY2x1ZGUiLCJsYWJlbCIsInBsYWNlaG9sZGVyIiwibmdQYXR0ZXJuIiwibmdNb2RlbCIsIiRjb3Jkb3ZhSW5BcHBCcm93c2VyIiwib3BlbiIsImhyZWYiLCJ0YXJnZXQiLCJob3N0IiwibG9jYXRpb24iXSwibWFwcGluZ3MiOiJBQUtBQSxRQUFBQyxPQUFBLFVBQ0EsUUFDQSxxQkFDQSxvQkFDQSxhQUNBLFlBQ0EsZUFDQSxnQkFDQSxpQkFDQSx5QkFDQSxZQUNBLGdCQUNBLGVBQ0EsYUFDQSxXQUNBLHNCQUVBQyxTQUFBLHVCQUNBQyxTQUFBLGdDQUdBQyxLQUFBLGlCQUFBLFNBQUEsV0FBQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBRixFQUFBRyxNQUFBLFdBR0FDLE9BQUFDLE9BQUFELE9BQUFDLE1BQUFDLFVBQ0FGLE9BQUFDLE1BQUFDLFNBQUFDLDBCQUFBLEdBRUFILE9BQUFJLFdBRUFBLFVBQUFDLGVBR0FQLEVBQUFRLFFBQ0FULEVBQUFVLGNBSUFD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QUEsdUNBQ0F3TyxDQUhBRSxHQUFBOVIsT0FBQWlTLGFBQUEsZ0JBQUEsTUFBQSxhQUFBLFVBT0EsR0FBQUMsSUFDQUMsT0FDQSxLQUFBLFFBQ0EsUUFBQSxRQUNBLElBQUEsU0FDQSxLQUFBLFNBQ0EsT0FBQSxTQUNBLEtBQUEsUUFDQSxLQUFBLFFBQ0EsS0FBQSxRQUNBLEtBQUEsUUFDQSxLQUFBLFFBQ0EsS0FBQSxRQUNBLE1BQUEsU0FDQSxNQUFBLFNBQ0EsT0FBQSxTQUNBLE1BQUEsUUFDQSxNQUFBLFFBQ0EsTUFBQSxRQUNBLE1BQUEsUUFDQSxNQUFBLFNBQ0EsTUFBQSxRQUNBLE1BQUEsUUFDQSxJQUFBLFNBRUFDLFlBQ0EsS0FBQSxTQUNBLE1BQUEsUUFDQSxNQUFBLFFBQ0EsU0FBQSxRQUNBLFVBQUEsU0FFQUMsVUFDQSxLQUFBLFFBQ0EsSUFBQSxTQUNBLEtBQUEsU0FDQSxLQUFBLFNBQ0EsS0FBQSxTQUNBLEtBQUEsU0FDQSxLQUFBLFFBQ0EsS0FBQSxRQUNBLEtBQUEsUUFDQSxRQUFBLFFBQ0EsTUFBQSxRQUNBLEtBQUEsUUFDQSxLQUFBLFNBRUFDLFNBQ0EsS0FBQSxRQUNBLElBQUEsU0FDQSxJQUFBLFNBQ0EsSUFBQSxTQUVBQyxlQUNBLEtBQUEsUUFDQSxNQUFBLFFBQ0EsT0FBQSxTQUVBQyxPQUNBLEtBQUEsUUFDQSxJQUFBLFNBQ0EsSUFBQSxTQUNBLE1BQUEsUUFDQSxLQUFBLFFBQ0EsTUFBQSxRQUNBLE9BQUEsU0FDQSxNQUFBLFNBQ0EsS0FBQSxTQUNBLE1BQUEsU0FDQSxPQUFBLFNBQ0EsTUFBQSxTQUNBLE1BQUEsU0FFQUMsT0FDQSxLQUFBLFFBQ0EsTUFBQSxRQUNBLElBQUEsU0FDQSxJQUFBLFNBRUFDLGVBQ0EsS0FBQSxRQUNBLEtBQUEsUUFDQSxPQUFBLFFBQ0EsS0FBQSxRQUNBLFdBQUEsU0FDQSxLQUFBLFNBQ0EsT0FBQSxRQUNBLE9BQUEsUUFDQSxJQUFBLFNBQ0EsS0FBQSxRQUNBLE1BQUEsUUFDQSxNQUFBLFNBRUFDLFlBQ0EsS0FBQSxRQUNBLFdBQUEsU0FD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U0FBQW1CLEdBQ0EsWUFDQSxRQUNBaEIsU0FBQSxJQUNBQyxLQUFBLFNBQUF0UCxFQUFBMkcsR0FDQUEsRUFBQTZJLEdBQUEsUUFBQSxTQUFBQyxHQUNBQSxFQUFBZSxPQUFBRCxNQUFBZCxFQUFBZSxPQUFBQyxPQUFBNVgsT0FBQTZYLFNBQUFELE9BQ0FKLEVBQUFDLEtBQUFiLEVBQUFlLE9BQUFELEtBQUEsV0FDQWQsRUFBQUMiLCJmaWxlIjoiYWxsLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGFuZ3VsYXIubW9kdWxlIGlzIGEgZ2xvYmFsIHBsYWNlIGZvciBjcmVhdGluZywgcmVnaXN0ZXJpbmcgYW5kIHJldHJpZXZpbmcgQW5ndWxhciBtb2R1bGVzXG4vLyAnaWZpc2tlJyBpcyB0aGUgbmFtZSBvZiB0aGlzIGFuZ3VsYXIgbW9kdWxlIGV4YW1wbGUgKGFsc28gc2V0IGluIGEgPGJvZHk+IGF0dHJpYnV0ZSBpbiBpbmRleC5odG1sKVxuLy8gdGhlIDJuZCBwYXJhbWV0ZXIgaXMgYW4gYXJyYXkgb2YgJ3JlcXVpcmVzJ1xuLy8gJ2lmaXNrZS5jb250cm9sbGVycycgaXMgZm91bmQgaW4gY29udHJvbGxlcnMuanNcblxuYW5ndWxhci5tb2R1bGUoJ2lmaXNrZScsIFtcbiAgICAnaW9uaWMnLFxuICAgICdpZmlza2UuY29udHJvbGxlcnMnLFxuICAgICdpZmlza2UuZGlyZWN0aXZlcycsXG4gICAgJ2lmaXNrZS5hcGknLFxuICAgICdpZmlza2UuZGInLFxuICAgICdpZmlza2UudXRpbHMnLFxuICAgICdpZmlza2UudXBkYXRlJyxcbiAgICAnaWZpc2tlLmZpbHRlcnMnLFxuICAgICdpb25pYy5pb24uaGVhZGVyU2hyaW5rJyxcbiAgICAnbmdDb3Jkb3ZhJyxcbiAgICAnc3lzdGVtQnJvd3NlcicsXG4gICAgJ25nQ29yZG92YVNtcycsXG4gICAgJ25nTWVzc2FnZXMnLFxuICAgICdJbWdDYWNoZScsXG4gICAgJ2xlYWZsZXQtZGlyZWN0aXZlJ1xuXSlcbi5jb25zdGFudCgnJGlvbmljTG9hZGluZ0NvbmZpZycsIHtcbiAgICB0ZW1wbGF0ZTogJzxpb24tc3Bpbm5lcj48L2lvbi1zcGlubmVyPidcbiAgICAvLyBoaWRlT25TdGF0ZUNoYW5nZTogdHJ1ZVxufSlcbi5ydW4oWyckaW9uaWNQbGF0Zm9ybScsICdVcGRhdGUnLCAnSW1nQ2FjaGUnLCBmdW5jdGlvbigkaW9uaWNQbGF0Zm9ybSwgVXBkYXRlLCBJbWdDYWNoZSkge1xuICAgICRpb25pY1BsYXRmb3JtLnJlYWR5KGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBIaWRlIHRoZSBhY2Nlc3NvcnkgYmFyIGJ5IGRlZmF1bHQgKHJlbW92ZSB0aGlzIHRvIHNob3cgdGhlIGFjY2Vzc29yeSBiYXIgYWJvdmUgdGhlIGtleWJvYXJkXG4gICAgICAgIC8vIGZvciBmb3JtIGlucHV0cylcbiAgICAgICAgaWYod2luZG93LmlvbmljICYmIHdpbmRvdy5pb25pYy5LZXlib2FyZCkge1xuICAgICAgICAgICAgd2luZG93LmlvbmljLktleWJvYXJkLmhpZGVLZXlib2FyZEFjY2Vzc29yeUJhcih0cnVlKTtcbiAgICAgICAgfVxuICAgICAgICBpZih3aW5kb3cuU3RhdHVzQmFyKSB7XG4gICAgICAgICAgICAvLyBvcmcuYXBhY2hlLmNvcmRvdmEuc3RhdHVzYmFyIHJlcXVpcmVkXG4gICAgICAgICAgICBTdGF0dXNCYXIuc3R5bGVEZWZhdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICBJbWdDYWNoZS4kaW5pdCgpO1xuICAgICAgICBVcGRhdGUudXBkYXRlKCk7XG4gICAgfSk7XG59XSlcblxuLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgJyR1cmxSb3V0ZXJQcm92aWRlcicsICckaW9uaWNDb25maWdQcm92aWRlcicsICdJbWdDYWNoZVByb3ZpZGVyJywgZnVuY3Rpb24oJHN0YXRlUHJvdmlkZXIsICR1cmxSb3V0ZXJQcm92aWRlciwgJGlvbmljQ29uZmlnUHJvdmlkZXIsIEltZ0NhY2hlUHJvdmlkZXIpIHtcblxuICAgIEltZ0NhY2hlUHJvdmlkZXIuc2V0T3B0aW9ucyh7XG4gICAgICAgIGRlYnVnOiB0cnVlLFxuICAgICAgICB1c2VQZXJzaXN0ZW50Q2FjaGU6IHRydWVcbiAgICB9KTtcbiAgICBJbWdDYWNoZVByb3ZpZGVyLm1hbnVhbEluaXQgPSB0cnVlO1xuXG5cblxuICAgIC8vIENhY2hlIHZpZXdzIGluIHRoZSBmb3J3YXJkIHN0YWNrXG4gICAgJGlvbmljQ29uZmlnUHJvdmlkZXIudmlld3MuZm9yd2FyZENhY2hlKHRydWUpO1xuXG4gICAgLy8gQ2xlYXIgYmFjayBidXR0b24gZGVmYXVsdCB0ZXh0XG4gICAgJGlvbmljQ29uZmlnUHJvdmlkZXIuYmFja0J1dHRvbi5wcmV2aW91c1RpdGxlVGV4dChmYWxzZSkudGV4dCgnJyk7XG5cbiAgICAvLyBUYWJzIHBvc2l0aW9uXG4gICAgJGlvbmljQ29uZmlnUHJvdmlkZXIudGFicy5wb3NpdGlvbignYm90dG9tJyk7XG5cbiAgICAvKipcbiAgICAgKiBJb25pYyB1c2VzIEFuZ3VsYXJVSSBSb3V0ZXIuIExlYXJuIG1vcmUgaGVyZTpcbiAgICAgKiBodHRwczovL2dpdGh1Yi5jb20vYW5ndWxhci11aS91aS1yb3V0ZXJcbiAgICAgKi9cblxuICAgIHZhciBkZWZhdWx0VXJsID0gJy9zdGFydC9sb2dpbic7XG4gICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2Vzc2lvbicpKSB7XG4gICAgICAgIGRlZmF1bHRVcmwgPSAnL21lbnUvaG9tZSc7XG4gICAgfVxuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoZGVmYXVsdFVybCk7XG5cblxuXG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAvLyBBYnN0cmFjdCBwcmUtbWVudSBzdGF0ZS4gTmVlZGVkIGZvciBuYXZpZ2F0aW9uIGJldHdlZW4gbG9naW4gYW5kIHJlZ2lzdGVyIHZpZXdzLlxuICAgIC5zdGF0ZSgnc3RhcnQnLCB7XG4gICAgICAgIHVybDogJy9zdGFydCcsXG4gICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvc3RhcnQvc3RhcnQuaHRtbCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnc3RhcnQubG9naW4nLCB7XG4gICAgICAgIHVybDogJy9sb2dpbicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9sb2dpbi9sb2dpbi5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnc3RhcnQucmVnaXN0ZXInLCB7XG4gICAgICAgIHVybDogJy9yZWdpc3RlcicsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9yZWdpc3Rlci9yZWdpc3Rlci5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1JlZ2lzdGVyQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnc3RhcnQucmVnaXN0ZXIuZGV0YWlscycsIHtcbiAgICAgICAgdXJsOiAnL2RldGFpbHMnLFxuXHR0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvcmVnaXN0ZXIvcmVnaXN0ZXJfZGV0YWlscy5odG1sJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdzdGFydC5yZWdpc3Rlci52ZXJpZnknLCB7XG4gICAgICAgIHVybDogJy92ZXJpZnknLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvcmVnaXN0ZXIvcmVnaXN0ZXJfdmVyaWZ5Lmh0bWwnXG4gICAgfSlcblxuICAgIC8vIEFic3RyYWN0IG1lbnUgc3RhdGUuIFwiUm9vdFwiIHN0YXRlIG9uY2Ugd2UncmUgcGFzdCB0aGUgbG9naW4gc3RhdGUuXG4gICAgLnN0YXRlKCdtZW51Jywge1xuICAgICAgICB1cmw6ICcvbWVudScsXG4gICAgICAgIGFic3RyYWN0OiB0cnVlLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvbWVudS9tZW51Lmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTWVudUN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuaG9tZScsIHtcbiAgICAgICAgdXJsOiAnL2hvbWUnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvaG9tZS9ob21lLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuaW5mbycsIHtcbiAgICAgICAgdXJsOiAnL2luZm8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvaW5mby9pbmZvLmh0bWwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuYnVncycsIHtcbiAgICAgICAgdXJsOiAnL2luZm8nLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvbWVudS9yZXBvcnQuaHRtbCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5jb250YWN0Jywge1xuICAgICAgICB1cmw6ICcvY29udGFjdCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9jb250YWN0L2NvbnRhY3QuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdDb250YWN0Q3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5sZWdhbCcsIHtcbiAgICAgICAgdXJsOiAnL2xlZ2FsJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2xlZ2FsL2xlZ2FsLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnTGVnYWxDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmFib3V0Jywge1xuICAgICAgICB1cmw6ICcvYWJvdXQnLFxuICAgICAgICB0ZW1wbGF0ZVVybDogJ2NvbXBvbmVudHMvYWJvdXQvYWJvdXQuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBYm91dEN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUudXNlcmluZm8nLCB7XG4gICAgICAgIHVybDogJy91c2VyaW5mbycsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ3RybCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy91c2VyL3VzZXIuaHRtbCcsXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuY291bnRpZXMnLCB7XG4gICAgICAgIHVybDogJy9jb3VudGllcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9jb3VudGllcy9jb3VudGllcy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0NvdW50aWVzQ3RybCdcbiAgICB9KVxuICAgIC5zdGF0ZSgnbWVudS5hcmVhcycsIHtcbiAgICAgICAgdXJsOiAnL2FyZWFzJyxcbiAgICAgICAgcGFyYW1zOiB7J2lkJzogZmFsc2UsICdjb3VudHknOiBmYWxzZSwgJ3NlYXJjaCc6ICcnfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWFfbGlzdC9hcmVhX2xpc3QuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdBcmVhc0N0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuY2FyZHMnLCB7XG4gICAgICAgIHVybDogJy9jYXJkcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy91c2VyX2NhcmRzL3VzZXJfY2FyZHMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdVc2VyQ2FyZHNDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmZhdm9yaXRlcycsIHtcbiAgICAgICAgdXJsOiAnL2Zhdm9yaXRlcycsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9mYXZvcml0ZXMvZmF2b3JpdGVzLmh0bWwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUuZmlzaGVzJywge1xuICAgICAgICB1cmw6ICcvZmlzaGVzJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2Zpc2hlcy9maXNoZXMuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdGaXNoZXNDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LmZpc2hkZXRhaWwnLCB7XG4gICAgICAgIHVybDogJy9maXNoZGV0YWlsLzppZCcsXG4gICAgICAgIHBhcmFtczogeydpZCc6IGZhbHNlLCAnZmlzaCc6IGZhbHNlfSxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2Zpc2hfZGV0YWlsL2Zpc2hfZGV0YWlsLmh0bWwnLFxuICAgICAgICBjb250cm9sbGVyOiAnRmlzaERldGFpbEN0cmwnXG4gICAgfSlcbiAgICAuc3RhdGUoJ21lbnUubWFwJywge1xuICAgICAgICB1cmw6ICcvbWFwJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL21hcC9tYXAuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdNYXBDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LnRlY2huaXF1ZXMnLCB7XG4gICAgICAgIHVybDogJy90ZWNobmlxdWVzJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL3RlY2huaXF1ZXMvdGVjaG5pcXVlcy5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ1RlY2huaXF1ZXNDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LnRlY2huaXF1ZWRldGFpbCcsIHtcbiAgICAgICAgdXJsOiAnL3RlY2huaXF1ZWRldGFpbC86aWQnLFxuICAgICAgICBwYXJhbXM6IHsnaWQnOiBmYWxzZSwgJ3RlY2gnOiBmYWxzZX0sXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy90ZWNobmlxdWVfZGV0YWlsL3RlY2huaXF1ZV9kZXRhaWwuaHRtbCcsXG4gICAgICAgIGNvbnRyb2xsZXI6ICdUZWNobmlxdWVEZXRhaWxDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdtZW51LnJlcG9ydCcsIHtcbiAgICAgICAgdXJsOiAnL3JlcG9ydCcsXG4gICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9yZXBvcnQvcmVwb3J0Lmh0bWwnXG4gICAgfSlcblxuICAgIC5zdGF0ZSgnYXJlYScsIHtcbiAgICAgICAgYWJzdHJhY3Q6dHJ1ZSxcbiAgICAgICAgdXJsOiAnL2FyZWEvOmlkJyxcbiAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWEvYXJlYS5odG1sJyxcbiAgICAgICAgY29udHJvbGxlcjogJ0FyZWFDdHJsJ1xuICAgIH0pXG4gICAgLnN0YXRlKCdhcmVhLm1hcCcsIHtcbiAgICAgICAgdXJsOiAnL21hcCcsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAnbWFwJzoge1xuICAgICAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnY29tcG9uZW50cy9hcmVhL21hcC5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2FyZWEuaW5mbycsIHtcbiAgICAgICAgdXJsOiAnL2luZm8nLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgICAgJ2luZm8nOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWEvaW5mby5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2FyZWEuZmlzaGluZm8nLCB7XG4gICAgICAgIHVybDogJy9maXNoaW5mbycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAnZmlzaGluZm8nOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWEvZmlzaC5odG1sJ1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSlcbiAgICAuc3RhdGUoJ2FyZWEuY2FyZHMnLCB7XG4gICAgICAgIHVybDogJy9jYXJkcycsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgICAnY2FyZHMnOiB7XG4gICAgICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdjb21wb25lbnRzL2FyZWEvY2FyZHMuaHRtbCdcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xufV0pO1xuXG5hbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJywgW10pO1xuYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5kaXJlY3RpdmVzJywgW10pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4gICAgLmNvbnRyb2xsZXIoJ0Fib3V0Q3RybCcsIFsnJHNjb3BlJywnJGNvcmRvdmFBcHBWZXJzaW9uJywgJyRpb25pY1BsYXRmb3JtJywgJ1VwZGF0ZScsIGZ1bmN0aW9uKCRzY29wZSwgJGNvcmRvdmFBcHBWZXJzaW9uLCAkaW9uaWNQbGF0Zm9ybSwgVXBkYXRlKSB7XG5cdCRzY29wZS52ZXJzaW9uID0gJHNjb3BlLmRiRGF0ZSA9ICdPa8OkbnQnO1xuICAgICRzY29wZS5kYkRhdGUgPSBVcGRhdGUubGFzdF91cGRhdGUoKTtcblxuXHQkaW9uaWNQbGF0Zm9ybS5yZWFkeShmdW5jdGlvbigpIHtcblx0ICAgIGlmICh3aW5kb3cuY29yZG92YSkge1xuXHRcdCRjb3Jkb3ZhQXBwVmVyc2lvbi5nZXRBcHBWZXJzaW9uKCkudGhlbihmdW5jdGlvbih2ZXJzaW9uKSB7XG5cdFx0ICAgIGNvbnNvbGUubG9nKHZlcnNpb24pO1xuXHRcdCAgICAkc2NvcGUudmVyc2lvbiA9IHZlcnNpb247XG5cdFx0fSk7XG5cdCAgICB9XG5cdH0pO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignQXJlYUN0cmwnLCBbXG4gICAgJyRzY29wZScsXG4gICAgJyRpb25pY0hpc3RvcnknLFxuICAgICdsb2NhbFN0b3JhZ2UnLFxuICAgICckcm9vdFNjb3BlJyxcbiAgICAnJGlvbmljVmlld1N3aXRjaGVyJyxcbiAgICAnJHN0YXRlUGFyYW1zJyxcbiAgICAnREInLFxuICAgICckaW9uaWNTbGlkZUJveERlbGVnYXRlJyxcbiAgICAnJGlvbmljTW9kYWwnLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgJGlvbmljSGlzdG9yeSwgbG9jYWxTdG9yYWdlLCAkcm9vdFNjb3BlLCAkaW9uaWNWaWV3U3dpdGNoZXIsICRzdGF0ZVBhcmFtcywgREIsICRpb25pY1NsaWRlQm94RGVsZWdhdGUsICRpb25pY01vZGFsKSB7XG5cbiAgICAgICAgJHNjb3BlLm1hcCA9IHt9O1xuXG4gICAgICAgICRzY29wZS50YWJzQmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgdmlldyBpcyBhdCB0aGUgdG9wIG9mIGl0cyBoaXN0b3J5IHN0YWNrXG4gICAgICAgICAgICBpZighJGlvbmljSGlzdG9yeS52aWV3SGlzdG9yeSgpLmN1cnJlbnRWaWV3LmluZGV4KSB7XG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU3dpdGNoIHRvIHRoZSBob21lIGhpc3Rvcnkgc3RhY2tcbiAgICAgICAgICAgICAgICAgKiBTZWUgJGlvbmljSGlzdG9yeSBzb3VyY2UgZm9yIHRoZSBldmVuIGhhbmRsZXIgdXNlZFxuICAgICAgICAgICAgICAgICAqIFNlZSBob21lX2NvbnRyb2xsZXIuanMgZm9yIHRoZSBoaXN0b3J5SWQgdXNlZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgICRpb25pY1ZpZXdTd2l0Y2hlci5uZXh0RGlyZWN0aW9uKCdiYWNrJyk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLiRlbWl0KCckaW9uaWNIaXN0b3J5LmNoYW5nZScsIHtcbiAgICAgICAgICAgICAgICAgICAgaGlzdG9yeUlkOiBsb2NhbFN0b3JhZ2UuZ2V0KCdob21lSGlzdG9yeUlkJylcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gRGVmYXVsdCBiYWNrIGFjdGlvblxuICAgICAgICAgICAgICAgICRyb290U2NvcGUuJGlvbmljR29CYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmltYWdlX2VuZHBvaW50ID0gJ2h0dHA6Ly93d3cuaWZpc2tlLnNlJztcblxuICAgICAgICB2YXIgaWNvbnMgPSB7fTtcbiAgICAgICAgLy8gQXJlYWluZm9cbiAgICAgICAgREIuZ2V0QXJlYSgkc3RhdGVQYXJhbXMuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGFyZWEpIHtcbiAgICAgICAgICAgICRzY29wZS5pbWFnZXMgPSBhcmVhLmltYWdlcztcblxuICAgICAgICAgICAgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZS51cGRhdGUoKTtcbiAgICAgICAgICAgICRzY29wZS5hcmVhID0gYXJlYTtcblxuICAgICAgICAgICAgREIuZ2V0T3JnYW5pemF0aW9uKGFyZWEub3JnaWQpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihvcmcpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JnID0gb3JnO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBEQi5nZXRQb2lUeXBlcygpXG4gICAgICAgICAgICAudGhlbihmdW5jdGlvbihwb2lfdHlwZXMpIHtcbiAgICAgICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgcG9pX3R5cGVzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciB0eXBlID0gcG9pX3R5cGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBpY29uc1t0eXBlLklEXSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb25Vcmw6ICdodHRwOi8vd3d3LmlmaXNrZS5zZS8nK3R5cGUuaWNvblxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBEQi5nZXRQb2lzKGFyZWEub3JnaWQpXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocG9pcykge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhwb2lzKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5tYXJrZXJzID0gcG9pcy5tYXAoZnVuY3Rpb24ocG9pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyOiAncG9pcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGF0OiBwb2kubGEsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbG5nOiBwb2kubG8sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogaWNvbnNbcG9pLnR5cGVdLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHBvaS50XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBEQi5nZXRQb2x5Z29ucyhhcmVhLm9yZ2lkKVxuICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHBvbHlnb25zKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHBvbHlnb25zKTtcbiAgICAgICAgICAgICAgICAgICAgJHNjb3BlLm1hcC5wYXRocyA9IHBvbHlnb25zLm1hcChmdW5jdGlvbihwb2x5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxhdGxuZ3M6IEpTT04ucGFyc2UoJ1snICsgcG9seS5wb2x5ICsgJ10nKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcG9seS5jLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodDogMlxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBEQi5nZXRBcmVhRmlzaGVzKCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZmlzaGVzKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmaXNoZXMpO1xuICAgICAgICAgICAgJHNjb3BlLmZpc2hlcyA9IGZpc2hlcztcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcblxuICAgICAgICBEQi5nZXRQcm9kdWN0c0J5QXJlYSgkc3RhdGVQYXJhbXMuaWQpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKHByb2R1Y3RzKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdHMgPSBwcm9kdWN0cztcbiAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBcmVhIGZpc2hlc1xuICAgICAgICAkc2NvcGUuc29ydG9yZGVyID0gJy1hbW91bnQnO1xuXG4gICAgICAgIC8vQXJlYV9DYXJkc1xuICAgICAgICAkc2NvcGUuc21zdGVybXMgPSBsb2NhbFN0b3JhZ2UuZ2V0KCdzbXNfdGVybXMnKTtcbiAgICAgICAgJHNjb3BlLnByZWRpY2F0ZSA9IFwic29cIjtcblxuXG4gICAgICAgIC8vU01TLW1vZGFsXG4gICAgICAgICRpb25pY01vZGFsLmZyb21UZW1wbGF0ZVVybCgnY29tcG9uZW50cy9hcmVhL3Ntc19tb2RhbC5odG1sJywge1xuICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAkc2NvcGUuc21zX21vZGFsID0gbW9kYWw7XG4gICAgICAgIH0pO1xuICAgICAgICAkc2NvcGUub3Blbk1vZGFsID0gZnVuY3Rpb24ocHJvZHVjdCkge1xuICAgICAgICAgICAgJHNjb3BlLnNtc19tb2RhbC5zaG93KCk7XG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdCA9IHByb2R1Y3Q7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5jbG9zZU1vZGFsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkc2NvcGUuc21zX21vZGFsLmhpZGUoKTtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLnNob3dUZXJtcyA9IGZ1bmN0aW9uKCRldmVudCkge1xuICAgICAgICAgICAgJHNjb3BlLnNob3dpbmd0ZXJtcyA9ICEkc2NvcGUuc2hvd2luZ3Rlcm1zO1xuICAgICAgICB9O1xuICAgICAgICAkc2NvcGUuc2hvd2luZ3Rlcm1zID0gZmFsc2U7XG5cbiAgICAgICAgLy9SdWxlcyBtb2RhbFxuICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ2NvbXBvbmVudHMvYXJlYS9ydWxlc19tb2RhbC5odG1sJywge1xuICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAkc2NvcGUucnVsZXNfbW9kYWwgPSBtb2RhbDtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5vcGVuUnVsZXNNb2RhbCA9IGZ1bmN0aW9uKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc19tb2RhbC5zaG93KCk7XG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdCA9IHByb2R1Y3Q7XG4gICAgICAgIH07XG4gICAgICAgICRzY29wZS5jbG9zZVJ1bGVzTW9kYWwgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc19tb2RhbC5oaWRlKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRzY29wZS5zbXNfbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAkc2NvcGUucnVsZXNfbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vTWFwXG4gICAgICAgIGFuZ3VsYXIuZXh0ZW5kKCRzY29wZS5tYXAsIHtcbiAgICAgICAgICAgIGNlbnRlcjoge1xuICAgICAgICAgICAgICAgIGxhdDogNjIuMCxcbiAgICAgICAgICAgICAgICBsbmc6IDE1LjAsXG4gICAgICAgICAgICAgICAgem9vbTogNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxheWVyczoge1xuICAgICAgICAgICAgICAgIGJhc2VsYXllcnM6IHtcbiAgICAgICAgICAgICAgICAgICAgbWFwYm94OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnTWFwYm94JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd4eXonLFxuICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAnaHR0cDovL2FwaS50aWxlcy5tYXBib3guY29tL3Y0L3ttYXB0eXBlfS97en0ve3h9L3t5fUAyeC5wbmc/YWNjZXNzX3Rva2VuPXthcGlrZXl9JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGxheWVyT3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcHR5cGU6ICdtYXBib3gub3V0ZG9vcnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwaWtleTogJ3BrLmV5SjFJam9pYldGcGMzUm9ieUlzSW1FaU9pSTNVbXM1UjBJd0luMC5ET2hVODFjbEhMRWhUajgxRElPamRnJ1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvdmVybGF5czoge1xuICAgICAgICAgICAgICAgICAgICBwb2lzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRmlza2VvbXLDpWRlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWFya2VyY2x1c3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUNsdXN0ZXJpbmdBdFpvb206IDksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtlZExvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvdmVyYWdlT25Ib3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlT3V0c2lkZVZpc2libGVCb3VuZHM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdBcmVhc0N0cmwnLCBbJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnJGlvbmljU2Nyb2xsRGVsZWdhdGUnICwnREInLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgJGlvbmljU2Nyb2xsRGVsZWdhdGUgLERCKSB7XG5cbiAgICAkc2NvcGUuc2VhcmNoID0geyckJzogJHN0YXRlUGFyYW1zLnNlYXJjaH07XG4gICAgJHNjb3BlLnF1ZXJ5QnkgPSAnJCc7XG4gICAgJHNjb3BlLmNvdW50eSA9ICRzdGF0ZVBhcmFtcy5jb3VudHk7XG4gICAgREIuc2VhcmNoKCcnLCAkc3RhdGVQYXJhbXMuaWQpXG4gICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmFyZWFzID0gZGF0YTtcbiAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbiAgICAkc2NvcGUuY2xlYXJTZWFyY2ggPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy90b2RvOiBjbGVhciBzZWFyY2ggZmllbGRcbiAgICB9O1xuICAgICRzY29wZS5zY3JvbGxUb3AgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGlvbmljU2Nyb2xsRGVsZWdhdGUuc2Nyb2xsVG9wKCk7XG4gICAgfTtcblxufV0pO1xuXG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdDb250YWN0Q3RybCcsIFsnJHNjb3BlJywgJyRzdGF0ZScsICdsb2NhbFN0b3JhZ2UnLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgbG9jYWxTdG9yYWdlKSB7XG4gICAgICAgICRzY29wZS5jb250YWN0SW5mbyA9IGxvY2FsU3RvcmFnZS5nZXQoJ2NvbnRhY3RJbmZvJyk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdDb3VudGllc0N0cmwnLCBbJyRzY29wZScsICdEQicsIGZ1bmN0aW9uKCRzY29wZSwgREIpIHtcbiAgICBEQi5nZXRDb3VudGllcygpXG4gICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkc2NvcGUuY291bnRpZXMgPSBkYXRhO1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignRmlzaERldGFpbEN0cmwnLCBbJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnREInLCBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZVBhcmFtcywgREIpIHtcbiAgICAkc2NvcGUuZmlzaCA9ICRzdGF0ZVBhcmFtcy5maXNoO1xuICAgICRzY29wZS5pbWFnZV9lbmRwb2ludCA9ICdodHRwOi8vd3d3LmlmaXNrZS5zZSc7XG4gICAgaWYoISRzY29wZS5maXNoKSB7XG4gICAgICAgIERCLmdldEZpc2goJHN0YXRlUGFyYW1zLmlkKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAkc2NvcGUuZmlzaCA9IGRhdGE7XG4gICAgY29uc29sZS5sb2coJHNjb3BlLmZpc2gpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBjb25zb2xlLmxvZygkc2NvcGUuZmlzaCk7XG59XSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdGaXNoZXNDdHJsJywgWyckc2NvcGUnLCAnREInLCBmdW5jdGlvbigkc2NvcGUsIERCKSB7XG4gICAgJHNjb3BlLnNvcnRvcmRlciA9ICdzbyc7XG4gICAgJHNjb3BlLmltYWdlX2VuZHBvaW50ID0gJ2h0dHA6Ly93d3cuaWZpc2tlLnNlJztcbiAgICBEQi5nZXRGaXNoZXMoKVxuICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJHNjb3BlLmZpc2hlcyA9IGRhdGE7XG4gICAgICAgICRzY29wZS5kZWZhdWx0X2ltZyA9IGRhdGFbMF0uaW1nO1xuICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignSG9tZUN0cmwnLCBbXG4gICAgJyRzY29wZScsXG4gICAgJyRzdGF0ZScsXG4gICAgJyRpb25pY0hpc3RvcnknLFxuICAgICdsb2NhbFN0b3JhZ2UnLFxuICAgICdzZXNzaW9uRGF0YScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRpb25pY0hpc3RvcnksIGxvY2FsU3RvcmFnZSwgc2Vzc2lvbkRhdGEpIHtcblxuICAgICAgICAkc2NvcGUubG9nZ2VkSW4gPSBzZXNzaW9uRGF0YTtcblxuICAgICAgICAvLyBDdXJyZW50IGhpc3Rvcnkgc3RhY2sgSWQuIFNlZSBhcmVhX2NvbnRyb2xsZXIgZm9yIHVzYWdlLlxuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCdob21lSGlzdG9yeUlkJywgJGlvbmljSGlzdG9yeS5jdXJyZW50SGlzdG9yeUlkKCkpO1xuXG4gICAgICAgICRzY29wZS5teUZ1bmMgPSBmdW5jdGlvbigkZXZlbnQpIHtcbiAgICAgICAgICAgIGlmKCRldmVudC5rZXlDb2RlID09IDEzICYmICEkZXZlbnQuc2hpZnRLZXkpIHsgLy9pZiBlbnRlci1rZXlcbiAgICAgICAgICAgICAgICAkc3RhdGUuZ28oJ21lbnUuYXJlYXMnLCB7c2VhcmNoOiAkZXZlbnQuc3JjRWxlbWVudC52YWx1ZX0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG4gICAgfVxuXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdMZWdhbEN0cmwnLCBbJyRzY29wZScsICckc3RhdGUnLCAnbG9jYWxTdG9yYWdlJywgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsIGxvY2FsU3RvcmFnZSkge1xuICAgICRzY29wZS50b3MgPSBsb2NhbFN0b3JhZ2UuZ2V0KCd0b3MnKTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ0xvZ2luQ3RybCcsIFsnJHNjb3BlJywgJyRzdGF0ZScsICdVcGRhdGUnLCAnJGlvbmljTG9hZGluZycsIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlLCBVcGRhdGUsICRpb25pY0xvYWRpbmcpIHtcbiAgICAvLyRzY29wZS51c2VyID0ge307XG4gICAgJHNjb3BlLnNpZ25JbiA9IGZ1bmN0aW9uKGxvZ2luRm9ybSkge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coKTtcblxuICAgICAgICBVcGRhdGUudXNlcl9sb2dpbihsb2dpbkZvcm0udXNlcm5hbWUuJHZpZXdWYWx1ZSwgbG9naW5Gb3JtLnBhc3N3b3JkLiR2aWV3VmFsdWUpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgbG9naW5Gb3JtLiRzZXRWYWxpZGl0eShcImxvZ2luRXJyb3JcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAkc3RhdGUuZ28oJ21lbnUuaG9tZScpO1xuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICBsb2dpbkZvcm0uJHNldFZhbGlkaXR5KFwibG9naW5FcnJvclwiLCBmYWxzZSk7XG4gICAgICAgICAgICAkc2NvcGUuZXJyb3IgPSBlcnJvci5yZXNwb25zZTtcbiAgICAgICAgfSk7XG4gICAgfTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ01hcEN0cmwnLCBbXG4gICAgJyRzY29wZScsXG4gICAgJ2xlYWZsZXREYXRhJyxcbiAgICAnREInLFxuICAgIGZ1bmN0aW9uKCRzY29wZSwgbGVhZmxldERhdGEsIERCKSB7XG4gICAgICAgICRzY29wZS50ZXN0PSAnaGVqJztcbiAgICAgICAgREIuc2VhcmNoKCcnKS50aGVuKGZ1bmN0aW9uKGFyZWFzKXtcbiAgICAgICAgICAgICRzY29wZS5tYXJrZXJzID0gYXJlYXMubWFwKGZ1bmN0aW9uKGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBsYXllcjogJ2Zpc2hhcmVhcycsXG4gICAgICAgICAgICAgICAgICAgIGxhdDogYS5sYXQsXG4gICAgICAgICAgICAgICAgICAgIGxuZzogYS5sbmcsXG4gICAgICAgICAgICAgICAgICAgIGdldE1lc3NhZ2VTY29wZTogZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBuZXdfc2NvcGUgPSAkc2NvcGUuJG5ldygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbmV3X3Njb3BlLmFyZWEgPSBhO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld19zY29wZTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJzxhIHVpLXNyZWY9XCJhcmVhLmluZm8oe2lkOiBhcmVhLklEIH0pXCI+e3thcmVhLnR9fTwvYT4nXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICAgICAgYW5ndWxhci5leHRlbmQoJHNjb3BlLCB7XG4gICAgICAgICAgICBjZW50ZXI6IHtcbiAgICAgICAgICAgICAgICBsYXQ6IDYyLjAsXG4gICAgICAgICAgICAgICAgbG5nOiAxNS4wLFxuICAgICAgICAgICAgICAgIHpvb206IDVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBsYXllcnM6IHtcbiAgICAgICAgICAgICAgICBiYXNlbGF5ZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgIG1hcGJveDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ01hcGJveCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAneHl6JyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJ2h0dHA6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC97bWFwdHlwZX0ve3p9L3t4fS97eX1AMngucG5nP2FjY2Vzc190b2tlbj17YXBpa2V5fScsXG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllck9wdGlvbnM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXB0eXBlOiAnbWFwYm94Lm91dGRvb3JzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcGlrZXk6ICdway5leUoxSWpvaWJXRnBjM1JvYnlJc0ltRWlPaUkzVW1zNVIwSXdJbjAuRE9oVTgxY2xITEVoVGo4MURJT2pkZydcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgb3ZlcmxheXM6IHtcbiAgICAgICAgICAgICAgICAgICAgZmlzaGFyZWFzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnRmlza2VvbXLDpWRlbicsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbWFya2VyY2x1c3RlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZUNsdXN0ZXJpbmdBdFpvb206IDksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmtlZExvYWRpbmc6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2hvd0NvdmVyYWdlT25Ib3ZlcjogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3ZlT3V0c2lkZVZpc2libGVCb3VuZHM6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXSk7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmNvbnRyb2xsZXJzJylcbi5jb250cm9sbGVyKCdNZW51Q3RybCcsIFtcbiAgICAnJHNjb3BlJyxcbiAgICAnJHN0YXRlJyxcbiAgICAnJGlvbmljUG9wb3ZlcicsXG4gICAgJ3Nlc3Npb25EYXRhJyxcbiAgICAnVXBkYXRlJyxcbiAgICBmdW5jdGlvbigkc2NvcGUsICRzdGF0ZSwgJGlvbmljUG9wb3Zlciwgc2Vzc2lvbkRhdGEsIFVwZGF0ZSkge1xuXG4gICAgJHNjb3BlLnNlc3Npb25EYXRhID0gc2Vzc2lvbkRhdGE7XG5cbiAgICAkaW9uaWNQb3BvdmVyLmZyb21UZW1wbGF0ZVVybCgnY29tcG9uZW50cy9tZW51L3BvcG92ZXIuaHRtbCcsIHtcbiAgICAgICAgc2NvcGU6ICRzY29wZVxuICAgIH0pLnRoZW4oZnVuY3Rpb24ocG9wb3Zlcikge1xuICAgICAgICAkc2NvcGUucG9wb3ZlciA9IHBvcG92ZXI7XG4gICAgfSk7XG5cbiAgICAkc2NvcGUudXNlcmluZm8gPSBmdW5jdGlvbigpIHtcblx0JHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuXHQkc3RhdGUuZ28oJ21lbnUudXNlcmluZm8nKTtcbiAgICB9O1xuICAgICRzY29wZS5sb2dvdXQgPSBmdW5jdGlvbigpIHtcblx0JHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuXHRVcGRhdGUudXNlcl9sb2dvdXQoKTtcblxuXHQkc3RhdGUuZ28oJ3N0YXJ0LmxvZ2luJyk7XG4gICAgfTtcbiAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbigpIHtcblx0JHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuXHQkc3RhdGUuZ28oJ3N0YXJ0LmxvZ2luJyk7XG4gICAgfTtcbiAgICAkc2NvcGUucmVnaXN0ZXIgPSBmdW5jdGlvbigpIHtcblx0JHNjb3BlLnBvcG92ZXIuaGlkZSgpO1xuXHQkc3RhdGUuZ28oJ3N0YXJ0LnJlZ2lzdGVyLmRldGFpbHMnKTtcbiAgICB9O1xuXG4gICAgJHNjb3BlLnVwZGF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBVcGRhdGUuZm9yY2VkVXBkYXRlKCk7XG4gICAgfTtcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignUmVnaXN0ZXJDdHJsJywgW1xuICAgICckc2NvcGUnLFxuICAgICckc3RhdGUnLFxuICAgICckaW9uaWNMb2FkaW5nJyxcbiAgICAnJGlvbmljTW9kYWwnLFxuICAgICckaW9uaWNTY3JvbGxEZWxlZ2F0ZScsXG4gICAgJ0FQSScsXG4gICAgJ2xvY2FsU3RvcmFnZScsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGUsICRpb25pY0xvYWRpbmcsICRpb25pY01vZGFsLCAkaW9uaWNTY3JvbGxEZWxlZ2F0ZSwgQVBJLCBsb2NhbFN0b3JhZ2UpIHtcblxuICAgIHZhciB1c2VybmFtZTtcblxuICAgIC8vIExpdmUgY2hlY2sgZm9yIHVzZXJuYW1lIGF2YWlsYWJpbGl0eVxuICAgICRzY29wZS5jaGVja1VzZXJuYW1lID0gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgQVBJLnVzZXJfZXhpc3RzKGlucHV0LiR2aWV3VmFsdWUpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlucHV0LiRzZXRWYWxpZGl0eSgnbmFtZVRha2VuJywgIWRhdGEuZGF0YS5yZXNwb25zZSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICAvLyBMaXZlIGNoZWNrIGZvciBlbWFpbCBhdmFpbGFiaWxpdHlcbiAgICAkc2NvcGUuY2hlY2tFbWFpbCA9IGZ1bmN0aW9uKGlucHV0KSB7XG4gICAgICAgIEFQSS51c2VyX2V4aXN0cyhudWxsLCBpbnB1dC4kdmlld1ZhbHVlKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBpbnB1dC4kc2V0VmFsaWRpdHkoJ2VtYWlsVGFrZW4nLCAhZGF0YS5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuXG4gICAgLy8gVmFsaWRhdGlvbiBlcnJvcnMgbm90IHRpZWQgdG8gaW5wdXQgZmllbGRcbiAgICAkc2NvcGUuZm9ybUVycm9ycyA9IHt9O1xuXG4gICAgLyoqXG4gICAgICogcmVnaXN0ZXJcbiAgICAgKiBTdWJtaXQgaGFuZGxlciBmb3IgdGhlIHJlZ2lzdHJhdGlvbiBmb3JtXG4gICAgICovXG4gICAgJHNjb3BlLnJlZ2lzdGVyID0gZnVuY3Rpb24oZm9ybSkge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coKTtcblxuICAgICAgICAvLyBTYXZlIHBob25lIG51bWJlciBmb3IgbmV4dCB2aWV3XG4gICAgICAgICRzY29wZS5waG9uZSA9IGZvcm0ucGhvbmUuJHZpZXdWYWx1ZTtcblxuICAgICAgICAvLyBTYXZlIHVzZXJuYW1lIGZvciB2ZXJpZnkgc3VibWl0IGhhbmRsZXJcbiAgICAgICAgdXNlcm5hbWUgPSBmb3JtLnVzZXJuYW1lLiR2aWV3VmFsdWU7XG5cbiAgICAgICAgdmFyIHBhc3N3b3JkID0gZm9ybS5wYXNzd29yZC4kdmlld1ZhbHVlO1xuICAgICAgICB2YXIgZnVsbG5hbWUgPSBmb3JtLmZ1bGxuYW1lLiR2aWV3VmFsdWU7XG4gICAgICAgIHZhciBlbWFpbCA9IGZvcm0uZW1haWwuJHZpZXdWYWx1ZTtcblxuICAgICAgICBBUEkudXNlcl9yZWdpc3Rlcih1c2VybmFtZSwgZnVsbG5hbWUsIHBhc3N3b3JkLCBlbWFpbCwgJHNjb3BlLnBob25lKVxuICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAvLyBTdWNjZXNzOiBHbyB0byB2ZXJpZnkgYWNjb3VudCB2aWV3XG4gICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnXi52ZXJpZnknKTtcblxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiBFcnJvcjogSW5mb3JtIHRoZSB1c2VyIGFib3V0IGZhaWxlZCByZWdpc3RyYXRpb25cbiAgICAgICAgICAgICAqIFNlZSBBUEkgZG9jdW1lbnRhdGlvbiBmb3IgZXJyb3IgY29kZXNcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgJHNjb3BlLmZvcm1FcnJvcnMucmVnaXN0cmF0aW9uRXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgJGlvbmljU2Nyb2xsRGVsZWdhdGUuc2Nyb2xsVG9wKHRydWUpO1xuXG4gICAgICAgICAgICAvLyBJbnZhbGlkIEVtYWlsXG4gICAgICAgICAgICBpZiAoZXJyb3IuZXJyb3JfY29kZSA9PSA4KSB7XG4gICAgICAgICAgICAgICAgZm9ybS5lbWFpbC4kc2V0VmFsaWRpdHkoJ2ludmFsaWRFbWFpbCcsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFVzZXJuYW1lIG9yIEVtYWlsIGFscmVhZHkgcmVnaXN0ZXJlZFxuICAgICAgICAgICAgaWYgKGVycm9yLmVycm9yX2NvZGUgPT0gOSkge1xuICAgICAgICAgICAgICAgICRzY29wZS5jaGVja1VzZXJuYW1lKGZvcm0udXNlcm5hbWUpO1xuICAgICAgICAgICAgICAgICRzY29wZS5jaGVja0VtYWlsKGZvcm0uZW1haWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSW52YWxpZCBwaG9uZSBudW1iZXJcbiAgICAgICAgICAgIGlmIChlcnJvci5lcnJvcl9jb2RlID09IDEwKSB7XG4gICAgICAgICAgICAgICAgZm9ybS5waG9uZS4kc2V0VmFsaWRpdHkoJ2ludmFsaWRQaG9uZScsIGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cblxuICAgIC8qKlxuICAgICAqIHZlcmlmeVxuICAgICAqIFN1Ym1pdCBoYW5kbGVyIGZvciB0aGUgdmVyaWZpY2F0aW9uIGZvcm1cbiAgICAgKi9cbiAgICAkc2NvcGUudmVyaWZ5ID0gZnVuY3Rpb24oZm9ybSkge1xuICAgICAgICAkaW9uaWNMb2FkaW5nLnNob3coKTtcblxuICAgICAgICB2YXIgdmVyY29kZSA9IGZvcm0udmVyY29kZTtcblxuICAgICAgICBBUEkudXNlcl9jb25maXJtKHVzZXJuYW1lLCB2ZXJjb2RlLiR2aWV3VmFsdWUpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRzdGF0ZS5nbygnc3RhcnQubG9naW4nKTtcbiAgICAgICAgICAgIHZlcmNvZGUuJHNldFZhbGlkaXR5KFwidmVyaWZpZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcblxuICAgICAgICB9LCBmdW5jdGlvbihlcnJvcikge1xuICAgICAgICAgICAgdmVyY29kZS4kc2V0VmFsaWRpdHkoXCJ2ZXJpZmllZFwiLCBmYWxzZSk7XG4gICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgICRzY29wZS50b3MgPSBsb2NhbFN0b3JhZ2UuZ2V0KCd0b3MnKTtcbiAgICAvL01vZGFsIHdpdGggdGhlIEVVTEFcbiAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ2NvbXBvbmVudHMvcmVnaXN0ZXIvZXVsYS5odG1sJywge1xuICAgICAgICBzY29wZTogJHNjb3BlLFxuICAgICAgICBhbmltYXRpb246ICdzbGlkZS1pbi11cCdcbiAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICRzY29wZS5ldWxhID0gbW9kYWw7XG4gICAgfSk7XG4gICAgJHNjb3BlLnNob3dFdWxhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRzY29wZS5ldWxhLnNob3coKTtcbiAgICB9O1xuICAgICRzY29wZS5jbG9zZUV1bGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLmV1bGEuaGlkZSgpO1xuICAgIH07XG4gICAgJHNjb3BlLiRvbignJGRlc3Ryb3knLCBmdW5jdGlvbigpIHtcbiAgICAgICAgJHNjb3BlLmV1bGEucmVtb3ZlKCk7XG4gICAgfSk7XG5cbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuY29udHJvbGxlcnMnKVxuLmNvbnRyb2xsZXIoJ1RlY2huaXF1ZURldGFpbEN0cmwnLCBbJyRzY29wZScsICckc3RhdGVQYXJhbXMnLCAnREInLCAnJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZScsIGZ1bmN0aW9uKCRzY29wZSwgJHN0YXRlUGFyYW1zLCBEQiwgJGlvbmljU2xpZGVCb3hEZWxlZ2F0ZSkge1xuICAgICRzY29wZS5pbWFnZV9lbmRwb2ludCA9ICdodHRwOi8vd3d3LmlmaXNrZS5zZSc7XG4gICAgJHNjb3BlLnRlY2ggPSAkc3RhdGVQYXJhbXMudGVjaDtcbiAgICAkc2NvcGUuaW1hZ2VzID0gW107XG5cbiAgICBpZighJHNjb3BlLnRlY2gpIHtcbiAgICAgICAgREIuZ2V0VGVjaG5pcXVlKCRzdGF0ZVBhcmFtcy5pZClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgJHNjb3BlLmltYWdlcyA9IFtkYXRhLmltZzEsIGRhdGEuaW1nMiwgZGF0YS5pbWczXS5maWx0ZXIoZnVuY3Rpb24oZWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gIS9cXC8kLy50ZXN0KGVsKTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAkaW9uaWNTbGlkZUJveERlbGVnYXRlLnVwZGF0ZSgpO1xuICAgICAgICAgICAgJHNjb3BlLnRlY2ggPSBkYXRhO1xuICAgICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIgZGF0YSA9ICRzY29wZS50ZWNoO1xuICAgICAgICAkc2NvcGUuaW1hZ2VzID0gW2RhdGEuaW1nMSwgZGF0YS5pbWcyLCBkYXRhLmltZzNdLmZpbHRlcihmdW5jdGlvbihlbCkge1xuICAgICAgICAgICAgcmV0dXJuICEvXFwvJC8udGVzdChlbCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRpb25pY1NsaWRlQm94RGVsZWdhdGUudXBkYXRlKCk7XG4gICAgfVxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignVGVjaG5pcXVlc0N0cmwnLCBbJyRzY29wZScsICdEQicsIGZ1bmN0aW9uKCRzY29wZSwgREIpIHtcbiAgICBEQi5nZXRUZWNobmlxdWVzKClcbiAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAkc2NvcGUudGVjaG5pcXVlcyA9IGRhdGE7XG4gICAgfSk7XG4gICAgJHNjb3BlLmltYWdlX2VuZHBvaW50ID0gJ2h0dHA6Ly93d3cuaWZpc2tlLnNlJztcbiAgICAkc2NvcGUuc29ydG9yZGVyID0gJ3NvJztcblxufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignVXNlckN0cmwnLCBbJyRzY29wZScsICdEQicsIGZ1bmN0aW9uKCRzY29wZSwgREIpIHtcbiAgICBEQi5nZXRVc2VySW5mbygpXG4gICAgLnRoZW4oZnVuY3Rpb24odXNlcikge1xuICAgICAgICAkc2NvcGUudXNlciA9IHVzZXI7XG4gICAgfSk7XG4gICAgREIuZ2V0VXNlck51bWJlcnMoKVxuICAgIC50aGVuKGZ1bmN0aW9uKG51bWJlcnMpIHtcbiAgICAgICAgJHNjb3BlLm51bWJlcnMgPSBudW1iZXJzO1xuICAgIH0pO1xufV0pO1xuIiwiYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5jb250cm9sbGVycycpXG4uY29udHJvbGxlcignVXNlckNhcmRzQ3RybCcsIFtcbiAgICAnJHNjb3BlJyxcbiAgICAnJHN0YXRlUGFyYW1zJyxcbiAgICAnREInLFxuICAgICckaW9uaWNNb2RhbCcsXG4gICAgZnVuY3Rpb24oJHNjb3BlLCAkc3RhdGVQYXJhbXMsIERCLCAkaW9uaWNNb2RhbCkge1xuICAgICAgICAkc2NvcGUucHJlZCA9ICctdG8nO1xuICAgICAgICAkc2NvcGUuZW5kcG9pbnQgPSAnaHR0cHM6Ly93d3cuaWZpc2tlLnNlJztcbiAgICAgICAgJHNjb3BlLm5vdyA9IERhdGUubm93KCk7XG4gICAgICAgIERCLmdldFVzZXJQcm9kdWN0cygpXG4gICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IGRhdGE7XG4gICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy91c2UgdGhlIHNhbWUgbW9kYWwgYXMgaW4gYXJlYV9jYXJkc1xuICAgICAgICAkaW9uaWNNb2RhbC5mcm9tVGVtcGxhdGVVcmwoJ2NvbXBvbmVudHMvYXJlYV9jYXJkcy9ydWxlc19tb2RhbC5odG1sJywge1xuICAgICAgICAgICAgc2NvcGU6ICRzY29wZSxcbiAgICAgICAgICAgIGFuaW1hdGlvbjogJ3NsaWRlLWluLXVwJ1xuICAgICAgICB9KS50aGVuKGZ1bmN0aW9uKG1vZGFsKSB7XG4gICAgICAgICAgICAkc2NvcGUucnVsZXNfbW9kYWwgPSBtb2RhbDtcbiAgICAgICAgfSk7XG4gICAgICAgICRzY29wZS5vcGVuUnVsZXNNb2RhbCA9IGZ1bmN0aW9uKHByb2R1Y3QpIHtcbiAgICAgICAgICAgICRzY29wZS5ydWxlc19tb2RhbC5zaG93KCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwcm9kdWN0KTtcbiAgICAgICAgICAgICRzY29wZS5wcm9kdWN0ID0gcHJvZHVjdDtcbiAgICAgICAgfTtcbiAgICAgICAgJHNjb3BlLmNsb3NlUnVsZXNNb2RhbCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsLmhpZGUoKTtcbiAgICAgICAgfTtcblxuICAgICAgICAkc2NvcGUuJG9uKCckZGVzdHJveScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJHNjb3BlLnJ1bGVzX21vZGFsLnJlbW92ZSgpO1xuICAgICAgICB9KTtcbiAgICB9XG5dKTtcbiIsIihmdW5jdGlvbihhbmd1bGFyLCB1bmRlZmluZWQpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLmFwaScsIFsnaWZpc2tlLnV0aWxzJ10pXG4gICAgLnByb3ZpZGVyKCdBUEknLCBmdW5jdGlvbiBBUElQcm92aWRlcigpIHtcblxuICAgICAgICB0aGlzLmJhc2VfdXJsID0gJ2h0dHBzOi8vd3d3LmlmaXNrZS5zZS9hcGkvdjIvYXBpLnBocCc7XG5cbiAgICAgICAgdGhpcy4kZ2V0ID0gWyckaHR0cCcsICdzZXNzaW9uRGF0YScsICdsb2NhbFN0b3JhZ2UnLCAnJHEnLCBmdW5jdGlvbigkaHR0cCwgc2Vzc2lvbkRhdGEsIGxvY2FsU3RvcmFnZSwgJHEpIHtcbiAgICAgICAgICAgIHZhciBiYXNlX3VybCA9IHRoaXMuYmFzZV91cmw7XG5cbiAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICogIyBhcGlfY2FsbCAjXG4gICAgICAgICAgICAgKiBoYW5kbGVzIGh0dHAgcmVxdWVzdHNcbiAgICAgICAgICAgICAqIHJldHVybnMgYSAkaHR0cCBvYmplY3QgZm9yIHRoZSByZXF1ZXN0ZWQgYXBpIGNhbGxcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgdmFyIGFwaV9jYWxsID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAkaHR0cChcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6J2dldCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiBiYXNlX3VybCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IGFuZ3VsYXIuZXh0ZW5kKHBhcmFtcywgeydrZXknOiAnMDEyMzQ1Njc4OWFiY2RlZid9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiA1MDAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIClcbiAgICAgICAgICAgICAgICAgICAgLy8gVG9EbzogUHJvcGVyIGxvZ2dpbmdcbiAgICAgICAgICAgICAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5zdGF0dXMgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZGF0YS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmVycm9yKGZ1bmN0aW9uKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnLCBzdGF0dXNUZXh0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignUmVxdWVzdCB0aW1lb3V0JykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgKiAjIHNlc3Npb25fYXBpX2NhbGwgI1xuICAgICAgICAgICAgICogd3JhcHBlciBmb3IgYXBpX2NhbGwgLSBpbnNlcnRzIHRoZSBzZXNzaW9uIHRva2VuIGludG8gcGFyYW1zXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIHZhciBzZXNzaW9uX2FwaV9jYWxsID0gZnVuY3Rpb24ocGFyYW1zKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNlc3Npb24gPSBzZXNzaW9uRGF0YS50b2tlbjtcbiAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoYW5ndWxhci5leHRlbmQocGFyYW1zLCB7czogc2Vzc2lvbn0pKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZ2V0X211bmljaXBhbGl0aWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X211bmljaXBhbGl0aWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2NvdW50aWVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X2NvdW50aWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9leGlzdHM6IGZ1bmN0aW9uKHVzZXJuYW1lLCBlbWFpbCkge1xuXHRcdCAgICB2YXIgYXJncyA9IHttOiAndXNlcl9leGlzdHMnfTtcblx0XHQgICAgXG5cdFx0ICAgIGlmICh0eXBlb2YgdXNlcm5hbWUgPT09ICdzdHJpbmcnKSB7XG5cdFx0XHRhcmdzLnVzZXJuYW1lID0gdXNlcm5hbWU7XG5cdFx0ICAgIH1cblx0XHQgICAgaWYgKHR5cGVvZiBlbWFpbCA9PT0gJ3N0cmluZycpIHtcblx0XHRcdGFyZ3MuZW1haWwgPSBlbWFpbDtcblx0XHQgICAgfVxuXHRcdCAgICBcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKGFyZ3MpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9yZWdpc3RlcjogZnVuY3Rpb24odXNlcm5hbWUsIGZ1bGxuYW1lLCBwYXNzd29yZCwgZW1haWwsIHBob25lKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ3VzZXJfcmVnaXN0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxsbmFtZTogZnVsbG5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaG9uZTogcGhvbmVcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9jb25maXJtOiBmdW5jdGlvbih1c2VybmFtZSwgcGluKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ3VzZXJfY29uZmlybScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcm5hbWU6IHVzZXJuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpbjogcGluXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHVzZXJfaW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZXNzaW9uX2FwaV9jYWxsKHttOiAndXNlcl9pbmZvJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9sb2dpbjogZnVuY3Rpb24odXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ3VzZXJfbG9naW4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRhdGEuc2V0VG9rZW4oZGF0YS5kYXRhLnJlc3BvbnNlKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vbmVlZGVkIGZvciBjaGFpbmluZyBvZiBwcm9taXNlcywgc2hvdWxkIGJlIGRvbmUgc29tZSBvdGhlciB3YXkgcGVyaGFwcz9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdXNlcl9sb2dvdXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uX2FwaV9jYWxsKHttOiAndXNlcl9sb2dvdXQnfSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvbkRhdGEuZGVsZXRlVG9rZW4oKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1c2VyX3Byb2R1Y3RzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25fYXBpX2NhbGwoe206ICd1c2VyX3Byb2R1Y3RzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2Zpc2hlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF9maXNoZXMnfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfdGVjaG5pcXVlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF90ZWNobmlxdWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2JhaXRzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X2JhaXRzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X29yZ2FuaXphdGlvbnM6IGZ1bmN0aW9uKG9yZ2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9vcmdhbml6YXRpb25zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdpZDogb3JnaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X29yZ19tb2RpZmllZDogZnVuY3Rpb24ob3JnaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAnZ2V0X29yZ19tb2RpZmllZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JnaWQ6IG9yZ2lkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9hcmVhczogZnVuY3Rpb24oYXJlYWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9hcmVhcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlYWlkOiBhcmVhaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X2FyZWFzX21vZGlmaWVkOiBmdW5jdGlvbihhcmVhaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKFxuICAgICAgICAgICAgICAgICAgICAgICAgeyBtOiAnZ2V0X2FyZWFzX21vZGlmaWVkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcmVhaWQ6IGFyZWFpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfcHJvZHVjdHM6IGZ1bmN0aW9uKGFyZWFpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfcHJvZHVjdHMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFyZWFpZDogYXJlYWlkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9ydWxlczogZnVuY3Rpb24ocnVsZWlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9ydWxlcycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcnVsZWlkOiBydWxlaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X3Bob3RvczogZnVuY3Rpb24ob3JnaWQsIGFyZWFpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfcGhvdG9zJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmdpZDogb3JnaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJlYWlkOiBhcmVhaWRcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X21hcF9wb2lzOiBmdW5jdGlvbihvcmdpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoXG4gICAgICAgICAgICAgICAgICAgICAgICB7IG06ICdnZXRfbWFwX3BvaXMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2lkOiBvcmdpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfbWFwX3BvaV90eXBlcyA6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoe206ICdnZXRfbWFwX3BvaV90eXBlcyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9tYXBfcG9seWdvbnM6IGZ1bmN0aW9uKG9yZ2lkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbChcbiAgICAgICAgICAgICAgICAgICAgICAgIHsgbTogJ2dldF9tYXBfcG9seWdvbnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9yZ2lkOiBvcmdpZFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB1c2VyX2dldF9mYXZvcml0ZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Vzc2lvbl9hcGlfY2FsbCh7bTogJ3VzZXJfZ2V0X2Zhdm9yaXRlcyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF90ZXJtc19vZl9zZXJ2aWNlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X3Rlcm1zX29mX3NlcnZpY2UnfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRfY29udGFjdF9pbmZvOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFwaV9jYWxsKHttOiAnZ2V0X2NvbnRhY3RfaW5mbyd9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldF9lbmdpbmVfcG9saWNpZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXBpX2NhbGwoe206ICdnZXRfZW5naW5lX3BvbGljaWVzJ30pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0X3Ntc190ZXJtczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhcGlfY2FsbCh7bTogJ2dldF9zbXNfdGVybXMnfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfV07XG4gICAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG4iLCIoZnVuY3Rpb24oYW5ndWxhciwgdW5kZWZpbmVkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgYW5ndWxhci5tb2R1bGUoJ2lmaXNrZS5kYicsIFtdKVxuICAgIC5wcm92aWRlcignREInLCBmdW5jdGlvbiBEQlByb3ZpZGVyKCkge1xuXG4gICAgICAgIHRoaXMuJGdldCA9IFsgJyRjb3Jkb3ZhU1FMaXRlJywgJ0FQSScsICckcScsIGZ1bmN0aW9uKCRjb3Jkb3ZhU1FMaXRlLCBBUEksICRxKSB7XG5cblxuICAgICAgICAgICAgdmFyIGRiO1xuICAgICAgICAgICAgaWYgKHdpbmRvdy5zcWxpdGVQbHVnaW4pIHtcbiAgICAgICAgICAgICAgICBkYiA9ICRjb3Jkb3ZhU1FMaXRlLm9wZW5EQignZmlza2ViYXNlbi5kYicpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cub3BlbkRhdGFiYXNlKSB7XG4gICAgICAgICAgICAgICAgZGIgPSB3aW5kb3cub3BlbkRhdGFiYXNlKCdmaXNrZWJhc2VuLmRiJywgJzEuMCcsICdmaXNrZWJhc2VuJywgMTAqMTAyNCoxMDI0KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vdCBzdXBwb3J0ZWQgb24gdGhpcyBkZXZpY2UsIHNvcnJ5Jyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB2YXIgdGFibGVEZWYgPSB7XG4gICAgICAgICAgICAgICAgJ0FyZWEnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnb3JnaWQnLCAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2t3JywgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydub3RlJywgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYzEnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYzInLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYzMnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbTEnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbTInLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbTMnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbGF0JywgICAncmVhbCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2xuZycsICAgJ3JlYWwnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd6b29tJywgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncG50JywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY2FyJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZW5nJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaGNwJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbWFwJywgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3dzYycsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ0FyZWFfRmlzaCc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWlkJywgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ZpZCcsICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydhbW91bnQnLCAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY29tbWVudCcsICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdQcm9kdWN0JzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QyJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbm8nLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbScsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BmJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnYWknLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JpJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjaCcsICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsncHJpY2UnLCAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzbycsICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaGwnLCAgICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ0NvdW50eSc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsncycsICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdNdW5pY2lwYWxpdHknOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY0lEJywgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbmFtZScsICAndGV4dCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnRmlzaCc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZCcsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3NvJywgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21heCcsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ljb24nLCAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbWcnLCAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaW4nLCAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2dlbycsICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzaXplJywgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbGF0JywgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlYycsICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1J1bGUnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd2ZXInLCAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QnLCAgICAndGV4dCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnVXNlcl9Qcm9kdWN0JzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydhdCcsICAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY29kZScsICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ZyJywgICAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydmdWxsbmFtZScsICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ290JywgICAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsncmVmMScsICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3JlZjInLCAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3RvJywgICAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydwaWQnLCAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsncGRmJywgICAgICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1VzZXJfSW5mbyc6IFtcbiAgICAgICAgICAgICAgICAgICAgWydJRCcsICAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndXNlcm5hbWUnLCAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydsb2dnZWRpbicsICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ0lQMScsICAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnSVAyJywgICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyduYW1lJywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2VtYWlsJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY3JlYXRlZCcsICAgJ3RleHQnXVxuICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgJ1VzZXJfTnVtYmVyJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ251bWJlcicsICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdUZWNobmlxdWUnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydzbycsICAgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydkZScsICAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZGEnLCAgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ljb24nLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydpbWcxJywgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaW1nMicsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2ltZzMnLCAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd5b3V0dWJlJywgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdPcmdhbml6YXRpb24nOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QnLCAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZCcsICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjcCcsICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3VybCcsICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnY28nLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd2YXQnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnZHAnLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2Z2YScsICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvcmcnLCAgICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbWwnLCAgICAgJ2ludCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnUG9pJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvcmdpZCcsICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndHlwZScsICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3ByaWNlJywgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWyd0JywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ2QnLCAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnbGEnLCAgICAgJ3JlYWwnXSxcbiAgICAgICAgICAgICAgICAgICAgWydsbycsICAgICAncmVhbCddXG4gICAgICAgICAgICAgICAgXSxcbiAgICAgICAgICAgICAgICAnUG9pX1R5cGUnOiBbXG4gICAgICAgICAgICAgICAgICAgIFsnSUQnLCAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3QnLCAgICAgICd0ZXh0J10sXG4gICAgICAgICAgICAgICAgICAgIFsnaWNvbicsICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgICAgICdQb2x5Z29uJzogW1xuICAgICAgICAgICAgICAgICAgICBbJ0lEJywgICAgICdpbnQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydvcmdpZCcsICAnaW50J10sXG4gICAgICAgICAgICAgICAgICAgIFsndCcsICAgICAgJ3RleHQnXSxcbiAgICAgICAgICAgICAgICAgICAgWydjJywgICAgICAndGV4dCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3ZlcicsICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ21vZCcsICAgICAgJ2ludCddLFxuICAgICAgICAgICAgICAgICAgICBbJ3BvbHknLCAgICAgICd0ZXh0J11cbiAgICAgICAgICAgICAgICBdXG5cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBjcmVhdGVPYmplY3QgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgdmFyIHJldHZhbCA9IFtdO1xuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBkYXRhLnJvd3MubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dmFsLnB1c2goZGF0YS5yb3dzLml0ZW0oaSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gcmV0dmFsO1xuICAgICAgICAgICAgfTtcblxuXG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgcG9wdWxhdGVUYWJsZTogZnVuY3Rpb24odGFibGUsIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uIChmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLnRyYW5zYWN0aW9uKGZ1bmN0aW9uKHR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHguZXhlY3V0ZVNxbCgnREVMRVRFIEZST00gJyArIHRhYmxlICsgJzsnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGlkIGluIGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNpbmdsZURhdGEgPSBkYXRhW2lkXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluc2VydERhdGEgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0YWJsZURlZlt0YWJsZV0ubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluc2VydERhdGEucHVzaChzaW5nbGVEYXRhW3RhYmxlRGVmW3RhYmxlXVtpXVswXV0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBxdWVyeSA9IFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdJTlNFUlQgSU5UTycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YWJsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdWQUxVRVMoPycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnLD8nLnJlcGVhdChpbnNlcnREYXRhLmxlbmd0aC0xKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpJ10uam9pbignICcpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHF1ZXJ5LCBpbnNlcnREYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGNsZWFuVGFibGU6IGZ1bmN0aW9uKHRhYmxlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAoZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi50cmFuc2FjdGlvbihmdW5jdGlvbih0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoJ0RFTEVURSBGUk9NICcgKyB0YWJsZSArICc7Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBEcm9wcyBhbGwgdGFibGVzIGluIHRoZSBkYXRhYmFzZVxuICAgICAgICAgICAgICAgICAqIEBtZXRob2QgY2xlYW5cbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBjbGVhbjogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbiAoZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi50cmFuc2FjdGlvbihcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbih0eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIHRhYmxlIGluIHRhYmxlRGVmKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR4LmV4ZWN1dGVTcWwoJ0RST1AgVEFCTEUgSUYgRVhJU1RTICcgKyB0YWJsZSArICc7Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsXG4gICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdSZW1vdmVkIGFsbCB0YWJsZXMnKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEluaXRpYWxpZXMgdGhlIHRhYmxlcyBpbiB0aGUgZGF0YWJhc2VcbiAgICAgICAgICAgICAgICAgKiBAbWV0aG9kIGluaXRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBkYi50cmFuc2FjdGlvbiggZnVuY3Rpb24gKHR4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciB0YWJsZSBpbiB0YWJsZURlZikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcXVlcnkgPSBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGFibGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnKCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCInICsgdGFibGVEZWZbdGFibGVdLmpvaW4oJ19fX1wiJykuc3BsaXQoJywnKS5qb2luKCdcIiAnKS5zcGxpdCgnX19fJykuam9pbignLCAnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcsIFBSSU1BUlkgS0VZKCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCInICsgdGFibGVEZWZbdGFibGVdWzBdWzBdICsgJ1wiJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcpKTsnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eC5leGVjdXRlU3FsKHF1ZXJ5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0LFxuICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cblxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogR2V0cyBpbmZvcm1hdGlvbiBhYm91dCBhbiBhcmVhXG4gICAgICAgICAgICAgICAgICogQG1ldGhvZCBnZXRBcmVhXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtJbnRlZ2VyfSBpZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGdldEFyZWE6IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIEFyZWEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBpZCA9ID8nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSwgW2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCBmdW5jdGlvbiAoYXJlYSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvYmplY3QgPSBjcmVhdGVPYmplY3QoYXJlYSlbMF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9waG90b3Mob2JqZWN0Lm9yZ2lkKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGltYWdlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvYmplY3QuaW1hZ2VzID0gaW1hZ2VzLmRhdGEucmVzcG9uc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwob2JqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChvYmplY3QpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRBcmVhRmlzaGVzOiBmdW5jdGlvbihhaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKCBmdW5jdGlvbiAoZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBBcmVhX0Zpc2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdKT0lOIEZpc2ggT04gQXJlYV9GaXNoLmZpZCA9IEZpc2guSUQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBBcmVhX0Zpc2guYWlkID0gPydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpLCBbYWlkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgLyoqXG4gICAgICAgICAgICAgICAgICogU2VhcmNoZXMgdGhlIGRhdGFiYXNlIHVzaW5nIGEgcXVlcnlcbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIFRoZSBxdWVyeSBpcyBtYXRjaGVkIHRvIGEgbmFtZSBhbmQvb3Iga2V5d29yZFxuICAgICAgICAgICAgICAgICAqIEBtZXRob2Qgc2VhcmNoXG4gICAgICAgICAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaHN0cmluZ1xuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIHNlYXJjaDogZnVuY3Rpb24oc2VhcmNoc3RyaW5nLCBjb3VudHlfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKCBmdW5jdGlvbiAoZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBBcmVhJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgdCBMSUtFID8nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChjb3VudHlfaWQgPyAnQU5EIGMxID0gPyc6JycpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdPUkRFUiBCWSB0J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBjb3VudHlfaWQgPyBbJyUnICsgc2VhcmNoc3RyaW5nICsgJyUnLCBjb3VudHlfaWRdOlsnJScgKyBzZWFyY2hzdHJpbmcgKyAnJSddKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAgICAgKiBHZXRzIGluZm9ybWF0aW9uIGFib3V0IGEgcHJvZHVjdFxuICAgICAgICAgICAgICAgICAqIEBtZXRob2QgZ2V0UHJvZHVjdFxuICAgICAgICAgICAgICAgICAqIEBwYXJhbSB7SW50ZWdlcn0gcHJvZHVjdF9pZFxuICAgICAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgICAgIGdldFByb2R1Y3Q6IGZ1bmN0aW9uKHByb2R1Y3RfaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgRElTVElOQ1QgUHJvZHVjdC4qLCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUudCBhcyBydWxlX3QsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS52ZXIgYXMgcnVsZV92ZXIsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS5kIGFzIHJ1bGVfZCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gUHJvZHVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0pPSU4gUnVsZSBPTiBSdWxlLklEID0gUHJvZHVjdC5yaScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1dIRVJFIElEID0gPycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ09SREVSIEJZIHNvJ1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBbcHJvZHVjdF9pZF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIC8qKlxuICAgICAgICAgICAgICAgICAqIEdldHMgYWxsIHByb2R1Y3RzIGZyb20gYW4gYXJlYVxuICAgICAgICAgICAgICAgICAqIEBtZXRob2QgZ2V0UHJvZHVjdHNCeUFyZWFcbiAgICAgICAgICAgICAgICAgKiBAcGFyYW0ge0ludGVnZXJ9IGFyZWFfaWRcbiAgICAgICAgICAgICAgICAgKi9cbiAgICAgICAgICAgICAgICBnZXRQcm9kdWN0c0J5QXJlYTogZnVuY3Rpb24oYXJlYV9pZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCBESVNUSU5DVCBQcm9kdWN0LiosJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnUnVsZS50IGFzIHJ1bGVfdCwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLnZlciBhcyBydWxlX3ZlciwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLmQgYXMgcnVsZV9kJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBQcm9kdWN0JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSk9JTiBSdWxlIE9OIFJ1bGUuSUQgPSBQcm9kdWN0LnJpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgYWkgPSA/JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnT1JERVIgQlkgc28nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFthcmVhX2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZ2V0Q291bnRpZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCBESVNUSU5DVCBDb3VudHkuKicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gQ291bnR5JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnSk9JTiBBcmVhIE9OIEFyZWEuYzEgPSBDb3VudHkuSUQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdPUkRFUiBCWSBDb3VudHkudCdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICBnZXRVc2VyUHJvZHVjdHM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCBVc2VyX1Byb2R1Y3QuKiwnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdSdWxlLnQgYXMgcnVsZV90LCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUudmVyIGFzIHJ1bGVfdmVyLCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1J1bGUuZCBhcyBydWxlX2QnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIFVzZXJfUHJvZHVjdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0xFRlQgSk9JTiBQcm9kdWN0IE9OIFByb2R1Y3QuSUQgPSBVc2VyX1Byb2R1Y3QucGlkJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnTEVGVCBKT0lOIFJ1bGUgT04gUnVsZS5JRCA9IFByb2R1Y3QucmknXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZ2V0RmlzaGVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKiBGUk9NIEZpc2gnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZ2V0RmlzaDogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKiBGUk9NIEZpc2gnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdXSEVSRSBpZCA9ID8nXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSwgW2lkXSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKVswXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZ2V0VGVjaG5pcXVlczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUICogRlJPTSBUZWNobmlxdWUnXG4gICAgICAgICAgICAgICAgICAgICAgICBdLmpvaW4oJyAnKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGdldFRlY2huaXF1ZTogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKiBGUk9NIFRlY2huaXF1ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1dIRVJFIElEID0gPydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpLCBbaWRdKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bGZpbGwoY3JlYXRlT2JqZWN0KGRhdGEpWzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIHJlamVjdCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZ2V0T3JnYW5pemF0aW9uOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqIEZST00gT3JnYW5pemF0aW9uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgSUQgPSA/J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksIFtpZF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSlbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRVc2VySW5mbzogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIFVzZXJfSW5mbydcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oIGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QodXNlcilbMF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBnZXRVc2VyTnVtYmVyczogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcShmdW5jdGlvbihmdWxmaWxsLCByZWplY3QpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRjb3Jkb3ZhU1FMaXRlLmV4ZWN1dGUoZGIsIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnU0VMRUNUIConLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdGUk9NIFVzZXJfTnVtYmVyJ1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbiggZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZ2V0UG9pczogZnVuY3Rpb24oaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxKGZ1bmN0aW9uKGZ1bGZpbGwsIHJlamVjdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTUUxpdGUuZXhlY3V0ZShkYiwgW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICdTRUxFQ1QgKicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0ZST00gUG9pJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgb3JnaWQgPSA/J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksIFtpZF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbiggZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgZ2V0UG9pVHlwZXM6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBQb2lfVHlwZSdcbiAgICAgICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVsZmlsbChjcmVhdGVPYmplY3QoZGF0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVqZWN0KTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGdldFBvbHlnb25zOiBmdW5jdGlvbihpZCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEoZnVuY3Rpb24oZnVsZmlsbCwgcmVqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkY29yZG92YVNRTGl0ZS5leGVjdXRlKGRiLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1NFTEVDVCAqJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnRlJPTSBQb2x5Z29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnV0hFUkUgb3JnaWQgPSA/J1xuICAgICAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJyksIFtpZF0pXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbiggZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdWxmaWxsKGNyZWF0ZU9iamVjdChkYXRhKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWplY3QpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XTtcbiAgICB9KTtcbn0pKHdpbmRvdy5hbmd1bGFyKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuZmlsdGVycycsIFtdKVxuLmZpbHRlcignbm9icnMnLCBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24oaW5wdXQpIHtcbiAgICAgICAgcmV0dXJuIGlucHV0LnJlcGxhY2UoLyg8YnI+XFxzKikrL2csICc8YnI+Jyk7XG4gICAgfTtcbn0pO1xuIiwiKGZ1bmN0aW9uKGFuZ3VsYXIsIHVuZGVmaW5lZCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdpZmlza2UudXBkYXRlJywgWydpZmlza2UuYXBpJywgJ2lmaXNrZS5kYicsICdpZmlza2UudXRpbHMnXSlcbiAgICAucHJvdmlkZXIoJ1VwZGF0ZScsIGZ1bmN0aW9uIFVwZGF0ZVByb3ZpZGVyKCkge1xuXG5cbiAgICAgICAgdGhpcy4kZ2V0ID0gW1xuICAgICAgICAgICAgJ0FQSScsXG4gICAgICAgICAgICAnREInLFxuICAgICAgICAgICAgJ2xvY2FsU3RvcmFnZScsXG4gICAgICAgICAgICAnJHEnLFxuICAgICAgICAgICAgJyRpb25pY0xvYWRpbmcnLFxuICAgICAgICAgICAgJ3Nlc3Npb25EYXRhJyxcbiAgICAgICAgICAgIGZ1bmN0aW9uKEFQSSwgREIsIGxvY2FsU3RvcmFnZSwgJHEsICRpb25pY0xvYWRpbmcsIHNlc3Npb25EYXRhKSB7XG5cbiAgICAgICAgICAgICAgICB2YXIgTEFTVF9VUERBVEUgPSAnbGFzdF91cGRhdGUnO1xuXG4gICAgICAgICAgICAgICAgdmFyIHBvcHVsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9hcmVhcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpc2hBcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGtleSBpbiBkYXRhLmRhdGEucmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpc2hlcyA9IGRhdGEuZGF0YS5yZXNwb25zZVtrZXldLmZpc2g7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvcih2YXIgZmlzaEtleSBpbiBmaXNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpc2hBcnIucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0lEJzoga2V5KydfJytmaXNoS2V5LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpZDogZmlzaEtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhaWQ6IGtleSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IGZpc2hlc1tmaXNoS2V5XVswXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50OiBmaXNoZXNbZmlzaEtleV1bMV1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQi5wb3B1bGF0ZVRhYmxlKCdBcmVhJywgZGF0YS5kYXRhLnJlc3BvbnNlKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREIucG9wdWxhdGVUYWJsZSgnQXJlYV9GaXNoJywgZmlzaEFycilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIEFyZWEnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X3Byb2R1Y3RzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIucG9wdWxhdGVUYWJsZSgnUHJvZHVjdCcsIGRhdGEuZGF0YS5yZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBQcm9kdWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9jb3VudGllcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ0NvdW50eScsIGRhdGEuZGF0YS5yZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBDb3VudHknKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X211bmljaXBhbGl0aWVzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIucG9wdWxhdGVUYWJsZSgnTXVuaWNpcGFsaXR5JywgZGF0YS5kYXRhLnJlc3BvbnNlKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIE11bmljaXBhbGl0eScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfZmlzaGVzKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIucG9wdWxhdGVUYWJsZSgnRmlzaCcsIGRhdGEuZGF0YS5yZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBGaXNoJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9ydWxlcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ1J1bGUnLCBkYXRhLmRhdGEucmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgUnVsZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfdGVjaG5pcXVlcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ1RlY2huaXF1ZScsIGRhdGEuZGF0YS5yZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBUZWNobmlxdWUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X29yZ2FuaXphdGlvbnMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdPcmdhbml6YXRpb24nLCBkYXRhLmRhdGEucmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgT3JnYW5pemF0aW9uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9tYXBfcG9pcygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLnBvcHVsYXRlVGFibGUoJ1BvaScsIGRhdGEuZGF0YS5yZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBQb2knKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X21hcF9wb2lfdHlwZXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdQb2lfVHlwZScsIGRhdGEuZGF0YS5yZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBQb2lfVHlwZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gJHEucmVqZWN0KGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgIEFQSS5nZXRfbWFwX3BvbHlnb25zKClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIucG9wdWxhdGVUYWJsZSgnUG9seWdvbicsIGRhdGEuZGF0YS5yZXNwb25zZSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBQb2x5Z29uJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgcG9wdWxhdGVVc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLnVzZXJfcHJvZHVjdHMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBEQi5wb3B1bGF0ZVRhYmxlKCdVc2VyX1Byb2R1Y3QnLCBkYXRhLmRhdGEucmVzcG9uc2UpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgVXNlcl9Qcm9kdWN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5yZWplY3QoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLnVzZXJfaW5mbygpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG51bWJlcnMgPSBkYXRhLmRhdGEucmVzcG9uc2UubnVtYmVycztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQXJyID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG51bWJlcnMubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbnVtQXJyLnB1c2goeydudW1iZXInOiBudW1iZXJzW2ldfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEQi5wb3B1bGF0ZVRhYmxlKCdVc2VyX0luZm8nLCBbZGF0YS5kYXRhLnJlc3BvbnNlXSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUG9wdWxhdGVkIFVzZXJfSW5mbycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEuZGF0YS5yZXNwb25zZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgREIucG9wdWxhdGVUYWJsZSgnVXNlcl9OdW1iZXInLCBudW1BcnIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBVc2VyX051bWJlcnMnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICRxLnJlamVjdChlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICB2YXIgY2xlYW5Vc2VyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgREIuY2xlYW5UYWJsZSgnVXNlcl9Qcm9kdWN0JyksXG4gICAgICAgICAgICAgICAgICAgICAgICBEQi5jbGVhblRhYmxlKCdVc2VyX051bWJlcicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgREIuY2xlYW5UYWJsZSgnVXNlcl9JbmZvJylcbiAgICAgICAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUmVtb3ZlZCB1c2VyIGluZm8gZnJvbSBkYXRhYmFzZScpO1xuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb3VsZCBub3QgcmVtb3ZlIHVzZXIgZGF0YSBmcm9tIGRhdGFiYXNlIScsIGVycik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH07XG5cblxuICAgICAgICAgICAgICAgIHZhciB1cGRhdGVGdW5jID0gZnVuY3Rpb24oZm9yY2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuc2hvdygpO1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RVcGRhdGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICBpZighZm9yY2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXN0VXBkYXRlID0gbG9jYWxTdG9yYWdlLmdldChMQVNUX1VQREFURSk7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB2YXIgYVdlZWsgPSAxMDAwKjM2MDAqMjQqNztcbiAgICAgICAgICAgICAgICAgICAgaWYoY3VycmVudFRpbWUgLSBsYXN0VXBkYXRlID4gYVdlZWspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIERCLmluaXQoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0luaXRpYWxpemVkIERCIHN5c3RlbScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNlc3Npb25EYXRhLnRva2VuKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAkcS5hbGwoW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGVVc2VyKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwb3B1bGF0ZSgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBwb3B1bGF0ZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1BvcHVsYXRlZCBhbGwgdGhlIHRoaW5ncycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXQoTEFTVF9VUERBVEUsIGN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGVyci5lcnJvcl9jb2RlID09PSA3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEF1dGhlbnRpY2F0aW9uIGZhaWx1cmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogU2hvdyB0byB1c2VyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuVXNlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBBUEkudXNlcl9sb2dvdXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlvbmljTG9hZGluZy5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dvdCBhbiBlcnJvciwgd2lsbCB0cnkgdG8gcmVjcmVhdGUgYWxsIHRhYmxlczogJywgZXJyKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gREIuY2xlYW4oKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIERCLmluaXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBvcHVsYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQb3B1bGF0ZWQgYWxsIHRoZSB0aGluZ3MnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXQoTEFTVF9VUERBVEUsIGN1cnJlbnRUaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdGlsbCBlcnJvciwgaGFuZGxlIGl0IScsIGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBBUEkuZ2V0X3Rlcm1zX29mX3NlcnZpY2UoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXQoJ3RvcycsZGF0YS5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9zbXNfdGVybXMoKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24odGVybXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0KCdzbXNfdGVybXMnLCB0ZXJtcy5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLmdldF9jb250YWN0X2luZm8oKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXQoJ2NvbnRhY3RJbmZvJywgZGF0YS5kYXRhLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihzZXNzaW9uRGF0YS50b2tlbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgREIuaW5pdCgpXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnSW5pdGlhbGl6ZWQgREIgc3lzdGVtJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2Vzc2lvbkRhdGEudG9rZW4pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcG9wdWxhdGVVc2VyKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICRpb25pY0xvYWRpbmcuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbm9fdXBkYXRlJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkaW9uaWNMb2FkaW5nLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB1cGRhdGU6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRnVuYygpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIGZvcmNlZFVwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVGdW5jKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfbG9nb3V0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFuVXNlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgQVBJLnVzZXJfbG9nb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHVzZXJfbG9naW46IGZ1bmN0aW9uKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFQSS51c2VyX2xvZ2luKHVzZXJuYW1lLCBwYXNzd29yZClcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZUZ1bmMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBsYXN0X3VwZGF0ZTogZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlLmdldChMQVNUX1VQREFURSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfV07XG4gICAgfSk7XG59KSh3aW5kb3cuYW5ndWxhcik7XG4iLCJhbmd1bGFyLm1vZHVsZSgnaWZpc2tlLnV0aWxzJywgW10pXG5cbi5mYWN0b3J5KCdsb2NhbFN0b3JhZ2UnLCBbJyR3aW5kb3cnLCBmdW5jdGlvbigkd2luZG93KSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2V0OiBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgICAgICAkd2luZG93LmxvY2FsU3RvcmFnZS5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgICB9LFxuICAgICAgICBnZXQ6IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICAgICAgcmV0dXJuICR3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oa2V5KTtcbiAgICAgICAgfSxcbiAgICAgICAgcmVtb3ZlOiBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgICR3aW5kb3cubG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcbiAgICAgICAgfVxuICAgIH07XG59XSlcbi5zZXJ2aWNlKCdzZXNzaW9uRGF0YScsIFsnbG9jYWxTdG9yYWdlJywgZnVuY3Rpb24obG9jYWxTdG9yYWdlKSB7XG4gICAgdGhpcy50b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXQoJ3Nlc3Npb24nKTtcblxuICAgIHRoaXMuc2V0VG9rZW4gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGxvY2FsU3RvcmFnZS5zZXQoJ3Nlc3Npb24nLCB0KTtcbiAgICAgICAgdGhpcy50b2tlbiA9IHQ7XG4gICAgICAgIGNvbnNvbGUubG9nKCd0b2tlbiBzZXQnKTtcbiAgICB9O1xuICAgIHRoaXMuZGVsZXRlVG9rZW4gPSBmdW5jdGlvbigpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZSgnc2Vzc2lvbicpO1xuICAgICAgICB0aGlzLnRva2VuID0gbnVsbDtcbiAgICAgICAgY29uc29sZS5sb2coJ3Rva2VuIHVuc2V0Jyk7XG4gICAgfTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCduZ0NvcmRvdmFTbXMnLCBbXSlcbi5kaXJlY3RpdmUoJ25nQ29yZG92YVNtcycsIFsnJGNvcmRvdmFTbXMnLCAnJGlvbmljUG9wdXAnLCBmdW5jdGlvbigkY29yZG92YVNtcywgJGlvbmljUG9wdXApIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbCwgYXR0cnMpIHtcbiAgICAgICAgICAgIGVsLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgJGlvbmljUG9wdXAucHJvbXB0KHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTa3JpdiBpbiBkaXR0IG5hbW4nLFxuICAgICAgICAgICAgICAgICAgICBpbnB1dFR5cGU6ICd0ZXh0J1xuICAgICAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24obmFtZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9ICdGSVNLQSAnICsgYXR0cnMubmdDb3Jkb3ZhU21zICsgJyAnICsgbmFtZTtcbiAgICAgICAgICAgICAgICAgICAgJGNvcmRvdmFTbXMuc2VuZCgnNzI0NTYnLCBtZXNzYWdlLCAnSU5URU5UJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc3VjY3Vlc3MnKTtcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24oZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbn1dKTtcbiIsImFuZ3VsYXIubW9kdWxlKCdpZmlza2UuZGlyZWN0aXZlcycpXG4gICAgLmRpcmVjdGl2ZSgnaWZpc2tlSW5wdXQnLCBmdW5jdGlvbigpIHtcblx0cmV0dXJuIHtcblx0ICAgIHJlc3RyaWN0OiAnRScsXG5cdCAgICB0cmFuc2NsdWRlOiB0cnVlLFxuXG5cdCAgICBzY29wZToge1xuXHRcdG5hbWU6ICdAJyxcblx0XHRpZDogJ0AnLFxuXHRcdGxhYmVsOiAnQCcsXG5cdFx0cGxhY2Vob2xkZXI6ICdAJyxcblx0XHR0eXBlOiAnQCcsXG5cdFx0bmdQYXR0ZXJuOiAnQCcsXG5cdFx0bmdNb2RlbDogJz0/J1xuXG5cdCAgICB9LFxuXHQgICAgdGVtcGxhdGVVcmw6ICdkaXJlY3RpdmVzL2lucHV0X2ZpZWxkL2lmaXNrZV9pbnB1dC5odG1sJyxcblx0ICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uKCRzY29wZSkge1xuXHRcdCRzY29wZS5pZCA9ICRzY29wZS5pZCB8fCAkc2NvcGUubmFtZTtcblx0XHQkc2NvcGUudHlwZSA9ICRzY29wZS50eXBlIHx8ICd0ZXh0Jztcblx0ICAgIH1cblx0fVxuICAgIH0pXG4iLCJhbmd1bGFyLm1vZHVsZSgnc3lzdGVtQnJvd3NlcicsIFtdKVxuLmRpcmVjdGl2ZSgnc3lzdGVtQnJvd3NlcicsIFsnJGNvcmRvdmFJbkFwcEJyb3dzZXInLCBmdW5jdGlvbigkY29yZG92YUluQXBwQnJvd3Nlcikge1xuICAgICd1c2Ugc3RyaWN0JztcbiAgICByZXR1cm4ge1xuICAgICAgICByZXN0cmljdDogJ0EnLFxuICAgICAgICBsaW5rOiBmdW5jdGlvbiAoc2NvcGUsIGVsLCBhdHRycykge1xuICAgICAgICAgICAgZWwub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICRjb3Jkb3ZhSW5BcHBCcm93c2VyLm9wZW4oZWxbMF0uaHJlZiwgJ19zeXN0ZW0nKTtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSlcbi5kaXJlY3RpdmUoJ2dsb2JhbFN5c3RlbUJyb3dzZXInLCBbJyRjb3Jkb3ZhSW5BcHBCcm93c2VyJywgZnVuY3Rpb24oJGNvcmRvdmFJbkFwcEJyb3dzZXIpIHtcbiAgICAndXNlIHN0cmljdCc7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVzdHJpY3Q6ICdBJyxcbiAgICAgICAgbGluazogZnVuY3Rpb24gKHNjb3BlLCBlbCwgYXR0cnMpIHtcbiAgICAgICAgICAgIGVsLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS50YXJnZXQuaHJlZiAmJiBlLnRhcmdldC5ob3N0ICE9PSB3aW5kb3cubG9jYXRpb24uaG9zdCkge1xuICAgICAgICAgICAgICAgICAgICAkY29yZG92YUluQXBwQnJvd3Nlci5vcGVuKGUudGFyZ2V0LmhyZWYsICdfc3lzdGVtJyk7XG4gICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH07XG59XSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=